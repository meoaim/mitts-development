const Ea=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}};Ea();function B(){}function ya(n,e){for(const a in e)n[a]=e[a];return n}function Ca(n){return n()}function yt(){return Object.create(null)}function Ve(n){n.forEach(Ca)}function Sa(n){return typeof n=="function"}function X(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let at;function Ne(n,e){return at||(at=document.createElement("a")),at.href=e,n===at.href}function Ua(n){return Object.keys(n).length===0}function Wa(n,...e){if(n==null)return B;const a=n.subscribe(...e);return a.unsubscribe?()=>a.unsubscribe():a}function ne(n,e,a){n.$$.on_destroy.push(Wa(e,a))}function ht(n,e,a,t){if(n){const s=Ma(n,e,a,t);return n[0](s)}}function Ma(n,e,a,t){return n[1]&&t?ya(a.ctx.slice(),n[1](t(e))):a.ctx}function _t(n,e,a,t){if(n[2]&&t){const s=n[2](t(a));if(e.dirty===void 0)return s;if(typeof s=="object"){const r=[],l=Math.max(e.dirty.length,s.length);for(let c=0;c<l;c+=1)r[c]=e.dirty[c]|s[c];return r}return e.dirty|s}return e.dirty}function wt(n,e,a,t,s,r){if(s){const l=Ma(e,a,t,r);n.p(l,s)}}function $t(n){if(n.ctx.length>32){const e=[],a=n.ctx.length/32;for(let t=0;t<a;t++)e[t]=-1;return e}return-1}function ct(n){return n==null?"":n}function F(n,e,a){return n.set(a),e}function $(n,e){n.appendChild(e)}function C(n,e,a){n.insertBefore(e,a||null)}function y(n){n.parentNode.removeChild(n)}function Le(n,e){for(let a=0;a<n.length;a+=1)n[a]&&n[a].d(e)}function j(n){return document.createElement(n)}function H(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Y(n){return document.createTextNode(n)}function L(){return Y(" ")}function Ce(){return Y("")}function ue(n,e,a,t){return n.addEventListener(e,a,t),()=>n.removeEventListener(e,a,t)}function i(n,e,a){a==null?n.removeAttribute(e):n.getAttribute(e)!==a&&n.setAttribute(e,a)}function xa(n){return n===""?null:+n}function Pa(n){return Array.from(n.childNodes)}function Z(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function Fe(n,e){n.value=e==null?"":e}function _e(n,e,a,t){a===null?n.style.removeProperty(e):n.style.setProperty(e,a,t?"important":"")}function dt(n,e){for(let a=0;a<n.options.length;a+=1){const t=n.options[a];if(t.__value===e){t.selected=!0;return}}n.selectedIndex=-1}function La(n){const e=n.querySelector(":checked")||n.options[0];return e&&e.__value}let nt;function Fa(){if(nt===void 0){nt=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch{nt=!0}}return nt}function Oa(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const t=j("iframe");t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),t.setAttribute("aria-hidden","true"),t.tabIndex=-1;const s=Fa();let r;return s?(t.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=ue(window,"message",l=>{l.source===t.contentWindow&&e()})):(t.src="about:blank",t.onload=()=>{r=ue(t.contentWindow,"resize",e)}),$(n,t),()=>{(s||r&&t.contentWindow)&&r(),y(t)}}function st(n,e,a){n.classList[a?"add":"remove"](e)}function Va(n,e,{bubbles:a=!1,cancelable:t=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(n,a,t,e),s}let Ke;function Xe(n){Ke=n}function Ra(){if(!Ke)throw new Error("Function called outside component initialization");return Ke}function Ja(n){Ra().$$.on_mount.push(n)}function Me(){const n=Ra();return(e,a,{cancelable:t=!1}={})=>{const s=n.$$.callbacks[e];if(s){const r=Va(e,a,{cancelable:t});return s.slice().forEach(l=>{l.call(n,r)}),!r.defaultPrevented}return!0}}const Ge=[],z=[],rt=[],vt=[],Ya=Promise.resolve();let kt=!1;function Ga(){kt||(kt=!0,Ya.then(Na))}function Ee(n){rt.push(n)}function T(n){vt.push(n)}const mt=new Set;let lt=0;function Na(){const n=Ke;do{for(;lt<Ge.length;){const e=Ge[lt];lt++,Xe(e),Xa(e.$$)}for(Xe(null),Ge.length=0,lt=0;z.length;)z.pop()();for(let e=0;e<rt.length;e+=1){const a=rt[e];mt.has(a)||(mt.add(a),a())}rt.length=0}while(Ge.length);for(;vt.length;)vt.pop()();kt=!1,mt.clear(),Xe(n)}function Xa(n){if(n.fragment!==null){n.update(),Ve(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ee)}}const ot=new Set;let Te;function se(){Te={r:0,c:[],p:Te}}function le(){Te.r||Ve(Te.c),Te=Te.p}function k(n,e){n&&n.i&&(ot.delete(n),n.i(e))}function I(n,e,a,t){if(n&&n.o){if(ot.has(n))return;ot.add(n),Te.c.push(()=>{ot.delete(n),t&&(a&&n.d(1),t())}),n.o(e)}}function Ka(n,e){const a={},t={},s={$$scope:1};let r=n.length;for(;r--;){const l=n[r],c=e[r];if(c){for(const o in l)o in c||(t[o]=1);for(const o in c)s[o]||(a[o]=c[o],s[o]=1);n[r]=c}else for(const o in l)s[o]=1}for(const l in t)l in a||(a[l]=void 0);return a}function Qa(n){return typeof n=="object"&&n!==null?n:{}}function E(n,e,a){const t=n.$$.props[e];t!==void 0&&(n.$$.bound[t]=a,a(n.$$.ctx[t]))}function x(n){n&&n.c()}function S(n,e,a,t){const{fragment:s,on_mount:r,on_destroy:l,after_update:c}=n.$$;s&&s.m(e,a),t||Ee(()=>{const o=r.map(Ca).filter(Sa);l?l.push(...o):Ve(o),n.$$.on_mount=[]}),c.forEach(Ee)}function M(n,e){const a=n.$$;a.fragment!==null&&(Ve(a.on_destroy),a.fragment&&a.fragment.d(e),a.on_destroy=a.fragment=null,a.ctx=[])}function Za(n,e){n.$$.dirty[0]===-1&&(Ge.push(n),Ga(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function K(n,e,a,t,s,r,l,c=[-1]){const o=Ke;Xe(n);const d=n.$$={fragment:null,ctx:null,props:r,update:B,not_equal:s,bound:yt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:yt(),dirty:c,skip_bound:!1,root:e.target||o.$$.root};l&&l(d.root);let _=!1;if(d.ctx=a?a(n,e.props||{},(g,p,...m)=>{const u=m.length?m[0]:p;return d.ctx&&s(d.ctx[g],d.ctx[g]=u)&&(!d.skip_bound&&d.bound[g]&&d.bound[g](u),_&&Za(n,g)),p}):[],d.update(),_=!0,Ve(d.before_update),d.fragment=t?t(d.ctx):!1,e.target){if(e.hydrate){const g=Pa(e.target);d.fragment&&d.fragment.l(g),g.forEach(y)}else d.fragment&&d.fragment.c();e.intro&&k(n.$$.fragment),S(n,e.target,e.anchor,e.customElement),Na()}Xe(o)}class Q{$destroy(){M(this,1),this.$destroy=B}$on(e,a){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(a),()=>{const s=t.indexOf(a);s!==-1&&t.splice(s,1)}}$set(e){this.$$set&&!Ua(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pe=[];function Qe(n,e=B){let a;const t=new Set;function s(c){if(X(n,c)&&(n=c,a)){const o=!Pe.length;for(const d of t)d[1](),Pe.push(d,n);if(o){for(let d=0;d<Pe.length;d+=2)Pe[d][0](Pe[d+1]);Pe.length=0}}}function r(c){s(c(n))}function l(c,o=B){const d=[c,o];return t.add(d),t.size===1&&(a=e(s)||B),c(n),()=>{t.delete(d),t.size===0&&(a(),a=null)}}return{set:s,update:r,subscribe:l}}let Ct="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function we(n){let e="";for(let a=0;a<n;a++)e+=Ct.charAt(Math.floor(Math.random()*Ct.length));return e}async function St(n){return new Promise(e=>setTimeout(e,n))}async function ft(n){const a=new TextEncoder().encode(n),t=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}const Aa="1.8.0",$e=8,it=Qe(!1),Ze=Qe(void 0),O=Qe({version:Aa,data:{information:{title:"",version:"",author:"",synopsis:""},actions:{data:{},ordering:[]},restraintLocations:{data:{},ordering:[]}},storage:{states:{data:{},ordering:[]},restraints:{data:{},ordering:[]},objects:{data:{},ordering:[]},images:{}}}),en=[async function(n){n.storage.images===void 0&&(n.storage.images={});for(const e of Object.values(n.storage.states.data)){const a=e;if(a.imageB64!==void 0){const t=await ft(a.imageB64);n.storage.images[t]=a.imageB64,a.imageHash=t,delete a.imageB64}for(const t of Object.values(a.locations.data)){const s=t;if(s.minimapB64!==void 0){const r=await ft(s.minimapB64);n.storage.images[r]=s.minimapB64,s.minimapHash=r,delete s.minimapB64}}}return n}];function tn(n){window.go.main.Bridge.ExportProject(n)}function an(){return window.go.main.Bridge.ImportProject()}function Ba(){return window.go.main.Bridge.LoadImage()}function Mt(n){let e,a;return{c(){e=j("span"),a=Y(n[0])},m(t,s){C(t,e,s),$(e,a)},p(t,s){s&1&&Z(a,t[0])},d(t){t&&y(e)}}}function nn(n){let e,a,t,s,r,l;const c=n[4].default,o=ht(c,n,n[3],null);let d=n[0]!==""&&Mt(n);return{c(){e=j("button"),o&&o.c(),a=L(),d&&d.c(),i(e,"class",t=`flex flex-row items-center justify-center
    text-slate-300 bg-slate-700 hover:bg-slate-600 focus:bg-slate-500
    font-medium rounded-md text-sm text-center 
    px-2.5 py-2 space-x-1.5 
    ${n[2]}`),i(e,"type","button")},m(_,g){C(_,e,g),o&&o.m(e,null),$(e,a),d&&d.m(e,null),s=!0,r||(l=ue(e,"click",function(){Sa(n[1])&&n[1].apply(this,arguments)}),r=!0)},p(_,[g]){n=_,o&&o.p&&(!s||g&8)&&wt(o,c,n,n[3],s?_t(c,n[3],g,null):$t(n[3]),null),n[0]!==""?d?d.p(n,g):(d=Mt(n),d.c(),d.m(e,null)):d&&(d.d(1),d=null),(!s||g&4&&t!==(t=`flex flex-row items-center justify-center
    text-slate-300 bg-slate-700 hover:bg-slate-600 focus:bg-slate-500
    font-medium rounded-md text-sm text-center 
    px-2.5 py-2 space-x-1.5 
    ${n[2]}`))&&i(e,"class",t)},i(_){s||(k(o,_),s=!0)},o(_){I(o,_),s=!1},d(_){_&&y(e),o&&o.d(_),d&&d.d(),r=!1,l()}}}function sn(n,e,a){let{$$slots:t={},$$scope:s}=e,{label:r=""}=e,{onclick:l}=e,{class:c=""}=e;return n.$$set=o=>{"label"in o&&a(0,r=o.label),"onclick"in o&&a(1,l=o.onclick),"class"in o&&a(2,c=o.class),"$$scope"in o&&a(3,s=o.$$scope)},[r,l,c,s,t]}class J extends Q{constructor(e){super(),K(this,e,sn,nn,X,{label:0,onclick:1,class:2})}}function xt(n,e,a){const t=n.slice();return t[11]=e[a][0],t[1]=e[a][1],t}function ln(n){let e,a;return e=new J({props:{label:"Stop",onclick:n[6],$$slots:{default:[on]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&16384&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function rn(n){let e,a,t,s,r,l;return e=new J({props:{label:"Import",onclick:n[3],$$slots:{default:[cn]},$$scope:{ctx:n}}}),t=new J({props:{label:"Export",onclick:n[4],$$slots:{default:[dn]},$$scope:{ctx:n}}}),r=new J({props:{label:"Play",onclick:n[5],$$slots:{default:[fn]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment),a=L(),x(t.$$.fragment),s=L(),x(r.$$.fragment)},m(c,o){S(e,c,o),C(c,a,o),S(t,c,o),C(c,s,o),S(r,c,o),l=!0},p(c,o){const d={};o&16384&&(d.$$scope={dirty:o,ctx:c}),e.$set(d);const _={};o&16384&&(_.$$scope={dirty:o,ctx:c}),t.$set(_);const g={};o&16384&&(g.$$scope={dirty:o,ctx:c}),r.$set(g)},i(c){l||(k(e.$$.fragment,c),k(t.$$.fragment,c),k(r.$$.fragment,c),l=!0)},o(c){I(e.$$.fragment,c),I(t.$$.fragment,c),I(r.$$.fragment,c),l=!1},d(c){M(e,c),c&&y(a),M(t,c),c&&y(s),M(r,c)}}}function on(n){let e,a,t;return{c(){e=H("svg"),a=H("path"),t=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-5 w-5"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(s,r){C(s,e,r),$(e,a),$(e,t)},p:B,d(s){s&&y(e)}}}function cn(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-5 w-5"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function dn(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-5 w-5"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function fn(n){let e,a,t;return{c(){e=H("svg"),a=H("path"),t=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-5 w-5"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(s,r){C(s,e,r),$(e,a),$(e,t)},p:B,d(s){s&&y(e)}}}function un(n){let e;return{c(){e=j("p"),e.textContent="Check console for debug information",i(e,"class","text-xl text-slate-300")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function gn(n){let e,a=Object.entries(n[1]),t=[];for(let s=0;s<a.length;s+=1)t[s]=Lt(xt(n,a,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=Ce()},m(s,r){for(let l=0;l<t.length;l+=1)t[l].m(s,r);C(s,e,r)},p(s,r){if(r&131){a=Object.entries(s[1]);let l;for(l=0;l<a.length;l+=1){const c=xt(s,a,l);t[l]?t[l].p(c,r):(t[l]=Lt(c),t[l].c(),t[l].m(e.parentNode,e))}for(;l<t.length;l+=1)t[l].d(1);t.length=a.length}},d(s){Le(t,s),s&&y(e)}}}function Lt(n){let e,a,t=n[1].display+"",s,r,l,c,o,d;return{c(){e=j("li"),a=j("a"),s=Y(t),c=L(),i(a,"class",r=`cursor-pointer select-none ${n[11]===n[0]?"text-slate-200":"hover:text-slate-300 focus:text-slate-200"}`),i(a,"aria-label",l=n[11]),i(e,"class","h-full py-2.5")},m(_,g){C(_,e,g),$(e,a),$(a,s),$(e,c),o||(d=ue(a,"click",n[7]),o=!0)},p(_,g){g&2&&t!==(t=_[1].display+"")&&Z(s,t),g&3&&r!==(r=`cursor-pointer select-none ${_[11]===_[0]?"text-slate-200":"hover:text-slate-300 focus:text-slate-200"}`)&&i(a,"class",r),g&2&&l!==(l=_[11])&&i(a,"aria-label",l)},d(_){_&&y(e),o=!1,d()}}}function pn(n){let e,a,t,s,r,l,c,o,d,_,g,p,m,u,b,f;const h=[rn,ln],v=[];function w(R,P){return R[2]===!1?0:1}r=w(n),l=v[r]=h[r](n);function N(R,P){return R[2]===!1?gn:un}let A=N(n),D=A(n);return{c(){e=j("nav"),a=j("div"),t=j("div"),s=j("div"),l.c(),c=L(),o=j("div"),d=j("div"),_=j("span"),_.textContent="Mitts-Development",g=L(),p=j("span"),p.textContent=`v${Aa}`,m=L(),u=j("div"),b=j("ul"),D.c(),i(s,"class","flex flex-row space-x-2.5"),i(_,"class","font-medium text-2xl"),i(p,"class","text-xl"),i(d,"class","flex flex-row items-end space-x-2"),i(o,"class","flex items-center"),i(t,"class","flex flex-row space-x-4 py-3"),i(b,"class","flex flex-row text-xl space-x-8"),i(u,"class","flex items-center space-x-1 pr-2"),i(a,"class","flex flex-row justify-between items-stretch px-4"),i(e,"class","bg-slate-800 text-slate-400")},m(R,P){C(R,e,P),$(e,a),$(a,t),$(t,s),v[r].m(s,null),$(t,c),$(t,o),$(o,d),$(d,_),$(d,g),$(d,p),$(a,m),$(a,u),$(u,b),D.m(b,null),f=!0},p(R,[P]){let ee=r;r=w(R),r===ee?v[r].p(R,P):(se(),I(v[ee],1,1,()=>{v[ee]=null}),le(),l=v[r],l?l.p(R,P):(l=v[r]=h[r](R),l.c()),k(l,1),l.m(s,null)),A===(A=N(R))&&D?D.p(R,P):(D.d(1),D=A(R),D&&(D.c(),D.m(b,null)))},i(R){f||(k(l),f=!0)},o(R){I(l),f=!1},d(R){R&&y(e),v[r].d(),D.d()}}}function mn(n,e,a){let t,s;ne(n,it,u=>a(2,t=u)),ne(n,O,u=>a(10,s=u));let{navigationData:r}=e,{navigationClickHandler:l}=e,{selectedWindow:c}=e,{show:o}=e;async function d(){const u=await an();let b=JSON.parse(u);for(const f of en)b=await f(b);a(8,o=!1),await St(50),O.set(b),await St(50),a(8,o=!0)}async function _(){const u=new Set;for(const f of Object.values(s.storage.states.data)){u.add(f.imageHash);for(const h of Object.values(f.locations.data))u.add(h.minimapHash)}u.delete("");for(const f of Object.keys(s.storage.images))u.has(f)===!1&&(console.log(`Deleting unused image hash [${f}]`),delete s.storage.images[f]);const b=JSON.stringify(s);await tn(b)}async function g(){const u=Object.entries(s.storage.states.data).filter(([f,h])=>h.type==="opening"),b=Object.entries(s.storage.states.data).filter(([f,h])=>h.type==="starting");u.length===0?alert("Error initializing playtesting: couldn't find opening state"):b.length===0?alert("Error initializing playtesting: couldn't find starting state"):F(it,t=!0,t)}async function p(){F(it,t=!1,t)}function m(u){const f=u.currentTarget.getAttribute("aria-label");l(f)}return n.$$set=u=>{"navigationData"in u&&a(1,r=u.navigationData),"navigationClickHandler"in u&&a(9,l=u.navigationClickHandler),"selectedWindow"in u&&a(0,c=u.selectedWindow),"show"in u&&a(8,o=u.show)},[c,r,t,d,_,g,p,m,o,l]}class bn extends Q{constructor(e){super(),K(this,e,mn,pn,X,{navigationData:1,navigationClickHandler:9,selectedWindow:0,show:8})}}function Ot(n,e,a){const t=n.slice();return t[3]=e[a][0],t[1]=e[a][1],t}function Rt(n){let e,a,t,s;var r=n[1].component;function l(c){return{}}return r&&(a=new r(l())),{c(){e=j("div"),a&&x(a.$$.fragment),t=L(),i(e,"class","absolute inset-0 bg-background text-slate-300 p-4 svelte-17i3nn2"),st(e,"shown",n[0]===n[3]),st(e,"not-shown",n[0]!==n[3])},m(c,o){C(c,e,o),a&&S(a,e,null),$(e,t),s=!0},p(c,o){if(r!==(r=c[1].component)){if(a){se();const d=a;I(d.$$.fragment,1,0,()=>{M(d,1)}),le()}r?(a=new r(l()),x(a.$$.fragment),k(a.$$.fragment,1),S(a,e,t)):a=null}o&3&&st(e,"shown",c[0]===c[3]),o&3&&st(e,"not-shown",c[0]!==c[3])},i(c){s||(a&&k(a.$$.fragment,c),s=!0)},o(c){a&&I(a.$$.fragment,c),s=!1},d(c){c&&y(e),a&&M(a)}}}function hn(n){let e,a,t=Object.entries(n[1]),s=[];for(let l=0;l<t.length;l+=1)s[l]=Rt(Ot(n,t,l));const r=l=>I(s[l],1,1,()=>{s[l]=null});return{c(){e=j("div");for(let l=0;l<s.length;l+=1)s[l].c();i(e,"class","relative grow")},m(l,c){C(l,e,c);for(let o=0;o<s.length;o+=1)s[o].m(e,null);a=!0},p(l,[c]){if(c&3){t=Object.entries(l[1]);let o;for(o=0;o<t.length;o+=1){const d=Ot(l,t,o);s[o]?(s[o].p(d,c),k(s[o],1)):(s[o]=Rt(d),s[o].c(),k(s[o],1),s[o].m(e,null))}for(se(),o=t.length;o<s.length;o+=1)r(o);le()}},i(l){if(!a){for(let c=0;c<t.length;c+=1)k(s[c]);a=!0}},o(l){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)I(s[c]);a=!1},d(l){l&&y(e),Le(s,l)}}}function _n(n,e,a){let{navigationData:t}=e,{selectedWindow:s}=e;const r=l=>{a(0,s=l)};return n.$$set=l=>{"navigationData"in l&&a(1,t=l.navigationData),"selectedWindow"in l&&a(0,s=l.selectedWindow)},[s,t,r]}class wn extends Q{constructor(e){super(),K(this,e,_n,hn,X,{navigationData:1,selectedWindow:0,navigateTab:2})}get navigateTab(){return this.$$.ctx[2]}}const $n=n=>({}),Nt=n=>({}),vn=n=>({}),At=n=>({});function kn(n){let e,a,t,s,r,l,c,o;const d=n[4].header,_=ht(d,n,n[3],At),g=n[4].content,p=ht(g,n,n[3],Nt);return{c(){e=j("div"),a=j("div"),_&&_.c(),s=L(),r=j("div"),p&&p.c(),i(a,"class",t=`flex flex-row justify-center items-center
        w-full pl-4 pr-4 space-x-6
        ${n[1]}`),i(r,"class",l=`flex flex-col grow space-y-2 
        w-full p-1
        ${n[2]}`),i(e,"class",c=`flex flex-col items-center space-y-2 
    rounded-lg bg-slate-800
    p-3 pt-2
    ${n[0]}`)},m(m,u){C(m,e,u),$(e,a),_&&_.m(a,null),$(e,s),$(e,r),p&&p.m(r,null),o=!0},p(m,[u]){_&&_.p&&(!o||u&8)&&wt(_,d,m,m[3],o?_t(d,m[3],u,vn):$t(m[3]),At),(!o||u&2&&t!==(t=`flex flex-row justify-center items-center
        w-full pl-4 pr-4 space-x-6
        ${m[1]}`))&&i(a,"class",t),p&&p.p&&(!o||u&8)&&wt(p,g,m,m[3],o?_t(g,m[3],u,$n):$t(m[3]),Nt),(!o||u&4&&l!==(l=`flex flex-col grow space-y-2 
        w-full p-1
        ${m[2]}`))&&i(r,"class",l),(!o||u&1&&c!==(c=`flex flex-col items-center space-y-2 
    rounded-lg bg-slate-800
    p-3 pt-2
    ${m[0]}`))&&i(e,"class",c)},i(m){o||(k(_,m),k(p,m),o=!0)},o(m){I(_,m),I(p,m),o=!1},d(m){m&&y(e),_&&_.d(m),p&&p.d(m)}}}function Dn(n,e,a){let{$$slots:t={},$$scope:s}=e,{class:r=""}=e,{headerClass:l=""}=e,{contentClass:c=""}=e;return n.$$set=o=>{"class"in o&&a(0,r=o.class),"headerClass"in o&&a(1,l=o.headerClass),"contentClass"in o&&a(2,c=o.contentClass),"$$scope"in o&&a(3,s=o.$$scope)},[r,l,c,s,t]}class ce extends Q{constructor(e){super(),K(this,e,Dn,kn,X,{class:0,headerClass:1,contentClass:2})}}function In(n){let e,a,t,s,r,l,c,o,d;return{c(){e=j("div"),a=j("p"),t=Y(n[1]),s=L(),r=j("div"),l=j("textarea"),i(a,"class","pl-1 text-slate-400 text-sm"),i(l,"class",`w-full h-full
            rounded bg-slate-800 focus:outline-none
            text-l text-slate-300
            resize-none overflow-y-auto
            scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden pr-3`),i(l,"type","text"),i(l,"rows",n[3]),i(l,"placeholder",n[2]),i(r,"class","grow w-full rounded bg-slate-800 border border-slate-500 placeholder-slate-500 focus:outline-none focus:border-slate-400 p-2"),i(e,"class",c=`flex flex-col items-start space-y-0.5
    ${n[4]}`)},m(_,g){C(_,e,g),$(e,a),$(a,t),$(e,s),$(e,r),$(r,l),Fe(l,n[0]),o||(d=ue(l,"input",n[5]),o=!0)},p(_,[g]){g&2&&Z(t,_[1]),g&8&&i(l,"rows",_[3]),g&4&&i(l,"placeholder",_[2]),g&1&&Fe(l,_[0]),g&16&&c!==(c=`flex flex-col items-start space-y-0.5
    ${_[4]}`)&&i(e,"class",c)},i:B,o:B,d(_){_&&y(e),o=!1,d()}}}function jn(n,e,a){let{label:t}=e,{placeholder:s=""}=e,{value:r}=e,{rows:l}=e,{class:c=""}=e;function o(){r=this.value,a(0,r)}return n.$$set=d=>{"label"in d&&a(1,t=d.label),"placeholder"in d&&a(2,s=d.placeholder),"value"in d&&a(0,r=d.value),"rows"in d&&a(3,l=d.rows),"class"in d&&a(4,c=d.class)},[r,t,s,l,c,o]}class Ue extends Q{constructor(e){super(),K(this,e,jn,In,X,{label:1,placeholder:2,value:0,rows:3,class:4})}}function yn(n){let e,a,t,s,r,l,c,o;return{c(){e=j("div"),a=j("p"),t=Y(n[1]),s=L(),r=j("input"),i(a,"class","pl-1 text-slate-400 text-sm"),i(r,"class","grow rounded bg-slate-800 border border-slate-500 placeholder-slate-500 focus:outline-none focus:border-slate-400 text-l text-slate-300 w-full p-2"),i(r,"placeholder",n[2]),i(e,"class",l=`flex flex-col items-start space-y-0.5
    ${n[3]}`)},m(d,_){C(d,e,_),$(e,a),$(a,t),$(e,s),$(e,r),Fe(r,n[0]),c||(o=ue(r,"input",n[4]),c=!0)},p(d,[_]){_&2&&Z(t,d[1]),_&4&&i(r,"placeholder",d[2]),_&1&&r.value!==d[0]&&Fe(r,d[0]),_&8&&l!==(l=`flex flex-col items-start space-y-0.5
    ${d[3]}`)&&i(e,"class",l)},i:B,o:B,d(d){d&&y(e),c=!1,o()}}}function Cn(n,e,a){let{label:t}=e,{placeholder:s=""}=e,{value:r}=e,{class:l=""}=e;function c(){r=this.value,a(0,r)}return n.$$set=o=>{"label"in o&&a(1,t=o.label),"placeholder"in o&&a(2,s=o.placeholder),"value"in o&&a(0,r=o.value),"class"in o&&a(3,l=o.class)},[r,t,s,l,c]}class he extends Q{constructor(e){super(),K(this,e,Cn,yn,X,{label:1,placeholder:2,value:0,class:3})}}function Sn(n){let e;return{c(){e=j("p"),e.textContent="Game Information",i(e,"class","text-slate-300 text-xl")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function Mn(n){let e,a,t,s,r,l,c,o,d,_,g,p,m;function u(D){n[1](D)}let b={class:"w-full",label:"Title",placeholder:"Inescapable Escape Game!"};n[0].data.information.title!==void 0&&(b.value=n[0].data.information.title),e=new he({props:b}),z.push(()=>E(e,"value",u));function f(D){n[2](D)}let h={class:"w-1/2",label:"Author",placeholder:"strawber!ria"};n[0].data.information.author!==void 0&&(h.value=n[0].data.information.author),r=new he({props:h}),z.push(()=>E(r,"value",f));function v(D){n[3](D)}let w={class:"grow",label:"Version",placeholder:"1.0.0"};n[0].data.information.version!==void 0&&(w.value=n[0].data.information.version),o=new he({props:w}),z.push(()=>E(o,"value",v));function N(D){n[4](D)}let A={class:"h-full w-full",label:"Synopsis",placeholder:"The most inescapable escape game there is!",rows:12};return n[0].data.information.synopsis!==void 0&&(A.value=n[0].data.information.synopsis),g=new Ue({props:A}),z.push(()=>E(g,"value",N)),{c(){x(e.$$.fragment),t=L(),s=j("div"),x(r.$$.fragment),c=L(),x(o.$$.fragment),_=L(),x(g.$$.fragment),i(s,"class","flex flex-row space-x-6")},m(D,R){S(e,D,R),C(D,t,R),C(D,s,R),S(r,s,null),$(s,c),S(o,s,null),C(D,_,R),S(g,D,R),m=!0},p(D,R){const P={};!a&&R&1&&(a=!0,P.value=D[0].data.information.title,T(()=>a=!1)),e.$set(P);const ee={};!l&&R&1&&(l=!0,ee.value=D[0].data.information.author,T(()=>l=!1)),r.$set(ee);const fe={};!d&&R&1&&(d=!0,fe.value=D[0].data.information.version,T(()=>d=!1)),o.$set(fe);const ge={};!p&&R&1&&(p=!0,ge.value=D[0].data.information.synopsis,T(()=>p=!1)),g.$set(ge)},i(D){m||(k(e.$$.fragment,D),k(r.$$.fragment,D),k(o.$$.fragment,D),k(g.$$.fragment,D),m=!0)},o(D){I(e.$$.fragment,D),I(r.$$.fragment,D),I(o.$$.fragment,D),I(g.$$.fragment,D),m=!1},d(D){M(e,D),D&&y(t),D&&y(s),M(r),M(o),D&&y(_),M(g,D)}}}function xn(n){let e,a;return e=new ce({props:{class:"grow w-full",$$slots:{content:[Mn],header:[Sn]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&33&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Ln(n,e,a){let t;ne(n,O,o=>a(0,t=o));function s(o){n.$$.not_equal(t.data.information.title,o)&&(t.data.information.title=o,O.set(t))}function r(o){n.$$.not_equal(t.data.information.author,o)&&(t.data.information.author=o,O.set(t))}function l(o){n.$$.not_equal(t.data.information.version,o)&&(t.data.information.version=o,O.set(t))}function c(o){n.$$.not_equal(t.data.information.synopsis,o)&&(t.data.information.synopsis=o,O.set(t))}return[t,s,r,l,c]}class On extends Q{constructor(e){super(),K(this,e,Ln,xn,X,{})}}function Rn(n){let e,a,t=n[1].name+"",s,r,l,c,o,d,_,g;return{c(){e=j("div"),a=j("p"),s=Y(t),r=L(),l=j("p"),c=Y(n[0]),i(a,"class","text-left w-11/12 min-w-0 truncate"),i(l,"class",o=`font-mono ${n[2]===!0?"text-slate-500":"text-slate-600"}`),i(e,"class",d=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${n[3]} ${n[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)},m(p,m){C(p,e,m),$(e,a),$(a,s),$(e,r),$(e,l),$(l,c),_||(g=ue(e,"click",n[4]),_=!0)},p(p,[m]){m&2&&t!==(t=p[1].name+"")&&Z(s,t),m&1&&Z(c,p[0]),m&4&&o!==(o=`font-mono ${p[2]===!0?"text-slate-500":"text-slate-600"}`)&&i(l,"class",o),m&12&&d!==(d=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${p[3]} ${p[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)&&i(e,"class",d)},i:B,o:B,d(p){p&&y(e),_=!1,g()}}}function Nn(n,e,a){let{key:t}=e,{actionData:s}=e,{selected:r}=e,{class:l}=e;const c=Me();function o(){c("dispatchClick",{key:t})}return n.$$set=d=>{"key"in d&&a(0,t=d.key),"actionData"in d&&a(1,s=d.actionData),"selected"in d&&a(2,r=d.selected),"class"in d&&a(3,l=d.class)},[t,s,r,l,o]}class An extends Q{constructor(e){super(),K(this,e,Nn,Rn,X,{key:0,actionData:1,selected:2,class:3})}}function Bt(n,e,a){const t=n.slice();return t[5]=e[a],t}function Ht(n){let e,a,t;const s=[n[5].props,{class:"cursor-pointer select-none"},{key:n[5].key},{selected:n[0]===n[5].key}];var r=n[5].component;function l(c){let o={};for(let d=0;d<s.length;d+=1)o=ya(o,s[d]);return{props:o}}return r&&(e=new r(l()),e.$on("dispatchClick",n[2])),{c(){e&&x(e.$$.fragment),a=Ce()},m(c,o){e&&S(e,c,o),C(c,a,o),t=!0},p(c,o){const d=o&3?Ka(s,[o&2&&Qa(c[5].props),s[1],o&2&&{key:c[5].key},{selected:c[0]===c[5].key}]):{};if(r!==(r=c[5].component)){if(e){se();const _=e;I(_.$$.fragment,1,0,()=>{M(_,1)}),le()}r?(e=new r(l()),e.$on("dispatchClick",c[2]),x(e.$$.fragment),k(e.$$.fragment,1),S(e,a.parentNode,a)):e=null}else r&&e.$set(d)},i(c){t||(e&&k(e.$$.fragment,c),t=!0)},o(c){e&&I(e.$$.fragment,c),t=!1},d(c){c&&y(a),e&&M(e,c)}}}function Bn(n){let e,a,t=n[1],s=[];for(let l=0;l<t.length;l+=1)s[l]=Ht(Bt(n,t,l));const r=l=>I(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=Ce()},m(l,c){for(let o=0;o<s.length;o+=1)s[o].m(l,c);C(l,e,c),a=!0},p(l,[c]){if(c&7){t=l[1];let o;for(o=0;o<t.length;o+=1){const d=Bt(l,t,o);s[o]?(s[o].p(d,c),k(s[o],1)):(s[o]=Ht(d),s[o].c(),k(s[o],1),s[o].m(e.parentNode,e))}for(se(),o=t.length;o<s.length;o+=1)r(o);le()}},i(l){if(!a){for(let c=0;c<t.length;c+=1)k(s[c]);a=!0}},o(l){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)I(s[c]);a=!1},d(l){Le(s,l),l&&y(e)}}}function Hn(n,e,a){let{selectedID:t}=e,{deselectable:s}=e,{scrollingRadioData:r}=e;const l=Me();function c(o){a(0,t=s===!0&&o.detail.key===t?void 0:o.detail.key),l("dispatchClick",{id:t})}return n.$$set=o=>{"selectedID"in o&&a(0,t=o.selectedID),"deselectable"in o&&a(3,s=o.deselectable),"scrollingRadioData"in o&&a(1,r=o.scrollingRadioData)},[t,r,c,s]}class Ae extends Q{constructor(e){super(),K(this,e,Hn,Bn,X,{selectedID:0,deselectable:3,scrollingRadioData:1})}}function qn(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M12 4v16m8-8H4"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function zn(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Tn(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M5 15l7-7 7 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function En(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 9l-7 7-7-7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Un(n){let e,a,t,s,r,l,c,o,d,_,g,p,m;return r=new J({props:{onclick:n[2],$$slots:{default:[qn]},$$scope:{ctx:n}}}),c=new J({props:{onclick:n[3],$$slots:{default:[zn]},$$scope:{ctx:n}}}),_=new J({props:{onclick:n[4],$$slots:{default:[Tn]},$$scope:{ctx:n}}}),p=new J({props:{onclick:n[5],$$slots:{default:[En]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Game Actions",a=L(),t=j("div"),s=j("div"),x(r.$$.fragment),l=L(),x(c.$$.fragment),o=L(),d=j("div"),x(_.$$.fragment),g=L(),x(p.$$.fragment),i(e,"class","text-slate-300 text-xl align-middle"),i(s,"class","flex flex-row space-x-1"),i(d,"class","flex flex-row space-x-1"),i(t,"class","flex flex-row space-x-4")},m(u,b){C(u,e,b),C(u,a,b),C(u,t,b),$(t,s),S(r,s,null),$(s,l),S(c,s,null),$(t,o),$(t,d),S(_,d,null),$(d,g),S(p,d,null),m=!0},p(u,b){const f={};b&512&&(f.$$scope={dirty:b,ctx:u}),r.$set(f);const h={};b&512&&(h.$$scope={dirty:b,ctx:u}),c.$set(h);const v={};b&512&&(v.$$scope={dirty:b,ctx:u}),_.$set(v);const w={};b&512&&(w.$$scope={dirty:b,ctx:u}),p.$set(w)},i(u){m||(k(r.$$.fragment,u),k(c.$$.fragment,u),k(_.$$.fragment,u),k(p.$$.fragment,u),m=!0)},o(u){I(r.$$.fragment,u),I(c.$$.fragment,u),I(_.$$.fragment,u),I(p.$$.fragment,u),m=!1},d(u){u&&y(e),u&&y(a),u&&y(t),M(r),M(c),M(_),M(p)}}}function Wn(n){let e,a,t;function s(l){n[7](l)}let r={deselectable:!0,scrollingRadioData:n[1]};return n[0]!==void 0&&(r.selectedID=n[0]),e=new Ae({props:r}),z.push(()=>E(e,"selectedID",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&2&&(o.scrollingRadioData=l[1]),!a&&c&1&&(a=!0,o.selectedID=l[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Pn(n){let e,a;return e=new ce({props:{class:`shrink\r
    w-full h-3/5 min-h-0`,contentClass:`scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden\r
        pr-4 mr-1`,$$slots:{content:[Wn],header:[Un]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&515&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Fn(n,e,a){let t;ne(n,O,p=>a(6,t=p));let{selectedActionID:s}=e,r;function l(){return t.data.actions.ordering.filter(p=>p!==void 0).map(p=>{const m=t.data.actions.data[p];return{key:m.id,component:An,props:{actionData:m}}})}function c(){const p=we($e);F(O,t.data.actions.data[p]={id:p,name:"",verb:"",order:!1,two:!1},t),t.data.actions.ordering.push(p),O.set(t)}function o(){var p,m;if(s!==void 0){const u=s;a(0,s=void 0);const b=t.data.actions.ordering,f=b.findIndex(h=>h===u);for(let h=f;h<b.length-1;h++)b[h]=(p=b[h+1])!=null?p:void 0;b.pop(),a(0,s=(m=b[f])!=null?m:b[f-1]),delete t.data.actions.data[u],O.set(t)}}function d(){if(s!==void 0&&t.data.actions.ordering.length>1){const p=t.data.actions.ordering,m=p.findIndex(b=>b===s);if(m<=0)return;const u=p[m];p[m]=p[m-1],p[m-1]=u,O.set(t)}}function _(){if(s!==void 0&&t.data.actions.ordering.length>1){const p=t.data.actions.ordering,m=p.findIndex(b=>b===s);if(m===-1||m===t.data.actions.ordering.length-1)return;const u=p[m];p[m]=p[m+1],p[m+1]=u,O.set(t)}}function g(p){s=p,a(0,s)}return n.$$set=p=>{"selectedActionID"in p&&a(0,s=p.selectedActionID)},n.$$.update=()=>{n.$$.dirty&64&&(t.data.actions,a(1,r=l()))},[s,r,c,o,d,_,t,g]}class Vn extends Q{constructor(e){super(),K(this,e,Fn,Pn,X,{selectedActionID:0})}}function Jn(n){let e,a,t,s,r,l,c,o,d,_,g;return{c(){e=j("div"),a=j("p"),t=Y(n[1]),s=L(),r=j("label"),l=j("input"),c=L(),o=j("div"),i(a,"class","pl-1 mb-2 text-slate-400 text-sm"),i(l,"type","checkbox"),i(l,"class","sr-only peer"),i(o,"class","bg-slate-700 rounded-full border border-slate-700 after:rounded-full after:bg-slate-400 after:border after:border-slate-400 after:h-5 after:w-5 peer-checked:after:bg-slate-200 peer-checked:after:border-slate-200 peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:transition-all peer-checked:bg-slate-600 w-11 h-6"),i(r,"class","inline-flex relative items-center cursor-pointer ml-0.5"),i(e,"class",d=`flex flex-col items-start space-y-0.5
    pb-2
    ${n[2]}`)},m(p,m){C(p,e,m),$(e,a),$(a,t),$(e,s),$(e,r),$(r,l),l.checked=n[0],$(r,c),$(r,o),_||(g=ue(l,"change",n[3]),_=!0)},p(p,[m]){m&2&&Z(t,p[1]),m&1&&(l.checked=p[0]),m&4&&d!==(d=`flex flex-col items-start space-y-0.5
    pb-2
    ${p[2]}`)&&i(e,"class",d)},i:B,o:B,d(p){p&&y(e),_=!1,g()}}}function Yn(n,e,a){let{label:t}=e,{value:s}=e,{class:r=""}=e;function l(){s=this.checked,a(0,s)}return n.$$set=c=>{"label"in c&&a(1,t=c.label),"value"in c&&a(0,s=c.value),"class"in c&&a(2,r=c.class)},[s,t,r,l]}class ut extends Q{constructor(e){super(),K(this,e,Yn,Jn,X,{label:1,value:0,class:2})}}function Gn(n){let e;return{c(){e=j("p"),e.textContent="Selected Action",i(e,"class","text-slate-300 text-xl")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function Xn(n){let e,a,t,s,r,l,c,o,d,_,g,p,m;function u(D){n[2](D)}let b={class:"w-3/4",label:"Name",placeholder:"Use"};n[1].data.actions.data[n[0]].name!==void 0&&(b.value=n[1].data.actions.data[n[0]].name),e=new he({props:b}),z.push(()=>E(e,"value",u));function f(D){n[3](D)}let h={class:"w-1/2",label:"Verb",placeholder:"with"};n[1].data.actions.data[n[0]].verb!==void 0&&(h.value=n[1].data.actions.data[n[0]].verb),s=new he({props:h}),z.push(()=>E(s,"value",f));function v(D){n[4](D)}let w={label:"Order Matters"};n[1].data.actions.data[n[0]].order!==void 0&&(w.value=n[1].data.actions.data[n[0]].order),o=new ut({props:w}),z.push(()=>E(o,"value",v));function N(D){n[5](D)}let A={label:"Optional Second Argument"};return n[1].data.actions.data[n[0]].two!==void 0&&(A.value=n[1].data.actions.data[n[0]].two),g=new ut({props:A}),z.push(()=>E(g,"value",N)),{c(){x(e.$$.fragment),t=L(),x(s.$$.fragment),l=L(),c=j("div"),x(o.$$.fragment),_=L(),x(g.$$.fragment),i(c,"class","flex flex-row items-center space-x-6")},m(D,R){S(e,D,R),C(D,t,R),S(s,D,R),C(D,l,R),C(D,c,R),S(o,c,null),$(c,_),S(g,c,null),m=!0},p(D,R){const P={};!a&&R&3&&(a=!0,P.value=D[1].data.actions.data[D[0]].name,T(()=>a=!1)),e.$set(P);const ee={};!r&&R&3&&(r=!0,ee.value=D[1].data.actions.data[D[0]].verb,T(()=>r=!1)),s.$set(ee);const fe={};!d&&R&3&&(d=!0,fe.value=D[1].data.actions.data[D[0]].order,T(()=>d=!1)),o.$set(fe);const ge={};!p&&R&3&&(p=!0,ge.value=D[1].data.actions.data[D[0]].two,T(()=>p=!1)),g.$set(ge)},i(D){m||(k(e.$$.fragment,D),k(s.$$.fragment,D),k(o.$$.fragment,D),k(g.$$.fragment,D),m=!0)},o(D){I(e.$$.fragment,D),I(s.$$.fragment,D),I(o.$$.fragment,D),I(g.$$.fragment,D),m=!1},d(D){M(e,D),D&&y(t),M(s,D),D&&y(l),D&&y(c),M(o),M(g)}}}function Kn(n){let e,a;return e=new ce({props:{class:`grow shrink\r
    w-full min-h-0`,$$slots:{content:[Xn],header:[Gn]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&67&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Qn(n,e,a){let t;ne(n,O,d=>a(1,t=d));let{selectedActionID:s}=e;function r(d){n.$$.not_equal(t.data.actions.data[s].name,d)&&(t.data.actions.data[s].name=d,O.set(t))}function l(d){n.$$.not_equal(t.data.actions.data[s].verb,d)&&(t.data.actions.data[s].verb=d,O.set(t))}function c(d){n.$$.not_equal(t.data.actions.data[s].order,d)&&(t.data.actions.data[s].order=d,O.set(t))}function o(d){n.$$.not_equal(t.data.actions.data[s].two,d)&&(t.data.actions.data[s].two=d,O.set(t))}return n.$$set=d=>{"selectedActionID"in d&&a(0,s=d.selectedActionID)},[s,t,r,l,c,o]}class Zn extends Q{constructor(e){super(),K(this,e,Qn,Kn,X,{selectedActionID:0})}}function qt(n){let e,a;return e=new Zn({props:{selectedActionID:n[0]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&1&&(r.selectedActionID=t[0]),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function es(n){let e,a,t,s,r,l,c,o,d;function _(m){n[1](m)}let g={};n[0]!==void 0&&(g.selectedActionID=n[0]),t=new Vn({props:g}),z.push(()=>E(t,"selectedActionID",_));let p=n[0]!==void 0&&n[0]!==""&&qt(n);return o=new On({}),{c(){e=j("div"),a=j("div"),x(t.$$.fragment),r=L(),p&&p.c(),l=L(),c=j("div"),x(o.$$.fragment),i(a,"class","flex flex-col space-y-4 h-full"),_e(a,"width","30%"),i(c,"class","flex flex-col space-y-4 h-full"),_e(c,"width","35%"),i(e,"class","flex flex-row space-x-4 h-full w-full")},m(m,u){C(m,e,u),$(e,a),S(t,a,null),$(a,r),p&&p.m(a,null),$(e,l),$(e,c),S(o,c,null),d=!0},p(m,[u]){const b={};!s&&u&1&&(s=!0,b.selectedActionID=m[0],T(()=>s=!1)),t.$set(b),m[0]!==void 0&&m[0]!==""?p?(p.p(m,u),u&1&&k(p,1)):(p=qt(m),p.c(),k(p,1),p.m(a,null)):p&&(se(),I(p,1,1,()=>{p=null}),le())},i(m){d||(k(t.$$.fragment,m),k(p),k(o.$$.fragment,m),d=!0)},o(m){I(t.$$.fragment,m),I(p),I(o.$$.fragment,m),d=!1},d(m){m&&y(e),M(t),p&&p.d(),M(o)}}}function ts(n,e,a){let t;function s(r){t=r,a(0,t)}return[t,s]}class as extends Q{constructor(e){super(),K(this,e,ts,es,X,{})}}function zt(n){let e,a,t;return{c(){e=j("img"),i(e,"class","object-contain h-full"),Ne(e.src,a=n[1])||i(e,"src",a),i(e,"alt",t="")},m(s,r){C(s,e,r)},p(s,r){r&2&&!Ne(e.src,a=s[1])&&i(e,"src",a)},d(s){s&&y(e)}}}function ns(n){let e,a,t,s,r,l,c=n[1]!==""&&zt(n);return{c(){e=j("div"),a=j("p"),t=Y(n[0]),s=L(),r=j("div"),c&&c.c(),i(a,"class","pl-1 text-slate-400 text-sm"),i(r,"class","grow flex flex-col basis-0 min-h-0"),i(e,"class",l=`grow flex flex-col items-start space-y-0.5
    ${n[2]}`)},m(o,d){C(o,e,d),$(e,a),$(a,t),$(e,s),$(e,r),c&&c.m(r,null)},p(o,[d]){d&1&&Z(t,o[0]),o[1]!==""?c?c.p(o,d):(c=zt(o),c.c(),c.m(r,null)):c&&(c.d(1),c=null),d&4&&l!==(l=`grow flex flex-col items-start space-y-0.5
    ${o[2]}`)&&i(e,"class",l)},i:B,o:B,d(o){o&&y(e),c&&c.d()}}}function ss(n,e,a){let{label:t}=e,{imageData:s}=e,{class:r=""}=e;return n.$$set=l=>{"label"in l&&a(0,t=l.label),"imageData"in l&&a(1,s=l.imageData),"class"in l&&a(2,r=l.class)},[t,s,r]}class ls extends Q{constructor(e){super(),K(this,e,ss,ns,X,{label:0,imageData:1,class:2})}}function rs(n){let e,a,t,s,r,l,c,o;return{c(){e=j("div"),a=j("p"),t=Y(n[1]),s=L(),r=j("input"),i(a,"class","pl-1 text-slate-400 text-sm"),i(r,"class","grow rounded bg-slate-800 border border-slate-500 placeholder-slate-500 focus:outline-none focus:border-slate-400 text-l text-center text-slate-300 w-full p-2"),i(r,"type","number"),i(e,"class",l=`flex flex-col items-start space-y-0.5
    ${n[2]}`)},m(d,_){C(d,e,_),$(e,a),$(a,t),$(e,s),$(e,r),Fe(r,n[0]),c||(o=ue(r,"input",n[3]),c=!0)},p(d,[_]){_&2&&Z(t,d[1]),_&1&&xa(r.value)!==d[0]&&Fe(r,d[0]),_&4&&l!==(l=`flex flex-col items-start space-y-0.5
    ${d[2]}`)&&i(e,"class",l)},i:B,o:B,d(d){d&&y(e),c=!1,o()}}}function os(n,e,a){let{label:t}=e,{value:s}=e,{class:r=""}=e;function l(){s=xa(this.value),a(0,s)}return n.$$set=c=>{"label"in c&&a(1,t=c.label),"value"in c&&a(0,s=c.value),"class"in c&&a(2,r=c.class)},[s,t,r,l]}class Ha extends Q{constructor(e){super(),K(this,e,os,rs,X,{label:1,value:0,class:2})}}function Tt(n,e,a){const t=n.slice();return t[6]=e[a],t}function Et(n){let e,a=n[6].display+"",t,s,r,l,c;return{c(){e=j("option"),t=Y(a),s=L(),i(e,"class",r=`bg-slate-750 ${n[6].enabled===!0?"text-slate-300":"text-slate-500"}`),e.__value=l=n[6].key,e.value=e.__value,e.disabled=c=n[6].enabled===!1},m(o,d){C(o,e,d),$(e,t),$(e,s)},p(o,d){d&4&&a!==(a=o[6].display+"")&&Z(t,a),d&4&&r!==(r=`bg-slate-750 ${o[6].enabled===!0?"text-slate-300":"text-slate-500"}`)&&i(e,"class",r),d&4&&l!==(l=o[6].key)&&(e.__value=l,e.value=e.__value),d&4&&c!==(c=o[6].enabled===!1)&&(e.disabled=c)},d(o){o&&y(e)}}}function is(n){let e,a,t,s,r,l,c,o,d,_=n[2],g=[];for(let p=0;p<_.length;p+=1)g[p]=Et(Tt(n,_,p));return{c(){e=j("div"),a=j("p"),t=Y(n[1]),s=L(),r=j("select");for(let p=0;p<g.length;p+=1)g[p].c();i(a,"class","pl-1 text-slate-400 text-sm"),i(r,"class",l=`rounded  border border-slate-500 placeholder-slate-500 focus:outline-none focus:border-slate-400
            text-slate-300  
            block w-full p-2.5
            ${n[3]===!0?"bg-slate-700":"bg-slate-800"}`),r.disabled=n[3],n[0]===void 0&&Ee(()=>n[5].call(r)),i(e,"class",c=`flex flex-col items-start space-y-0.5
    ${n[4]}`)},m(p,m){C(p,e,m),$(e,a),$(a,t),$(e,s),$(e,r);for(let u=0;u<g.length;u+=1)g[u].m(r,null);dt(r,n[0]),o||(d=ue(r,"change",n[5]),o=!0)},p(p,[m]){if(m&2&&Z(t,p[1]),m&4){_=p[2];let u;for(u=0;u<_.length;u+=1){const b=Tt(p,_,u);g[u]?g[u].p(b,m):(g[u]=Et(b),g[u].c(),g[u].m(r,null))}for(;u<g.length;u+=1)g[u].d(1);g.length=_.length}m&8&&l!==(l=`rounded  border border-slate-500 placeholder-slate-500 focus:outline-none focus:border-slate-400
            text-slate-300  
            block w-full p-2.5
            ${p[3]===!0?"bg-slate-700":"bg-slate-800"}`)&&i(r,"class",l),m&8&&(r.disabled=p[3]),m&5&&dt(r,p[0]),m&16&&c!==(c=`flex flex-col items-start space-y-0.5
    ${p[4]}`)&&i(e,"class",c)},i:B,o:B,d(p){p&&y(e),Le(g,p),o=!1,d()}}}function cs(n,e,a){let{label:t}=e,{choicesData:s}=e,{selected:r=void 0}=e,{disabled:l=!1}=e,{class:c=""}=e;function o(){r=La(this),a(0,r),a(2,s)}return n.$$set=d=>{"label"in d&&a(1,t=d.label),"choicesData"in d&&a(2,s=d.choicesData),"selected"in d&&a(0,r=d.selected),"disabled"in d&&a(3,l=d.disabled),"class"in d&&a(4,c=d.class)},[r,t,s,l,c,o]}class ve extends Q{constructor(e){super(),K(this,e,cs,is,X,{label:1,choicesData:2,selected:0,disabled:3,class:4})}}function Ut(n,e,a){const t=n.slice();return t[14]=e[a],t[15]=e,t[16]=a,t}function ds(n){let e;return{c(){e=j("p"),e.textContent="Selected State",i(e,"class","text-slate-300 text-xl")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function fs(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function us(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M6 18L18 6M6 6l12 12"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Wt(n){let e,a,t,s,r,l,c;function o(p){n[10](p,n[16])}let d={class:"w-16",label:"Attempts"};n[1].storage.states.data[n[0]].hints[n[16]].attempts!==void 0&&(d.value=n[1].storage.states.data[n[0]].hints[n[16]].attempts),a=new Ha({props:d}),z.push(()=>E(a,"value",o));function _(p){n[11](p,n[16])}let g={class:"grow",label:`Hint ${n[16]+1} Text`,placeholder:"Perhaps that key could be useful somewhere?"};return n[1].storage.states.data[n[0]].hints[n[16]].text!==void 0&&(g.value=n[1].storage.states.data[n[0]].hints[n[16]].text),r=new he({props:g}),z.push(()=>E(r,"value",_)),{c(){e=j("div"),x(a.$$.fragment),s=L(),x(r.$$.fragment),i(e,"class","flex flex-row space-x-6 w-full")},m(p,m){C(p,e,m),S(a,e,null),$(e,s),S(r,e,null),c=!0},p(p,m){n=p;const u={};!t&&m&3&&(t=!0,u.value=n[1].storage.states.data[n[0]].hints[n[16]].attempts,T(()=>t=!1)),a.$set(u);const b={};!l&&m&3&&(l=!0,b.value=n[1].storage.states.data[n[0]].hints[n[16]].text,T(()=>l=!1)),r.$set(b)},i(p){c||(k(a.$$.fragment,p),k(r.$$.fragment,p),c=!0)},o(p){I(a.$$.fragment,p),I(r.$$.fragment,p),c=!1},d(p){p&&y(e),M(a),M(r)}}}function gs(n){let e,a,t;function s(l){n[13](l)}let r={class:"w-1/2",label:"Ending Line",placeholder:"Good End"};return n[1].storage.states.data[n[0]].args[0]!==void 0&&(r.value=n[1].storage.states.data[n[0]].args[0]),e=new he({props:r}),z.push(()=>E(e,"value",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};!a&&c&3&&(a=!0,o.value=l[1].storage.states.data[l[0]].args[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function ps(n){let e,a,t;function s(l){n[12](l)}let r={class:"w-1/2",label:"Next State",choicesData:n[3]};return n[1].storage.states.data[n[0]].args[0]!==void 0&&(r.selected=n[1].storage.states.data[n[0]].args[0]),e=new ve({props:r}),z.push(()=>E(e,"selected",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&8&&(o.choicesData=l[3]),!a&&c&3&&(a=!0,o.selected=l[1].storage.states.data[l[0]].args[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function ms(n){let e,a,t,s,r,l,c,o,d,_,g,p,m,u,b,f,h,v,w,N,A,D,R,P,ee,fe,ge,G,pe,re,oe,je;function Oe(U){n[6](U)}let Se={class:"w-3/4",label:"Title",placeholder:"The beginning of your peril"};n[1].storage.states.data[n[0]].title!==void 0&&(Se.value=n[1].storage.states.data[n[0]].title),a=new he({props:Se}),z.push(()=>E(a,"value",Oe));function ye(U){n[7](U)}let De={class:"w-1/4",label:"State Type",choicesData:n[2]};n[1].storage.states.data[n[0]].type!==void 0&&(De.selected=n[1].storage.states.data[n[0]].type),r=new ve({props:De}),z.push(()=>E(r,"selected",ye));function Ie(U){n[8](U)}let Be={class:"w-3/5",label:"Description",placeholder:"You slowly awake within a cold, dark basement...",rows:8};n[1].storage.states.data[n[0]].description!==void 0&&(Be.value=n[1].storage.states.data[n[0]].description),d=new Ue({props:Be}),z.push(()=>E(d,"value",Ie));function He(U){n[9](U)}let We={class:"grow",label:"Development Notes",placeholder:"Goal: remove blindfold and investigate surroundings",rows:8};n[1].storage.states.data[n[0]].notes!==void 0&&(We.value=n[1].storage.states.data[n[0]].notes),p=new Ue({props:We}),z.push(()=>E(p,"value",He)),h=new ls({props:{label:"Image",imageData:n[1].storage.images[n[1].storage.states.data[n[0]].imageHash]}}),N=new J({props:{class:"mt-1",label:"Load Image",onclick:n[4],$$slots:{default:[fs]},$$scope:{ctx:n}}}),D=new J({props:{class:"mt-1",label:"Clear Image",onclick:n[5],$$slots:{default:[us]},$$scope:{ctx:n}}});let xe={length:3},me=[];for(let U=0;U<xe.length;U+=1)me[U]=Wt(Ut(n,xe,U));const ze=U=>I(me[U],1,1,()=>{me[U]=null}),et=[ps,gs],Re=[];function tt(U,ie){return U[1].storage.states.data[U[0]].type==="intermediate"?0:U[1].storage.states.data[U[0]].type==="ending"?1:-1}return~(re=tt(n))&&(oe=Re[re]=et[re](n)),{c(){e=j("div"),x(a.$$.fragment),s=L(),x(r.$$.fragment),c=L(),o=j("div"),x(d.$$.fragment),g=L(),x(p.$$.fragment),u=L(),b=j("div"),f=j("div"),x(h.$$.fragment),v=L(),w=j("div"),x(N.$$.fragment),A=L(),x(D.$$.fragment),R=L(),P=j("div"),ee=j("p"),ee.textContent="To disable hint, set number of (failed) attempts to -1",fe=L();for(let U=0;U<me.length;U+=1)me[U].c();ge=L(),G=j("div"),pe=L(),oe&&oe.c(),i(e,"class","flex flex-row space-x-6"),i(o,"class","flex flex-row space-x-6"),i(w,"class","flex flex-row space-x-2"),i(f,"class","flex flex-col space-y-2 w-1/2"),i(ee,"class","mb-2"),i(G,"class","grow"),i(P,"class","flex flex-col space-y-2 w-1/2 p-4"),i(b,"class","grow flex flex-row space-x-6")},m(U,ie){C(U,e,ie),S(a,e,null),$(e,s),S(r,e,null),C(U,c,ie),C(U,o,ie),S(d,o,null),$(o,g),S(p,o,null),C(U,u,ie),C(U,b,ie),$(b,f),S(h,f,null),$(f,v),$(f,w),S(N,w,null),$(w,A),S(D,w,null),$(b,R),$(b,P),$(P,ee),$(P,fe);for(let qe=0;qe<me.length;qe+=1)me[qe].m(P,null);$(P,ge),$(P,G),$(P,pe),~re&&Re[re].m(P,null),je=!0},p(U,ie){const qe={};!t&&ie&3&&(t=!0,qe.value=U[1].storage.states.data[U[0]].title,T(()=>t=!1)),a.$set(qe);const Ye={};ie&4&&(Ye.choicesData=U[2]),!l&&ie&3&&(l=!0,Ye.selected=U[1].storage.states.data[U[0]].type,T(()=>l=!1)),r.$set(Ye);const q={};!_&&ie&3&&(_=!0,q.value=U[1].storage.states.data[U[0]].description,T(()=>_=!1)),d.$set(q);const W={};!m&&ie&3&&(m=!0,W.value=U[1].storage.states.data[U[0]].notes,T(()=>m=!1)),p.$set(W);const V={};ie&3&&(V.imageData=U[1].storage.images[U[1].storage.states.data[U[0]].imageHash]),h.$set(V);const be={};ie&131072&&(be.$$scope={dirty:ie,ctx:U}),N.$set(be);const te={};if(ie&131072&&(te.$$scope={dirty:ie,ctx:U}),D.$set(te),ie&3){xe={length:3};let ae;for(ae=0;ae<xe.length;ae+=1){const ke=Ut(U,xe,ae);me[ae]?(me[ae].p(ke,ie),k(me[ae],1)):(me[ae]=Wt(ke),me[ae].c(),k(me[ae],1),me[ae].m(P,ge))}for(se(),ae=xe.length;ae<me.length;ae+=1)ze(ae);le()}let de=re;re=tt(U),re===de?~re&&Re[re].p(U,ie):(oe&&(se(),I(Re[de],1,1,()=>{Re[de]=null}),le()),~re?(oe=Re[re],oe?oe.p(U,ie):(oe=Re[re]=et[re](U),oe.c()),k(oe,1),oe.m(P,null)):oe=null)},i(U){if(!je){k(a.$$.fragment,U),k(r.$$.fragment,U),k(d.$$.fragment,U),k(p.$$.fragment,U),k(h.$$.fragment,U),k(N.$$.fragment,U),k(D.$$.fragment,U);for(let ie=0;ie<xe.length;ie+=1)k(me[ie]);k(oe),je=!0}},o(U){I(a.$$.fragment,U),I(r.$$.fragment,U),I(d.$$.fragment,U),I(p.$$.fragment,U),I(h.$$.fragment,U),I(N.$$.fragment,U),I(D.$$.fragment,U),me=me.filter(Boolean);for(let ie=0;ie<me.length;ie+=1)I(me[ie]);I(oe),je=!1},d(U){U&&y(e),M(a),M(r),U&&y(c),U&&y(o),M(d),M(p),U&&y(u),U&&y(b),M(h),M(N),M(D),Le(me,U),~re&&Re[re].d()}}}function bs(n){let e,a;return e=new ce({props:{class:"h-full w-full min-h-0",$$slots:{content:[ms],header:[ds]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&131087&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function hs(n,e,a){let t;ne(n,O,h=>a(1,t=h));let{selectedStateID:s}=e,r=[{key:"normal",display:"Normal",enabled:!0},{key:"opening",display:"Opening",enabled:!0},{key:"starting",display:"Starting",enabled:!0},{key:"intermediate",display:"Intermediate",enabled:!0},{key:"ending",display:"Ending",enabled:!0}],l=[];async function c(){const h=await Ba();if(h.startsWith("Cancelled")===!0)return;const v=t.storage.states.data[s].imageHash;delete t.storage.images[v];const w=await ft(h);F(O,t.storage.images[w]=h,t),F(O,t.storage.states.data[s].imageHash=w,t),O.set(t)}async function o(){const h=t.storage.states.data[s].imageHash;delete t.storage.images[h],F(O,t.storage.states.data[s].imageHash="",t),O.set(t)}function d(h){n.$$.not_equal(t.storage.states.data[s].title,h)&&(t.storage.states.data[s].title=h,O.set(t))}function _(h){n.$$.not_equal(t.storage.states.data[s].type,h)&&(t.storage.states.data[s].type=h,O.set(t))}function g(h){n.$$.not_equal(t.storage.states.data[s].description,h)&&(t.storage.states.data[s].description=h,O.set(t))}function p(h){n.$$.not_equal(t.storage.states.data[s].notes,h)&&(t.storage.states.data[s].notes=h,O.set(t))}function m(h,v){n.$$.not_equal(t.storage.states.data[s].hints[v].attempts,h)&&(t.storage.states.data[s].hints[v].attempts=h,O.set(t))}function u(h,v){n.$$.not_equal(t.storage.states.data[s].hints[v].text,h)&&(t.storage.states.data[s].hints[v].text=h,O.set(t))}function b(h){n.$$.not_equal(t.storage.states.data[s].args[0],h)&&(t.storage.states.data[s].args[0]=h,O.set(t))}function f(h){n.$$.not_equal(t.storage.states.data[s].args[0],h)&&(t.storage.states.data[s].args[0]=h,O.set(t))}return n.$$set=h=>{"selectedStateID"in h&&a(0,s=h.selectedStateID)},n.$$.update=()=>{n.$$.dirty&3&&(t.storage.states,a(2,r[1].enabled=Object.values(t.storage.states.data).findIndex(h=>h.type==="opening")===-1||t.storage.states.data[s].type==="opening",r),a(2,r[2].enabled=Object.values(t.storage.states.data).findIndex(h=>h.type==="starting")===-1||t.storage.states.data[s].type==="starting",r)),n.$$.dirty&2&&(t.storage.states,a(3,l=t.storage.states.ordering.map(h=>t.storage.states.data[h]).map(h=>({key:h.id,display:h.title,enabled:!0}))))},[s,t,r,l,c,o,d,_,g,p,m,u,b,f]}class _s extends Q{constructor(e){super(),K(this,e,hs,bs,X,{selectedStateID:0})}}function ws(n){let e,a,t,s=n[1].type==="opening"?"O":n[1].type==="starting"?"S":n[1].type==="ending"?"E":n[1].type==="intermediate"?"I":"",r,l,c,o=n[1].title+"",d,_,g,p,m,u,b,f;return{c(){e=j("div"),a=j("div"),t=j("p"),r=Y(s),l=L(),c=j("p"),d=Y(o),_=L(),g=j("p"),p=Y(n[0]),i(t,"class","font-mono font-bold text-l w-4"),i(c,"class","text-left w-11/12 min-w-0 truncate"),i(a,"class","grow flex flex-row items-center space-x-3 basis-0 shrink min-w-0"),i(g,"class",m=`font-mono ${n[2]===!0?"text-slate-500":"text-slate-600"}`),i(e,"class",u=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${n[3]} ${n[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)},m(h,v){C(h,e,v),$(e,a),$(a,t),$(t,r),$(a,l),$(a,c),$(c,d),$(e,_),$(e,g),$(g,p),b||(f=ue(e,"click",n[4]),b=!0)},p(h,[v]){v&2&&s!==(s=h[1].type==="opening"?"O":h[1].type==="starting"?"S":h[1].type==="ending"?"E":h[1].type==="intermediate"?"I":"")&&Z(r,s),v&2&&o!==(o=h[1].title+"")&&Z(d,o),v&1&&Z(p,h[0]),v&4&&m!==(m=`font-mono ${h[2]===!0?"text-slate-500":"text-slate-600"}`)&&i(g,"class",m),v&12&&u!==(u=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${h[3]} ${h[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)&&i(e,"class",u)},i:B,o:B,d(h){h&&y(e),b=!1,f()}}}function $s(n,e,a){let{key:t}=e,{stateData:s}=e,{selected:r}=e,{class:l}=e;const c=Me();function o(){c("dispatchClick",{key:t})}return n.$$set=d=>{"key"in d&&a(0,t=d.key),"stateData"in d&&a(1,s=d.stateData),"selected"in d&&a(2,r=d.selected),"class"in d&&a(3,l=d.class)},[t,s,r,l,o]}class vs extends Q{constructor(e){super(),K(this,e,$s,ws,X,{key:0,stateData:1,selected:2,class:3})}}function ks(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M12 4v16m8-8H4"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Ds(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Is(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function js(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M5 15l7-7 7 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function ys(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 9l-7 7-7-7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Cs(n){let e,a,t,s,r,l,c,o,d,_,g,p,m,u,b;return r=new J({props:{onclick:n[2],$$slots:{default:[ks]},$$scope:{ctx:n}}}),c=new J({props:{onclick:n[3],$$slots:{default:[Ds]},$$scope:{ctx:n}}}),d=new J({props:{onclick:n[4],$$slots:{default:[Is]},$$scope:{ctx:n}}}),p=new J({props:{onclick:n[5],$$slots:{default:[js]},$$scope:{ctx:n}}}),u=new J({props:{onclick:n[6],$$slots:{default:[ys]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Game States",a=L(),t=j("div"),s=j("div"),x(r.$$.fragment),l=L(),x(c.$$.fragment),o=L(),x(d.$$.fragment),_=L(),g=j("div"),x(p.$$.fragment),m=L(),x(u.$$.fragment),i(e,"class","text-slate-300 text-xl align-middle"),i(s,"class","flex flex-row space-x-1"),i(g,"class","flex flex-row space-x-1"),i(t,"class","flex flex-row space-x-4")},m(f,h){C(f,e,h),C(f,a,h),C(f,t,h),$(t,s),S(r,s,null),$(s,l),S(c,s,null),$(s,o),S(d,s,null),$(t,_),$(t,g),S(p,g,null),$(g,m),S(u,g,null),b=!0},p(f,h){const v={};h&1024&&(v.$$scope={dirty:h,ctx:f}),r.$set(v);const w={};h&1024&&(w.$$scope={dirty:h,ctx:f}),c.$set(w);const N={};h&1024&&(N.$$scope={dirty:h,ctx:f}),d.$set(N);const A={};h&1024&&(A.$$scope={dirty:h,ctx:f}),p.$set(A);const D={};h&1024&&(D.$$scope={dirty:h,ctx:f}),u.$set(D)},i(f){b||(k(r.$$.fragment,f),k(c.$$.fragment,f),k(d.$$.fragment,f),k(p.$$.fragment,f),k(u.$$.fragment,f),b=!0)},o(f){I(r.$$.fragment,f),I(c.$$.fragment,f),I(d.$$.fragment,f),I(p.$$.fragment,f),I(u.$$.fragment,f),b=!1},d(f){f&&y(e),f&&y(a),f&&y(t),M(r),M(c),M(d),M(p),M(u)}}}function Ss(n){let e,a,t;function s(l){n[8](l)}let r={deselectable:!0,scrollingRadioData:n[1]};return n[0]!==void 0&&(r.selectedID=n[0]),e=new Ae({props:r}),z.push(()=>E(e,"selectedID",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&2&&(o.scrollingRadioData=l[1]),!a&&c&1&&(a=!0,o.selectedID=l[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Ms(n){let e,a;return e=new ce({props:{class:`grow shrink space-y-2 \r
    w-full min-h-0`,contentClass:`scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden\r
        pr-4 mr-1`,$$slots:{content:[Ss],header:[Cs]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&1027&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function xs(n,e,a){let t;ne(n,O,m=>a(7,t=m));let{selectedStateID:s}=e,r;function l(){return t.storage.states.ordering.filter(m=>m!==void 0).map(m=>{const u=t.storage.states.data[m];return{key:u.id,component:vs,props:{stateData:u}}})}function c(){const m=we($e);F(O,t.storage.states.data[m]={id:m,title:"",description:"",notes:"",imageHash:"",type:"normal",args:[],hints:[{attempts:-1,text:""},{attempts:-1,text:""},{attempts:-1,text:""},{attempts:-1,text:""},{attempts:-1,text:""}],interactions:{data:{},ordering:[]},locations:{data:{},ordering:[]}},t),t.storage.states.ordering.push(m),O.set(t)}function o(){if(s!==void 0){const m=t.storage.states.ordering.indexOf(s),u=t.storage.states.data[s],b=JSON.parse(JSON.stringify(u)),f=we($e);b.id=f,F(O,t.storage.states.data[f]=b,t),t.storage.states.ordering.splice(m+1,0,f),O.set(t),a(0,s=f)}}function d(){var m,u;if(s!==void 0){const b=s;a(0,s=void 0);const f=t.storage.states.ordering,h=f.findIndex(v=>v===b);for(let v=h;v<f.length-1;v++)f[v]=(m=f[v+1])!=null?m:void 0;f.pop(),a(0,s=(u=f[h])!=null?u:f[h-1]),delete t.storage.states.data[b],O.set(t)}}function _(){if(s!==void 0&&t.storage.states.ordering.length>1){const m=t.storage.states.ordering,u=m.findIndex(f=>f===s);if(u<=0)return;const b=m[u];m[u]=m[u-1],m[u-1]=b,O.set(t)}}function g(){if(s!==void 0&&t.storage.states.ordering.length>1){const m=t.storage.states.ordering,u=m.findIndex(f=>f===s);if(u===-1||u===t.storage.states.ordering.length-1)return;const b=m[u];m[u]=m[u+1],m[u+1]=b,O.set(t)}}function p(m){s=m,a(0,s)}return n.$$set=m=>{"selectedStateID"in m&&a(0,s=m.selectedStateID)},n.$$.update=()=>{n.$$.dirty&128&&(t.storage.states,a(1,r=l()))},[s,r,c,o,d,_,g,t,p]}class Ls extends Q{constructor(e){super(),K(this,e,xs,Ms,X,{selectedStateID:0})}}function Os(n){let e;return{c(){e=j("p"),e.textContent="Tip: Copy states (instead of creating new ones) to preserve interactions and minimap data for less hassle!"},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function Pt(n){let e,a;return e=new _s({props:{selectedStateID:n[0]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&1&&(r.selectedStateID=t[0]),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Rs(n){let e,a,t,s,r,l,c,o,d;t=new ce({props:{$$slots:{content:[Os]},$$scope:{ctx:n}}});function _(m){n[1](m)}let g={};n[0]!==void 0&&(g.selectedStateID=n[0]),r=new Ls({props:g}),z.push(()=>E(r,"selectedStateID",_));let p=n[0]!==void 0&&n[0]!==""&&Pt(n);return{c(){e=j("div"),a=j("div"),x(t.$$.fragment),s=L(),x(r.$$.fragment),c=L(),o=j("div"),p&&p.c(),i(a,"class","flex flex-col space-y-4 h-full"),_e(a,"width","30%"),i(o,"class","flex flex-col space-y-4 h-full"),_e(o,"width","calc(70% - 1em)"),i(e,"class","flex flex-row space-x-4 h-full w-full")},m(m,u){C(m,e,u),$(e,a),S(t,a,null),$(a,s),S(r,a,null),$(e,c),$(e,o),p&&p.m(o,null),d=!0},p(m,[u]){const b={};u&8&&(b.$$scope={dirty:u,ctx:m}),t.$set(b);const f={};!l&&u&1&&(l=!0,f.selectedStateID=m[0],T(()=>l=!1)),r.$set(f),m[0]!==void 0&&m[0]!==""?p?(p.p(m,u),u&1&&k(p,1)):(p=Pt(m),p.c(),k(p,1),p.m(o,null)):p&&(se(),I(p,1,1,()=>{p=null}),le())},i(m){d||(k(t.$$.fragment,m),k(r.$$.fragment,m),k(p),d=!0)},o(m){I(t.$$.fragment,m),I(r.$$.fragment,m),I(p),d=!1},d(m){m&&y(e),M(t),M(r),p&&p.d()}}}function Ns(n,e,a){let t;ne(n,Ze,r=>a(0,t=r));function s(r){t=r,Ze.set(t)}return[t,s]}class As extends Q{constructor(e){super(),K(this,e,Ns,Rs,X,{})}}function Ft(n){let e,a,t,s,r,l,c,o,d,_,g,p,m=(n[5]!==""||n[6]!=="")&&Vt();return{c(){e=j("p"),a=Y(n[4]),t=L(),m&&m.c(),s=L(),r=j("div"),l=j("p"),c=Y(n[5]),o=L(),d=j("p"),_=Y(n[6]),g=L(),p=j("div"),i(e,"class","w-12 text-left"),i(l,"class","w-full text-left truncate h-5"),i(d,"class","w-full text-left truncate h-5"),i(r,"class","grow flex flex-col items-start"),_e(r,"width","0px"),_e(r,"min-width","75%"),i(p,"class","grow")},m(u,b){C(u,e,b),$(e,a),C(u,t,b),m&&m.m(u,b),C(u,s,b),C(u,r,b),$(r,l),$(l,c),$(r,o),$(r,d),$(d,_),C(u,g,b),C(u,p,b)},p(u,b){b&16&&Z(a,u[4]),u[5]!==""||u[6]!==""?m||(m=Vt(),m.c(),m.m(s.parentNode,s)):m&&(m.d(1),m=null),b&32&&Z(c,u[5]),b&64&&Z(_,u[6])},d(u){u&&y(e),u&&y(t),m&&m.d(u),u&&y(s),u&&y(r),u&&y(g),u&&y(p)}}}function Vt(n){let e;return{c(){e=j("p"),e.textContent="|"},m(a,t){C(a,e,t)},d(a){a&&y(e)}}}function Bs(n){let e,a,t=n[1].devName+"",s,r,l,c,o,d,_,g,p,m,u,b,f,h,v=n[4]!==""&&Ft(n);return{c(){e=j("div"),a=j("p"),s=Y(t),r=L(),l=j("div"),c=j("div"),o=j("div"),v&&v.c(),_=L(),g=j("div"),p=j("p"),m=Y(n[0]),i(a,"class","w-full inline-block h-6 text-left truncate"),i(o,"class",d=`w-full flex flex-row space-x-4 text-sm h-10 items-center ${n[2]===!0?"text-slate-400":"text-slate-500"}`),i(c,"class","grow flex flex-col items-start w-full"),i(p,"class",u=`text-center font-mono ${n[2]===!0?"text-slate-500":"text-slate-600"}`),i(g,"class","flex flex-row items-center h-full"),i(l,"class","flex flex-row w-full space-x-1"),i(e,"class",b=`flex flex-col space-y-1
    rounded border
    p-2 pl-4 pr-4
    ${n[3]} ${n[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`),_e(e,"width","0px"),_e(e,"min-width","100%")},m(w,N){C(w,e,N),$(e,a),$(a,s),$(e,r),$(e,l),$(l,c),$(c,o),v&&v.m(o,null),$(l,_),$(l,g),$(g,p),$(p,m),f||(h=ue(e,"click",n[7]),f=!0)},p(w,[N]){N&2&&t!==(t=w[1].devName+"")&&Z(s,t),w[4]!==""?v?v.p(w,N):(v=Ft(w),v.c(),v.m(o,null)):v&&(v.d(1),v=null),N&4&&d!==(d=`w-full flex flex-row space-x-4 text-sm h-10 items-center ${w[2]===!0?"text-slate-400":"text-slate-500"}`)&&i(o,"class",d),N&1&&Z(m,w[0]),N&4&&u!==(u=`text-center font-mono ${w[2]===!0?"text-slate-500":"text-slate-600"}`)&&i(p,"class",u),N&12&&b!==(b=`flex flex-col space-y-1
    rounded border
    p-2 pl-4 pr-4
    ${w[3]} ${w[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)&&i(e,"class",b)},i:B,o:B,d(w){w&&y(e),v&&v.d(),f=!1,h()}}}function Hs(n,e,a){let t,s;ne(n,O,u=>a(8,t=u)),ne(n,Ze,u=>a(9,s=u));let{key:r}=e,{interactionData:l}=e,{selected:c}=e,{class:o}=e;const d=Me();function _(){d("dispatchClick",{key:r})}let g="",p="",m="";return n.$$set=u=>{"key"in u&&a(0,r=u.key),"interactionData"in u&&a(1,l=u.interactionData),"selected"in u&&a(2,c=u.selected),"class"in u&&a(3,o=u.class)},n.$$.update=()=>{if(n.$$.dirty&770){t.data.actions,t.storage.states.data[s].interactions;const u=t.data.actions.data[l.action];a(4,g=u!==void 0?u.name:"")}n.$$.dirty&770&&(t.data.restraintLocations,t.storage.restraints,t.storage.objects,t.storage.states.data[s].interactions,a(5,p=""),t.data.restraintLocations.data[l.components[0]]!==void 0?a(5,p=`(L) ${t.data.restraintLocations.data[l.components[0]].name}`):t.storage.restraints.data[l.components[0]]!==void 0?a(5,p=`(R) ${t.storage.restraints.data[l.components[0]].devName}`):t.storage.objects.data[l.components[0]]!==void 0&&a(5,p=`(O) ${t.storage.objects.data[l.components[0]].devName}`)),n.$$.dirty&770&&(t.data.restraintLocations,t.storage.restraints,t.storage.objects,t.storage.states.data[s].interactions,a(6,m=""),t.data.restraintLocations.data[l.components[1]]!==void 0?a(6,m=`(L) ${t.data.restraintLocations.data[l.components[1]].name}`):t.storage.restraints.data[l.components[1]]!==void 0?a(6,m=`(R) ${t.storage.restraints.data[l.components[1]].devName}`):t.storage.objects.data[l.components[1]]!==void 0&&a(6,m=`(O) ${t.storage.objects.data[l.components[1]].devName}`))},[r,l,c,o,g,p,m,_,t,s]}class qs extends Q{constructor(e){super(),K(this,e,Hs,Bs,X,{key:0,interactionData:1,selected:2,class:3})}}function zs(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M12 4v16m8-8H4"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Ts(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Es(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Us(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M5 15l7-7 7 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Ws(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 9l-7 7-7-7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Ps(n){let e,a,t,s,r,l,c,o,d,_,g,p,m,u,b;return r=new J({props:{onclick:n[3],$$slots:{default:[zs]},$$scope:{ctx:n}}}),c=new J({props:{onclick:n[4],$$slots:{default:[Ts]},$$scope:{ctx:n}}}),d=new J({props:{onclick:n[5],$$slots:{default:[Es]},$$scope:{ctx:n}}}),p=new J({props:{onclick:n[6],$$slots:{default:[Us]},$$scope:{ctx:n}}}),u=new J({props:{onclick:n[7],$$slots:{default:[Ws]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Game Interactions",a=L(),t=j("div"),s=j("div"),x(r.$$.fragment),l=L(),x(c.$$.fragment),o=L(),x(d.$$.fragment),_=L(),g=j("div"),x(p.$$.fragment),m=L(),x(u.$$.fragment),i(e,"class","text-slate-300 text-xl align-middle"),i(s,"class","flex flex-row space-x-1"),i(g,"class","flex flex-row space-x-1"),i(t,"class","flex flex-row space-x-4")},m(f,h){C(f,e,h),C(f,a,h),C(f,t,h),$(t,s),S(r,s,null),$(s,l),S(c,s,null),$(s,o),S(d,s,null),$(t,_),$(t,g),S(p,g,null),$(g,m),S(u,g,null),b=!0},p(f,h){const v={};h&4096&&(v.$$scope={dirty:h,ctx:f}),r.$set(v);const w={};h&4096&&(w.$$scope={dirty:h,ctx:f}),c.$set(w);const N={};h&4096&&(N.$$scope={dirty:h,ctx:f}),d.$set(N);const A={};h&4096&&(A.$$scope={dirty:h,ctx:f}),p.$set(A);const D={};h&4096&&(D.$$scope={dirty:h,ctx:f}),u.$set(D)},i(f){b||(k(r.$$.fragment,f),k(c.$$.fragment,f),k(d.$$.fragment,f),k(p.$$.fragment,f),k(u.$$.fragment,f),b=!0)},o(f){I(r.$$.fragment,f),I(c.$$.fragment,f),I(d.$$.fragment,f),I(p.$$.fragment,f),I(u.$$.fragment,f),b=!1},d(f){f&&y(e),f&&y(a),f&&y(t),M(r),M(c),M(d),M(p),M(u)}}}function Fs(n){let e,a,t;function s(l){n[10](l)}let r={deselectable:!0,scrollingRadioData:n[2]};return n[0]!==void 0&&(r.selectedID=n[0]),e=new Ae({props:r}),z.push(()=>E(e,"selectedID",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&4&&(o.scrollingRadioData=l[2]),!a&&c&1&&(a=!0,o.selectedID=l[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Vs(n){let e,a;return e=new ce({props:{class:`shrink
    w-full h-3/5 min-h-0
    ${n[1]}`,contentClass:`scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden\r
        pr-4 mr-1`,$$slots:{content:[Fs],header:[Ps]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&2&&(r.class=`shrink
    w-full h-3/5 min-h-0
    ${t[1]}`),s&4101&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Js(n,e,a){let t;ne(n,O,b=>a(9,t=b));let{selectedStateID:s}=e,{selectedInteractionID:r}=e,{class:l=""}=e,c;function o(){return t.storage.states.data[s].interactions.ordering.filter(b=>b!==void 0).map(b=>{const f=t.storage.states.data[s].interactions.data[b];return{key:f.id,component:qs,props:{interactionData:f}}})}function d(){const b=we($e);F(O,t.storage.states.data[s].interactions.data[b]={id:b,devName:"",action:"",components:["",""],criteria:{data:{},ordering:[]},results:{data:{},ordering:[]}},t),t.storage.states.data[s].interactions.ordering.push(b),O.set(t)}function _(){if(r!==void 0){const b=t.storage.states.data[s].interactions.ordering.indexOf(r),f=t.storage.states.data[s].interactions.data[r],h=JSON.parse(JSON.stringify(f)),v=we($e);h.id=v,F(O,t.storage.states.data[s].interactions.data[v]=h,t),t.storage.states.data[s].interactions.ordering.splice(b+1,0,v),O.set(t),a(0,r=v)}}function g(){var b,f;if(r!==void 0){const h=r;a(0,r=void 0);const v=t.storage.states.data[s].interactions.ordering,w=v.findIndex(N=>N===h);for(let N=w;N<v.length-1;N++)v[N]=(b=v[N+1])!=null?b:void 0;v.pop(),a(0,r=(f=v[w])!=null?f:v[w-1]),delete t.storage.states.data[s].interactions.data[h],O.set(t)}}function p(){if(r!==void 0&&t.storage.states.data[s].interactions.ordering.length>1){const b=t.storage.states.data[s].interactions.ordering,f=b.findIndex(v=>v===r);if(f<=0)return;const h=b[f];b[f]=b[f-1],b[f-1]=h,O.set(t)}}function m(){if(r!==void 0&&t.storage.states.data[s].interactions.ordering.length>1){const b=t.storage.states.data[s].interactions.ordering,f=b.findIndex(v=>v===r);if(f===-1||f===t.storage.states.data[s].interactions.ordering.length-1)return;const h=b[f];b[f]=b[f+1],b[f+1]=h,O.set(t)}}function u(b){r=b,a(0,r)}return n.$$set=b=>{"selectedStateID"in b&&a(8,s=b.selectedStateID),"selectedInteractionID"in b&&a(0,r=b.selectedInteractionID),"class"in b&&a(1,l=b.class)},n.$$.update=()=>{n.$$.dirty&768&&t.storage.states.data[s]!==void 0&&(t.storage.states.data[s].interactions,a(2,c=o()))},[r,l,c,d,_,g,p,m,s,t,u]}class Ys extends Q{constructor(e){super(),K(this,e,Js,Vs,X,{selectedStateID:8,selectedInteractionID:0,class:1})}}function Gs(n){let e;return{c(){e=j("p"),e.textContent="Selected Interaction",i(e,"class","text-slate-300 text-xl")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function Xs(n){let e,a,t,s,r,l,c,o,d,_,g,p,m;function u(D){n[7](D)}let b={label:"Development Name",placeholder:"Removing wrist restraints with knife"};n[3].storage.states.data[n[0]].interactions.data[n[1]].devName!==void 0&&(b.value=n[3].storage.states.data[n[0]].interactions.data[n[1]].devName),e=new he({props:b}),z.push(()=>E(e,"value",u));function f(D){n[8](D)}let h={class:"w-1/3",label:"Targeted Action",disabled:n[6]===!0,choicesData:n[4]};n[3].storage.states.data[n[0]].interactions.data[n[1]].action!==void 0&&(h.selected=n[3].storage.states.data[n[0]].interactions.data[n[1]].action),s=new ve({props:h}),z.push(()=>E(s,"selected",f));function v(D){n[9](D)}let w={class:"w-1/2 truncate",label:"Component #1",disabled:n[6]===!0,choicesData:n[5]};n[3].storage.states.data[n[0]].interactions.data[n[1]].components[0]!==void 0&&(w.selected=n[3].storage.states.data[n[0]].interactions.data[n[1]].components[0]),o=new ve({props:w}),z.push(()=>E(o,"selected",v));function N(D){n[10](D)}let A={class:"grow truncate",label:"Component #2",disabled:n[6]===!0||n[2]===!1,choicesData:n[5]};return n[3].storage.states.data[n[0]].interactions.data[n[1]].components[1]!==void 0&&(A.selected=n[3].storage.states.data[n[0]].interactions.data[n[1]].components[1]),g=new ve({props:A}),z.push(()=>E(g,"selected",N)),{c(){x(e.$$.fragment),t=L(),x(s.$$.fragment),l=L(),c=j("div"),x(o.$$.fragment),_=L(),x(g.$$.fragment),i(c,"class","flex flex-row space-x-6")},m(D,R){S(e,D,R),C(D,t,R),S(s,D,R),C(D,l,R),C(D,c,R),S(o,c,null),$(c,_),S(g,c,null),m=!0},p(D,R){const P={};!a&&R&11&&(a=!0,P.value=D[3].storage.states.data[D[0]].interactions.data[D[1]].devName,T(()=>a=!1)),e.$set(P);const ee={};R&64&&(ee.disabled=D[6]===!0),R&16&&(ee.choicesData=D[4]),!r&&R&11&&(r=!0,ee.selected=D[3].storage.states.data[D[0]].interactions.data[D[1]].action,T(()=>r=!1)),s.$set(ee);const fe={};R&64&&(fe.disabled=D[6]===!0),R&32&&(fe.choicesData=D[5]),!d&&R&11&&(d=!0,fe.selected=D[3].storage.states.data[D[0]].interactions.data[D[1]].components[0],T(()=>d=!1)),o.$set(fe);const ge={};R&68&&(ge.disabled=D[6]===!0||D[2]===!1),R&32&&(ge.choicesData=D[5]),!p&&R&11&&(p=!0,ge.selected=D[3].storage.states.data[D[0]].interactions.data[D[1]].components[1],T(()=>p=!1)),g.$set(ge)},i(D){m||(k(e.$$.fragment,D),k(s.$$.fragment,D),k(o.$$.fragment,D),k(g.$$.fragment,D),m=!0)},o(D){I(e.$$.fragment,D),I(s.$$.fragment,D),I(o.$$.fragment,D),I(g.$$.fragment,D),m=!1},d(D){M(e,D),D&&y(t),M(s,D),D&&y(l),D&&y(c),M(o),M(g)}}}function Ks(n){let e,a,t;return a=new ce({props:{class:"h-full w-full min-h-0 overflow-y-auto",$$slots:{content:[Xs],header:[Gs]},$$scope:{ctx:n}}}),{c(){e=j("div"),x(a.$$.fragment),i(e,"class","grow shrink w-full min-h-0")},m(s,r){C(s,e,r),S(a,e,null),t=!0},p(s,[r]){const l={};r&2175&&(l.$$scope={dirty:r,ctx:s}),a.$set(l)},i(s){t||(k(a.$$.fragment,s),t=!0)},o(s){I(a.$$.fragment,s),t=!1},d(s){s&&y(e),M(a)}}}function Qs(n,e,a){let t;ne(n,O,u=>a(3,t=u));let{selectedStateID:s}=e,{selectedInteractionID:r}=e,l=[],c=[],o=!1,d;function _(u){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].devName,u)&&(t.storage.states.data[s].interactions.data[r].devName=u,O.set(t))}function g(u){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].action,u)&&(t.storage.states.data[s].interactions.data[r].action=u,O.set(t))}function p(u){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].components[0],u)&&(t.storage.states.data[s].interactions.data[r].components[0]=u,O.set(t))}function m(u){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].components[1],u)&&(t.storage.states.data[s].interactions.data[r].components[1]=u,O.set(t))}return n.$$set=u=>{"selectedStateID"in u&&a(0,s=u.selectedStateID),"selectedInteractionID"in u&&a(1,r=u.selectedInteractionID)},n.$$.update=()=>{if(n.$$.dirty&15&&t.storage.states.data[s].interactions.data[r]!==void 0){t.storage.states.data[s].interactions.data[r].action;const u=t.data.actions.data[t.storage.states.data[s].interactions.data[r].action];u!==void 0&&(a(2,o=u.two),o||F(O,t.storage.states.data[s].interactions.data[r].components[1]="",t))}if(n.$$.dirty&11&&(a(6,d=!1),t.storage.states.data[s].interactions.data[r]!==void 0)){for(const u of t.storage.states.data[s].interactions.data[r].criteria.ordering)if(t.storage.states.data[s].interactions.data[r].criteria.data[u].type==="exceededAttempts"){F(O,t.storage.states.data[s].interactions.data[r].action="",t),F(O,t.storage.states.data[s].interactions.data[r].components=["",""],t),a(6,d=!0);break}}n.$$.dirty&8&&(t.data.actions,a(4,l=t.data.actions.ordering.map(u=>{const b=t.data.actions.data[u];return{key:b.id,display:b.name,enabled:!0}}))),n.$$.dirty&8&&(t.storage.restraints,t.storage.objects,a(5,c=[{key:"",display:"",enabled:!0},...t.data.restraintLocations.ordering.map(u=>{const b=t.data.restraintLocations.data[u];return{key:b.id,display:`(L) ${b.name}`,enabled:!0}}),...t.storage.restraints.ordering.map(u=>{const b=t.storage.restraints.data[u];return{key:b.id,display:`(R) ${b.devName}`,enabled:!0}}),...t.storage.objects.ordering.map(u=>{const b=t.storage.objects.data[u];return{key:b.id,display:`(O) ${b.devName}`,enabled:!0}})]))},[s,r,o,t,l,c,d,_,g,p,m]}class Zs extends Q{constructor(e){super(),K(this,e,Qs,Ks,X,{selectedStateID:0,selectedInteractionID:1})}}function el(n){let e,a,t=n[1].devName+"",s,r,l,c,o,d,_,g,p;return{c(){e=j("div"),a=j("p"),s=Y(t),r=L(),l=j("div"),c=j("p"),o=Y(n[0]),i(a,"class","text-left w-11/12 min-w-0 truncate"),i(c,"class",d=`text-center font-mono ${n[2]===!0?"text-slate-500":"text-slate-600"}`),i(l,"class","flex flex-row items-center h-full"),i(e,"class",_=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${n[3]} ${n[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)},m(m,u){C(m,e,u),$(e,a),$(a,s),$(e,r),$(e,l),$(l,c),$(c,o),g||(p=ue(e,"click",n[4]),g=!0)},p(m,[u]){u&2&&t!==(t=m[1].devName+"")&&Z(s,t),u&1&&Z(o,m[0]),u&4&&d!==(d=`text-center font-mono ${m[2]===!0?"text-slate-500":"text-slate-600"}`)&&i(c,"class",d),u&12&&_!==(_=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${m[3]} ${m[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)&&i(e,"class",_)},i:B,o:B,d(m){m&&y(e),g=!1,p()}}}function tl(n,e,a){let{key:t}=e,{criteriaData:s}=e,{selected:r}=e,{class:l}=e;const c=Me();function o(){c("dispatchClick",{key:t})}return n.$$set=d=>{"key"in d&&a(0,t=d.key),"criteriaData"in d&&a(1,s=d.criteriaData),"selected"in d&&a(2,r=d.selected),"class"in d&&a(3,l=d.class)},[t,s,r,l,o]}class al extends Q{constructor(e){super(),K(this,e,tl,el,X,{key:0,criteriaData:1,selected:2,class:3})}}function nl(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M12 4v16m8-8H4"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function sl(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function ll(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function rl(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M5 15l7-7 7 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function ol(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 9l-7 7-7-7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function il(n){let e,a,t,s,r,l,c,o,d,_,g,p,m,u,b;return r=new J({props:{onclick:n[3],$$slots:{default:[nl]},$$scope:{ctx:n}}}),c=new J({props:{onclick:n[4],$$slots:{default:[sl]},$$scope:{ctx:n}}}),d=new J({props:{onclick:n[5],$$slots:{default:[ll]},$$scope:{ctx:n}}}),p=new J({props:{onclick:n[6],$$slots:{default:[rl]},$$scope:{ctx:n}}}),u=new J({props:{onclick:n[7],$$slots:{default:[ol]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Interaction Criteria",a=L(),t=j("div"),s=j("div"),x(r.$$.fragment),l=L(),x(c.$$.fragment),o=L(),x(d.$$.fragment),_=L(),g=j("div"),x(p.$$.fragment),m=L(),x(u.$$.fragment),i(e,"class","text-slate-300 text-xl align-middle"),i(s,"class","flex flex-row space-x-1"),i(g,"class","flex flex-row space-x-1"),i(t,"class","flex flex-row space-x-4")},m(f,h){C(f,e,h),C(f,a,h),C(f,t,h),$(t,s),S(r,s,null),$(s,l),S(c,s,null),$(s,o),S(d,s,null),$(t,_),$(t,g),S(p,g,null),$(g,m),S(u,g,null),b=!0},p(f,h){const v={};h&8192&&(v.$$scope={dirty:h,ctx:f}),r.$set(v);const w={};h&8192&&(w.$$scope={dirty:h,ctx:f}),c.$set(w);const N={};h&8192&&(N.$$scope={dirty:h,ctx:f}),d.$set(N);const A={};h&8192&&(A.$$scope={dirty:h,ctx:f}),p.$set(A);const D={};h&8192&&(D.$$scope={dirty:h,ctx:f}),u.$set(D)},i(f){b||(k(r.$$.fragment,f),k(c.$$.fragment,f),k(d.$$.fragment,f),k(p.$$.fragment,f),k(u.$$.fragment,f),b=!0)},o(f){I(r.$$.fragment,f),I(c.$$.fragment,f),I(d.$$.fragment,f),I(p.$$.fragment,f),I(u.$$.fragment,f),b=!1},d(f){f&&y(e),f&&y(a),f&&y(t),M(r),M(c),M(d),M(p),M(u)}}}function cl(n){let e,a,t;function s(l){n[11](l)}let r={deselectable:!0,scrollingRadioData:n[2]};return n[0]!==void 0&&(r.selectedID=n[0]),e=new Ae({props:r}),z.push(()=>E(e,"selectedID",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&4&&(o.scrollingRadioData=l[2]),!a&&c&1&&(a=!0,o.selectedID=l[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function dl(n){let e,a;return e=new ce({props:{class:`shrink
    w-full min-h-0
    ${n[1]}`,contentClass:`scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden\r
        pr-4 mr-1`,$$slots:{content:[cl],header:[il]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&2&&(r.class=`shrink
    w-full min-h-0
    ${t[1]}`),s&8197&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function fl(n,e,a){let t;ne(n,O,f=>a(10,t=f));let{selectedStateID:s}=e,{selectedInteractionID:r}=e,{selectedCriteriaID:l}=e,{class:c=""}=e,o;function d(){return t.storage.states.data[s].interactions.data[r].criteria.ordering.filter(f=>f!==void 0).map(f=>{const h=t.storage.states.data[s].interactions.data[r].criteria.data[f];return{key:h.id,component:al,props:{criteriaData:h}}})}function _(){const f=we($e);F(O,t.storage.states.data[s].interactions.data[r].criteria.data[f]={id:f,devName:"",type:"flagEquals",args:[]},t),t.storage.states.data[s].interactions.data[r].criteria.ordering.push(f),O.set(t)}function g(){if(l!==void 0){const f=t.storage.states.data[s].interactions.data[r].criteria.ordering.indexOf(l),h=t.storage.states.data[s].interactions.data[r].criteria.data[l],v=JSON.parse(JSON.stringify(h)),w=we($e);v.id=w,F(O,t.storage.states.data[s].interactions.data[r].criteria.data[w]=v,t),t.storage.states.data[s].interactions.data[r].criteria.ordering.splice(f+1,0,w),O.set(t),a(0,l=w)}}function p(){var f,h;if(l!==void 0){const v=l;a(0,l=void 0);const w=t.storage.states.data[s].interactions.data[r].criteria.ordering,N=w.findIndex(A=>A===v);for(let A=N;A<w.length-1;A++)w[A]=(f=w[A+1])!=null?f:void 0;w.pop(),a(0,l=(h=w[N])!=null?h:w[N-1]),delete t.storage.states.data[s].interactions.data[r].criteria.data[v],O.set(t)}}function m(){if(l!==void 0&&t.storage.states.data[s].interactions.data[r].criteria.ordering.length>1){const f=t.storage.states.data[s].interactions.data[r].criteria.ordering,h=f.findIndex(w=>w===l);if(h<=0)return;const v=f[h];f[h]=f[h-1],f[h-1]=v,O.set(t)}}function u(){if(l!==void 0&&t.storage.states.data[s].interactions.data[r].criteria.ordering.length>1){const f=t.storage.states.data[s].interactions.data[r].criteria.ordering,h=f.findIndex(w=>w===l);if(h===-1||h===t.storage.states.data[s].interactions.data[r].criteria.ordering.length-1)return;const v=f[h];f[h]=f[h-1],f[h-1]=v,O.set(t)}}function b(f){l=f,a(0,l),a(9,r)}return n.$$set=f=>{"selectedStateID"in f&&a(8,s=f.selectedStateID),"selectedInteractionID"in f&&a(9,r=f.selectedInteractionID),"selectedCriteriaID"in f&&a(0,l=f.selectedCriteriaID),"class"in f&&a(1,c=f.class)},n.$$.update=()=>{n.$$.dirty&1792&&t.storage.states.data[s].interactions.data[r]!==void 0&&(t.storage.states.data[s].interactions.data[r].criteria,a(2,o=d())),n.$$.dirty&512&&a(0,l=void 0)},[l,c,o,_,g,p,m,u,s,r,t,b]}class ul extends Q{constructor(e){super(),K(this,e,fl,dl,X,{selectedStateID:8,selectedInteractionID:9,selectedCriteriaID:0,class:1})}}function gl(n){let e,a,t=n[1].devName+"",s,r,l,c,o,d,_,g,p;return{c(){e=j("div"),a=j("p"),s=Y(t),r=L(),l=j("div"),c=j("p"),o=Y(n[0]),i(a,"class","text-left w-11/12 min-w-0 truncate"),i(c,"class",d=`text-center font-mono ${n[2]===!0?"text-slate-500":"text-slate-600"}`),i(l,"class","flex flex-row items-center h-full"),i(e,"class",_=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${n[3]} ${n[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)},m(m,u){C(m,e,u),$(e,a),$(a,s),$(e,r),$(e,l),$(l,c),$(c,o),g||(p=ue(e,"click",n[4]),g=!0)},p(m,[u]){u&2&&t!==(t=m[1].devName+"")&&Z(s,t),u&1&&Z(o,m[0]),u&4&&d!==(d=`text-center font-mono ${m[2]===!0?"text-slate-500":"text-slate-600"}`)&&i(c,"class",d),u&12&&_!==(_=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${m[3]} ${m[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)&&i(e,"class",_)},i:B,o:B,d(m){m&&y(e),g=!1,p()}}}function pl(n,e,a){let{key:t}=e,{resultData:s}=e,{selected:r}=e,{class:l}=e;const c=Me();function o(){c("dispatchClick",{key:t})}return n.$$set=d=>{"key"in d&&a(0,t=d.key),"resultData"in d&&a(1,s=d.resultData),"selected"in d&&a(2,r=d.selected),"class"in d&&a(3,l=d.class)},[t,s,r,l,o]}class ml extends Q{constructor(e){super(),K(this,e,pl,gl,X,{key:0,resultData:1,selected:2,class:3})}}function bl(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M12 4v16m8-8H4"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function hl(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function _l(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function wl(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M5 15l7-7 7 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function $l(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 9l-7 7-7-7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function vl(n){let e,a,t,s,r,l,c,o,d,_,g,p,m,u,b;return r=new J({props:{onclick:n[3],$$slots:{default:[bl]},$$scope:{ctx:n}}}),c=new J({props:{onclick:n[4],$$slots:{default:[hl]},$$scope:{ctx:n}}}),d=new J({props:{onclick:n[5],$$slots:{default:[_l]},$$scope:{ctx:n}}}),p=new J({props:{onclick:n[6],$$slots:{default:[wl]},$$scope:{ctx:n}}}),u=new J({props:{onclick:n[7],$$slots:{default:[$l]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Interaction Results",a=L(),t=j("div"),s=j("div"),x(r.$$.fragment),l=L(),x(c.$$.fragment),o=L(),x(d.$$.fragment),_=L(),g=j("div"),x(p.$$.fragment),m=L(),x(u.$$.fragment),i(e,"class","text-slate-300 text-xl align-middle"),i(s,"class","flex flex-row space-x-1"),i(g,"class","flex flex-row space-x-1"),i(t,"class","flex flex-row space-x-4")},m(f,h){C(f,e,h),C(f,a,h),C(f,t,h),$(t,s),S(r,s,null),$(s,l),S(c,s,null),$(s,o),S(d,s,null),$(t,_),$(t,g),S(p,g,null),$(g,m),S(u,g,null),b=!0},p(f,h){const v={};h&8192&&(v.$$scope={dirty:h,ctx:f}),r.$set(v);const w={};h&8192&&(w.$$scope={dirty:h,ctx:f}),c.$set(w);const N={};h&8192&&(N.$$scope={dirty:h,ctx:f}),d.$set(N);const A={};h&8192&&(A.$$scope={dirty:h,ctx:f}),p.$set(A);const D={};h&8192&&(D.$$scope={dirty:h,ctx:f}),u.$set(D)},i(f){b||(k(r.$$.fragment,f),k(c.$$.fragment,f),k(d.$$.fragment,f),k(p.$$.fragment,f),k(u.$$.fragment,f),b=!0)},o(f){I(r.$$.fragment,f),I(c.$$.fragment,f),I(d.$$.fragment,f),I(p.$$.fragment,f),I(u.$$.fragment,f),b=!1},d(f){f&&y(e),f&&y(a),f&&y(t),M(r),M(c),M(d),M(p),M(u)}}}function kl(n){let e,a,t;function s(l){n[11](l)}let r={deselectable:!0,scrollingRadioData:n[2]};return n[0]!==void 0&&(r.selectedID=n[0]),e=new Ae({props:r}),z.push(()=>E(e,"selectedID",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&4&&(o.scrollingRadioData=l[2]),!a&&c&1&&(a=!0,o.selectedID=l[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Dl(n){let e,a;return e=new ce({props:{class:`shrink
    w-full min-h-0
    ${n[1]}`,contentClass:`scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden\r
        pr-4 mr-1`,$$slots:{content:[kl],header:[vl]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&2&&(r.class=`shrink
    w-full min-h-0
    ${t[1]}`),s&8197&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Il(n,e,a){let t;ne(n,O,f=>a(10,t=f));let{selectedStateID:s}=e,{selectedInteractionID:r}=e,{selectedResultID:l}=e,{class:c=""}=e,o;function d(){return t.storage.states.data[s].interactions.data[r].results.ordering.filter(f=>f!==void 0).map(f=>{const h=t.storage.states.data[s].interactions.data[r].results.data[f];return{key:h.id,component:ml,props:{resultData:h}}})}function _(){const f=we($e);F(O,t.storage.states.data[s].interactions.data[r].results.data[f]={id:f,devName:"",type:"setFlag",args:[]},t),t.storage.states.data[s].interactions.data[r].results.ordering.push(f),O.set(t)}function g(){if(l!==void 0){const f=t.storage.states.data[s].interactions.data[r].results.ordering.indexOf(l),h=t.storage.states.data[s].interactions.data[r].results.data[l],v=JSON.parse(JSON.stringify(h)),w=we($e);v.id=w,F(O,t.storage.states.data[s].interactions.data[r].results.data[w]=v,t),t.storage.states.data[s].interactions.data[r].results.ordering.splice(f+1,0,w),O.set(t),a(0,l=w)}}function p(){var f,h;if(l!==void 0){const v=l;a(0,l=void 0);const w=t.storage.states.data[s].interactions.data[r].results.ordering,N=w.findIndex(A=>A===v);for(let A=N;A<w.length-1;A++)w[A]=(f=w[A+1])!=null?f:void 0;w.pop(),a(0,l=(h=w[N])!=null?h:w[N-1]),delete t.storage.states.data[s].interactions.data[r].results.data[v],O.set(t)}}function m(){if(l!==void 0&&t.storage.states.data[s].interactions.data[r].results.ordering.length>1){const f=t.storage.states.data[s].interactions.data[r].results.ordering,h=f.findIndex(w=>w===l);if(h<=0)return;const v=f[h];f[h]=f[h-1],f[h-1]=v,O.set(t)}}function u(){if(l!==void 0&&t.storage.states.data[s].interactions.data[r].results.ordering.length>1){const f=t.storage.states.data[s].interactions.data[r].results.ordering,h=f.findIndex(w=>w===l);if(h===-1||h===t.storage.states.data[s].interactions.data[r].results.ordering.length-1)return;const v=f[h];f[h]=f[h-1],f[h-1]=v,O.set(t)}}function b(f){l=f,a(0,l),a(9,r)}return n.$$set=f=>{"selectedStateID"in f&&a(8,s=f.selectedStateID),"selectedInteractionID"in f&&a(9,r=f.selectedInteractionID),"selectedResultID"in f&&a(0,l=f.selectedResultID),"class"in f&&a(1,c=f.class)},n.$$.update=()=>{n.$$.dirty&1792&&t.storage.states.data[s].interactions.data[r]!==void 0&&(t.storage.states.data[s].interactions.data[r].results,a(2,o=d())),n.$$.dirty&512&&a(0,l=void 0)},[l,c,o,_,g,p,m,u,s,r,t,b]}class jl extends Q{constructor(e){super(),K(this,e,Il,Dl,X,{selectedStateID:8,selectedInteractionID:9,selectedResultID:0,class:1})}}function yl(n){let e;return{c(){e=j("p"),e.textContent="Selected Criteria",i(e,"class","text-slate-300 text-xl")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function Cl(n){let e,a,t;function s(l){n[15](l)}let r={class:"w-1/5",label:"Attempts"};return n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].args[0]!==void 0&&(r.value=n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].args[0]),e=new Ha({props:r}),z.push(()=>E(e,"value",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};!a&&c&23&&(a=!0,o.value=l[4].storage.states.data[l[0]].interactions.data[l[1]].criteria.data[l[2]].args[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Sl(n){let e,a,t;function s(l){n[14](l)}let r={class:"w-1/2",label:"Object",disabled:!1,choicesData:n[6]};return n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].args[0]!==void 0&&(r.selected=n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].args[0]),e=new ve({props:r}),z.push(()=>E(e,"selected",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&64&&(o.choicesData=l[6]),!a&&c&23&&(a=!0,o.selected=l[4].storage.states.data[l[0]].interactions.data[l[1]].criteria.data[l[2]].args[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Ml(n){let e,a,t;function s(l){n[13](l)}let r={class:"w-1/2",label:"Restraint",disabled:!1,choicesData:n[5]};return n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].args[0]!==void 0&&(r.selected=n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].args[0]),e=new ve({props:r}),z.push(()=>E(e,"selected",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&32&&(o.choicesData=l[5]),!a&&c&23&&(a=!0,o.selected=l[4].storage.states.data[l[0]].interactions.data[l[1]].criteria.data[l[2]].args[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function xl(n){let e,a,t,s,r,l;function c(g){n[11](g)}let o={class:"w-1/2",label:"Flag Name",placeholder:"pushedButton"};n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].args[0]!==void 0&&(o.value=n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].args[0]),e=new he({props:o}),z.push(()=>E(e,"value",c));function d(g){n[12](g)}let _={class:"w-1/2",label:"Flag Value",placeholder:"true"};return n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].args[1]!==void 0&&(_.value=n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].args[1]),s=new he({props:_}),z.push(()=>E(s,"value",d)),{c(){x(e.$$.fragment),t=L(),x(s.$$.fragment)},m(g,p){S(e,g,p),C(g,t,p),S(s,g,p),l=!0},p(g,p){const m={};!a&&p&23&&(a=!0,m.value=g[4].storage.states.data[g[0]].interactions.data[g[1]].criteria.data[g[2]].args[0],T(()=>a=!1)),e.$set(m);const u={};!r&&p&23&&(r=!0,u.value=g[4].storage.states.data[g[0]].interactions.data[g[1]].criteria.data[g[2]].args[1],T(()=>r=!1)),s.$set(u)},i(g){l||(k(e.$$.fragment,g),k(s.$$.fragment,g),l=!0)},o(g){I(e.$$.fragment,g),I(s.$$.fragment,g),l=!1},d(g){M(e,g),g&&y(t),M(s,g)}}}function Ll(n){let e,a,t,s,r,l,c,o,d,_,g;function p(w){n[9](w)}let m={class:"w-full",label:"Development Name",placeholder:"Pushed Button"};n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].devName!==void 0&&(m.value=n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].devName),a=new he({props:m}),z.push(()=>E(a,"value",p));function u(w){n[10](w)}let b={class:"w-1/2",label:"Criteria Type",disabled:!1,choicesData:n[7]};n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].type!==void 0&&(b.selected=n[4].storage.states.data[n[0]].interactions.data[n[1]].criteria.data[n[2]].type),r=new ve({props:b}),z.push(()=>E(r,"selected",u));const f=[xl,Ml,Sl,Cl],h=[];function v(w,N){return w[3]==="flagEquals"||w[3]==="flagNotEquals"?0:w[3]==="restraintWearing"||w[3]==="restraintNotWearing"?1:w[3]==="objectFound"||w[3]==="objectNotFound"?2:w[3]==="exceededAttempts"?3:-1}return~(o=v(n))&&(d=h[o]=f[o](n)),{c(){e=j("div"),x(a.$$.fragment),s=L(),x(r.$$.fragment),c=L(),d&&d.c(),_=Ce(),i(e,"class","mb-4 space-y-2")},m(w,N){C(w,e,N),S(a,e,null),$(e,s),S(r,e,null),C(w,c,N),~o&&h[o].m(w,N),C(w,_,N),g=!0},p(w,N){const A={};!t&&N&23&&(t=!0,A.value=w[4].storage.states.data[w[0]].interactions.data[w[1]].criteria.data[w[2]].devName,T(()=>t=!1)),a.$set(A);const D={};!l&&N&23&&(l=!0,D.selected=w[4].storage.states.data[w[0]].interactions.data[w[1]].criteria.data[w[2]].type,T(()=>l=!1)),r.$set(D);let R=o;o=v(w),o===R?~o&&h[o].p(w,N):(d&&(se(),I(h[R],1,1,()=>{h[R]=null}),le()),~o?(d=h[o],d?d.p(w,N):(d=h[o]=f[o](w),d.c()),k(d,1),d.m(_.parentNode,_)):d=null)},i(w){g||(k(a.$$.fragment,w),k(r.$$.fragment,w),k(d),g=!0)},o(w){I(a.$$.fragment,w),I(r.$$.fragment,w),I(d),g=!1},d(w){w&&y(e),M(a),M(r),w&&y(c),~o&&h[o].d(w),w&&y(_)}}}function Ol(n){let e,a,t;return a=new ce({props:{class:"h-full w-full min-h-0 overlfow-y-auto",$$slots:{content:[Ll],header:[yl]},$$scope:{ctx:n}}}),{c(){e=j("div"),x(a.$$.fragment),i(e,"class","grow shrink w-full min-h-0")},m(s,r){C(s,e,r),S(a,e,null),t=!0},p(s,[r]){const l={};r&65663&&(l.$$scope={dirty:r,ctx:s}),a.$set(l)},i(s){t||(k(a.$$.fragment,s),t=!0)},o(s){I(a.$$.fragment,s),t=!1},d(s){s&&y(e),M(a)}}}function Rl(n,e,a){let t;ne(n,O,w=>a(4,t=w));let{selectedStateID:s}=e,{selectedInteractionID:r}=e,{selectedCriteriaID:l}=e,c=[{key:"flagEquals",display:"Flag equals",enabled:!0},{key:"flagNotEquals",display:"Flag doesn't equal",enabled:!0},{key:"restraintWearing",display:"Wearing restraint",enabled:!0},{key:"restraintNotWearing",display:"Not wearing restraint",enabled:!0},{key:"objectFound",display:"Object found",enabled:!0},{key:"objectNotFound",display:"Object not found",enabled:!0},{key:"exceededAttempts",display:"Exceeded attempts",enabled:!0}],o=[],d=[],_,g;function p(w){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].criteria.data[l].devName,w)&&(t.storage.states.data[s].interactions.data[r].criteria.data[l].devName=w,O.set(t))}function m(w){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].criteria.data[l].type,w)&&(t.storage.states.data[s].interactions.data[r].criteria.data[l].type=w,O.set(t))}function u(w){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].criteria.data[l].args[0],w)&&(t.storage.states.data[s].interactions.data[r].criteria.data[l].args[0]=w,O.set(t))}function b(w){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].criteria.data[l].args[1],w)&&(t.storage.states.data[s].interactions.data[r].criteria.data[l].args[1]=w,O.set(t))}function f(w){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].criteria.data[l].args[0],w)&&(t.storage.states.data[s].interactions.data[r].criteria.data[l].args[0]=w,O.set(t))}function h(w){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].criteria.data[l].args[0],w)&&(t.storage.states.data[s].interactions.data[r].criteria.data[l].args[0]=w,O.set(t))}function v(w){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].criteria.data[l].args[0],w)&&(t.storage.states.data[s].interactions.data[r].criteria.data[l].args[0]=w,O.set(t))}return n.$$set=w=>{"selectedStateID"in w&&a(0,s=w.selectedStateID),"selectedInteractionID"in w&&a(1,r=w.selectedInteractionID),"selectedCriteriaID"in w&&a(2,l=w.selectedCriteriaID)},n.$$.update=()=>{if(n.$$.dirty&287&&t.storage.states.data[s].interactions.data[r].criteria.data[l]!==void 0){t.storage.states.data[s].interactions.data[r].criteria.data[l].type;const w=t.storage.states.data[s].interactions.data[r].criteria.data[l].type;g!==void 0&&w!==void 0&&g!==w&&_===l&&F(O,t.storage.states.data[s].interactions.data[r].criteria.data[l].args=[],t),a(3,g=t.storage.states.data[s].interactions.data[r].criteria.data[l].type),a(8,_=l)}n.$$.dirty&16&&(t.storage.restraints,a(5,o=t.storage.restraints.ordering.map(w=>{const N=t.storage.restraints.data[w];return{key:N.id,display:N.devName,enabled:!0}}))),n.$$.dirty&16&&(t.storage.objects,a(6,d=t.storage.objects.ordering.map(w=>{const N=t.storage.objects.data[w];return{key:N.id,display:N.devName,enabled:!0}})))},[s,r,l,g,t,o,d,c,_,p,m,u,b,f,h,v]}class Nl extends Q{constructor(e){super(),K(this,e,Rl,Ol,X,{selectedStateID:0,selectedInteractionID:1,selectedCriteriaID:2})}}function Jt(n){let e,a;return e=new ce({props:{class:"h-full w-full min-h-0 overlfow-y-auto",$$slots:{content:[Ul],header:[Al]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&1049087&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Al(n){let e;return{c(){e=j("p"),e.textContent="Selected Result",i(e,"class","text-slate-300 text-xl")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function Bl(n){let e,a,t;function s(l){n[19](l)}let r={class:"w-full",label:"Dialog Text",placeholder:"While struggling in your restraints, you fail to notice the door opening behind you...",rows:6};return n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]!==void 0&&(r.value=n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]),e=new Ue({props:r}),z.push(()=>E(e,"value",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};!a&&c&23&&(a=!0,o.value=l[4].storage.states.data[l[0]].interactions.data[l[1]].results.data[l[2]].args[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Hl(n){let e,a,t,s,r,l;function c(g){n[17](g)}let o={class:"w-1/2",label:"Flag Name",placeholder:"pushedButton"};n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]!==void 0&&(o.value=n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]),e=new he({props:o}),z.push(()=>E(e,"value",c));function d(g){n[18](g)}let _={class:"w-1/2",label:"Flag Value",placeholder:"true"};return n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[1]!==void 0&&(_.value=n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[1]),s=new he({props:_}),z.push(()=>E(s,"value",d)),{c(){x(e.$$.fragment),t=L(),x(s.$$.fragment)},m(g,p){S(e,g,p),C(g,t,p),S(s,g,p),l=!0},p(g,p){const m={};!a&&p&23&&(a=!0,m.value=g[4].storage.states.data[g[0]].interactions.data[g[1]].results.data[g[2]].args[0],T(()=>a=!1)),e.$set(m);const u={};!r&&p&23&&(r=!0,u.value=g[4].storage.states.data[g[0]].interactions.data[g[1]].results.data[g[2]].args[1],T(()=>r=!1)),s.$set(u)},i(g){l||(k(e.$$.fragment,g),k(s.$$.fragment,g),l=!0)},o(g){I(e.$$.fragment,g),I(s.$$.fragment,g),l=!1},d(g){M(e,g),g&&y(t),M(s,g)}}}function ql(n){let e,a,t;function s(l){n[16](l)}let r={class:"w-1/2",label:"State",disabled:!1,choicesData:n[8]};return n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]!==void 0&&(r.selected=n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]),e=new ve({props:r}),z.push(()=>E(e,"selected",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&256&&(o.choicesData=l[8]),!a&&c&23&&(a=!0,o.selected=l[4].storage.states.data[l[0]].interactions.data[l[1]].results.data[l[2]].args[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function zl(n){let e,a,t;function s(l){n[15](l)}let r={class:"w-1/2",label:"Minimap Location",disabled:!1,choicesData:n[7]};return n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]!==void 0&&(r.selected=n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]),e=new ve({props:r}),z.push(()=>E(e,"selected",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&128&&(o.choicesData=l[7]),!a&&c&23&&(a=!0,o.selected=l[4].storage.states.data[l[0]].interactions.data[l[1]].results.data[l[2]].args[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Tl(n){let e,a,t;function s(l){n[14](l)}let r={class:"w-1/2",label:"Object",disabled:!1,choicesData:n[6]};return n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]!==void 0&&(r.selected=n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]),e=new ve({props:r}),z.push(()=>E(e,"selected",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&64&&(o.choicesData=l[6]),!a&&c&23&&(a=!0,o.selected=l[4].storage.states.data[l[0]].interactions.data[l[1]].results.data[l[2]].args[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function El(n){let e,a,t;function s(l){n[13](l)}let r={class:"w-1/2",label:"Restraint",disabled:!1,choicesData:n[5]};return n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]!==void 0&&(r.selected=n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].args[0]),e=new ve({props:r}),z.push(()=>E(e,"selected",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&32&&(o.choicesData=l[5]),!a&&c&23&&(a=!0,o.selected=l[4].storage.states.data[l[0]].interactions.data[l[1]].results.data[l[2]].args[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Ul(n){let e,a,t,s,r,l,c,o,d,_,g;function p(w){n[11](w)}let m={class:"w-full",label:"Development Name",placeholder:"Set pushButton true"};n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].devName!==void 0&&(m.value=n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].devName),a=new he({props:m}),z.push(()=>E(a,"value",p));function u(w){n[12](w)}let b={class:"w-1/2",label:"Result Type",disabled:!1,choicesData:n[9]};n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].type!==void 0&&(b.selected=n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]].type),r=new ve({props:b}),z.push(()=>E(r,"selected",u));const f=[El,Tl,zl,ql,Hl,Bl],h=[];function v(w,N){return w[3]==="restraintAdd"||w[3]==="restraintRemove"?0:w[3]==="objectReveal"||w[3]==="objectHide"?1:w[3]==="locationAdd"||w[3]==="locationRemove"?2:w[3]==="setState"?3:w[3]==="setFlag"?4:w[3]==="popupDialog"?5:-1}return~(o=v(n))&&(d=h[o]=f[o](n)),{c(){e=j("div"),x(a.$$.fragment),s=L(),x(r.$$.fragment),c=L(),d&&d.c(),_=Ce(),i(e,"class","mb-4 space-y-2")},m(w,N){C(w,e,N),S(a,e,null),$(e,s),S(r,e,null),C(w,c,N),~o&&h[o].m(w,N),C(w,_,N),g=!0},p(w,N){const A={};!t&&N&23&&(t=!0,A.value=w[4].storage.states.data[w[0]].interactions.data[w[1]].results.data[w[2]].devName,T(()=>t=!1)),a.$set(A);const D={};!l&&N&23&&(l=!0,D.selected=w[4].storage.states.data[w[0]].interactions.data[w[1]].results.data[w[2]].type,T(()=>l=!1)),r.$set(D);let R=o;o=v(w),o===R?~o&&h[o].p(w,N):(d&&(se(),I(h[R],1,1,()=>{h[R]=null}),le()),~o?(d=h[o],d?d.p(w,N):(d=h[o]=f[o](w),d.c()),k(d,1),d.m(_.parentNode,_)):d=null)},i(w){g||(k(a.$$.fragment,w),k(r.$$.fragment,w),k(d),g=!0)},o(w){I(a.$$.fragment,w),I(r.$$.fragment,w),I(d),g=!1},d(w){w&&y(e),M(a),M(r),w&&y(c),~o&&h[o].d(w),w&&y(_)}}}function Wl(n){let e,a,t=n[4].storage.states.data[n[0]].interactions.data[n[1]].results.data[n[2]]!==void 0&&Jt(n);return{c(){e=j("div"),t&&t.c(),i(e,"class","grow shrink w-full min-h-0")},m(s,r){C(s,e,r),t&&t.m(e,null),a=!0},p(s,[r]){s[4].storage.states.data[s[0]].interactions.data[s[1]].results.data[s[2]]!==void 0?t?(t.p(s,r),r&23&&k(t,1)):(t=Jt(s),t.c(),k(t,1),t.m(e,null)):t&&(se(),I(t,1,1,()=>{t=null}),le())},i(s){a||(k(t),a=!0)},o(s){I(t),a=!1},d(s){s&&y(e),t&&t.d()}}}function Pl(n,e,a){let t;ne(n,O,R=>a(4,t=R));let{selectedStateID:s}=e,{selectedInteractionID:r}=e,{selectedResultID:l}=e,c=[{key:"restraintAdd",display:"Add restraint",enabled:!0},{key:"restraintRemove",display:"Remove restraint",enabled:!0},{key:"objectReveal",display:"Add object",enabled:!0},{key:"objectHide",display:"Remove object",enabled:!0},{key:"locationAdd",display:"Add location",enabled:!0},{key:"locationRemove",display:"Remove location",enabled:!0},{key:"setState",display:"Set state",enabled:!0},{key:"setFlag",display:"Set flag",enabled:!0},{key:"popupDialog",display:"Show dialog",enabled:!0},{key:"resetAttempts",display:"Reset attempts",enabled:!0}],o=[],d=[],_=[],g=[],p,m;function u(R){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].results.data[l].devName,R)&&(t.storage.states.data[s].interactions.data[r].results.data[l].devName=R,O.set(t))}function b(R){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].results.data[l].type,R)&&(t.storage.states.data[s].interactions.data[r].results.data[l].type=R,O.set(t))}function f(R){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].results.data[l].args[0],R)&&(t.storage.states.data[s].interactions.data[r].results.data[l].args[0]=R,O.set(t))}function h(R){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].results.data[l].args[0],R)&&(t.storage.states.data[s].interactions.data[r].results.data[l].args[0]=R,O.set(t))}function v(R){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].results.data[l].args[0],R)&&(t.storage.states.data[s].interactions.data[r].results.data[l].args[0]=R,O.set(t))}function w(R){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].results.data[l].args[0],R)&&(t.storage.states.data[s].interactions.data[r].results.data[l].args[0]=R,O.set(t))}function N(R){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].results.data[l].args[0],R)&&(t.storage.states.data[s].interactions.data[r].results.data[l].args[0]=R,O.set(t))}function A(R){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].results.data[l].args[1],R)&&(t.storage.states.data[s].interactions.data[r].results.data[l].args[1]=R,O.set(t))}function D(R){n.$$.not_equal(t.storage.states.data[s].interactions.data[r].results.data[l].args[0],R)&&(t.storage.states.data[s].interactions.data[r].results.data[l].args[0]=R,O.set(t))}return n.$$set=R=>{"selectedStateID"in R&&a(0,s=R.selectedStateID),"selectedInteractionID"in R&&a(1,r=R.selectedInteractionID),"selectedResultID"in R&&a(2,l=R.selectedResultID)},n.$$.update=()=>{if(n.$$.dirty&1055&&t.storage.states.data[s].interactions.data[r].results.data[l]!==void 0){t.storage.states.data[s].interactions.data[r].results.data[l].type;const R=t.storage.states.data[s].interactions.data[r].results.data[l].type;m!==void 0&&R!==void 0&&m!==R&&p===l&&F(O,t.storage.states.data[s].interactions.data[r].results.data[l].args=[],t),a(3,m=t.storage.states.data[s].interactions.data[r].results.data[l].type),a(10,p=l)}n.$$.dirty&16&&(t.storage.restraints,a(5,o=t.storage.restraints.ordering.map(R=>{const P=t.storage.restraints.data[R];return{key:P.id,display:P.devName,enabled:!0}}))),n.$$.dirty&16&&(t.storage.objects,a(6,d=t.storage.objects.ordering.map(R=>{const P=t.storage.objects.data[R];return{key:P.id,display:P.devName,enabled:!0}}))),n.$$.dirty&17&&(t.storage.states,a(7,_=t.storage.states.data[s].locations.ordering.map(R=>{const P=t.storage.states.data[s].locations.data[R];return console.log(P),{key:P.id,display:P.devName,enabled:!0}}))),n.$$.dirty&16&&(t.storage.states,a(8,g=t.storage.states.ordering.map(R=>{const P=t.storage.states.data[R];return{key:P.id,display:P.title,enabled:!0}})))},[s,r,l,m,t,o,d,_,g,c,p,u,b,f,h,v,w,N,A,D]}class Fl extends Q{constructor(e){super(),K(this,e,Pl,Wl,X,{selectedStateID:0,selectedInteractionID:1,selectedResultID:2})}}function Vl(n){let e,a,t,s,r,l,c,o,d,_;function g(f){n[6](f)}let p={selectedStateID:n[0]};n[1]!==void 0&&(p.selectedInteractionID=n[1]),t=new Ys({props:p}),z.push(()=>E(t,"selectedInteractionID",g));let m=n[1]!==void 0&&Yt(n),u=n[1]!==void 0&&Gt(n),b=n[1]!==void 0&&Kt(n);return{c(){e=j("div"),a=j("div"),x(t.$$.fragment),r=L(),m&&m.c(),l=L(),c=j("div"),u&&u.c(),o=L(),d=j("div"),b&&b.c(),i(a,"class","grow flex flex-col space-y-4 h-full"),i(c,"class","flex flex-col space-y-4 h-full"),_e(c,"width","30%"),i(d,"class","flex flex-col space-y-4 h-full"),_e(d,"width","30%"),i(e,"class","flex flex-row space-x-4 h-full w-full")},m(f,h){C(f,e,h),$(e,a),S(t,a,null),$(a,r),m&&m.m(a,null),$(e,l),$(e,c),u&&u.m(c,null),$(e,o),$(e,d),b&&b.m(d,null),_=!0},p(f,h){const v={};h&1&&(v.selectedStateID=f[0]),!s&&h&2&&(s=!0,v.selectedInteractionID=f[1],T(()=>s=!1)),t.$set(v),f[1]!==void 0?m?(m.p(f,h),h&2&&k(m,1)):(m=Yt(f),m.c(),k(m,1),m.m(a,null)):m&&(se(),I(m,1,1,()=>{m=null}),le()),f[1]!==void 0?u?(u.p(f,h),h&2&&k(u,1)):(u=Gt(f),u.c(),k(u,1),u.m(c,null)):u&&(se(),I(u,1,1,()=>{u=null}),le()),f[1]!==void 0?b?(b.p(f,h),h&2&&k(b,1)):(b=Kt(f),b.c(),k(b,1),b.m(d,null)):b&&(se(),I(b,1,1,()=>{b=null}),le())},i(f){_||(k(t.$$.fragment,f),k(m),k(u),k(b),_=!0)},o(f){I(t.$$.fragment,f),I(m),I(u),I(b),_=!1},d(f){f&&y(e),M(t),m&&m.d(),u&&u.d(),b&&b.d()}}}function Jl(n){let e,a,t,s=n[4].storage.states.data[n[0]].type+"",r,l,c,o;return{c(){e=j("div"),a=j("p"),t=Y("Cannot setup interactions for "),r=Y(s),l=Y(" state"),c=L(),o=j("p"),o.textContent="Select another state from [States]",i(a,"class","text-2xl text-slate-300"),i(o,"class","text-2xl text-slate-300"),i(e,"class","flex flex-col justify-center w-full h-full")},m(d,_){C(d,e,_),$(e,a),$(a,t),$(a,r),$(a,l),$(e,c),$(e,o)},p(d,_){_&17&&s!==(s=d[4].storage.states.data[d[0]].type+"")&&Z(r,s)},i:B,o:B,d(d){d&&y(e)}}}function Yl(n){let e;return{c(){e=j("div"),e.innerHTML='<p class="text-2xl text-slate-300">Select a state from [States] first</p>',i(e,"class","flex flex-col justify-center w-full h-full")},m(a,t){C(a,e,t)},p:B,i:B,o:B,d(a){a&&y(e)}}}function Yt(n){let e,a;return e=new Zs({props:{selectedStateID:n[0],selectedInteractionID:n[1]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&1&&(r.selectedStateID=t[0]),s&2&&(r.selectedInteractionID=t[1]),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Gt(n){let e,a,t,s,r;function l(d){n[7](d)}let c={class:"h-1/3",selectedStateID:n[0],selectedInteractionID:n[1]};n[2]!==void 0&&(c.selectedCriteriaID=n[2]),e=new ul({props:c}),z.push(()=>E(e,"selectedCriteriaID",l));let o=n[2]!==void 0&&Xt(n);return{c(){x(e.$$.fragment),t=L(),o&&o.c(),s=Ce()},m(d,_){S(e,d,_),C(d,t,_),o&&o.m(d,_),C(d,s,_),r=!0},p(d,_){const g={};_&1&&(g.selectedStateID=d[0]),_&2&&(g.selectedInteractionID=d[1]),!a&&_&4&&(a=!0,g.selectedCriteriaID=d[2],T(()=>a=!1)),e.$set(g),d[2]!==void 0?o?(o.p(d,_),_&4&&k(o,1)):(o=Xt(d),o.c(),k(o,1),o.m(s.parentNode,s)):o&&(se(),I(o,1,1,()=>{o=null}),le())},i(d){r||(k(e.$$.fragment,d),k(o),r=!0)},o(d){I(e.$$.fragment,d),I(o),r=!1},d(d){M(e,d),d&&y(t),o&&o.d(d),d&&y(s)}}}function Xt(n){let e,a;return e=new Nl({props:{selectedStateID:n[0],selectedInteractionID:n[1],selectedCriteriaID:n[2]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&1&&(r.selectedStateID=t[0]),s&2&&(r.selectedInteractionID=t[1]),s&4&&(r.selectedCriteriaID=t[2]),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Kt(n){let e,a,t,s,r;function l(d){n[8](d)}let c={class:"h-1/3",selectedStateID:n[0],selectedInteractionID:n[1]};n[3]!==void 0&&(c.selectedResultID=n[3]),e=new jl({props:c}),z.push(()=>E(e,"selectedResultID",l));let o=n[3]!==void 0&&Qt(n);return{c(){x(e.$$.fragment),t=L(),o&&o.c(),s=Ce()},m(d,_){S(e,d,_),C(d,t,_),o&&o.m(d,_),C(d,s,_),r=!0},p(d,_){const g={};_&1&&(g.selectedStateID=d[0]),_&2&&(g.selectedInteractionID=d[1]),!a&&_&8&&(a=!0,g.selectedResultID=d[3],T(()=>a=!1)),e.$set(g),d[3]!==void 0?o?(o.p(d,_),_&8&&k(o,1)):(o=Qt(d),o.c(),k(o,1),o.m(s.parentNode,s)):o&&(se(),I(o,1,1,()=>{o=null}),le())},i(d){r||(k(e.$$.fragment,d),k(o),r=!0)},o(d){I(e.$$.fragment,d),I(o),r=!1},d(d){M(e,d),d&&y(t),o&&o.d(d),d&&y(s)}}}function Qt(n){let e,a;return e=new Fl({props:{selectedStateID:n[0],selectedInteractionID:n[1],selectedResultID:n[3]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&1&&(r.selectedStateID=t[0]),s&2&&(r.selectedInteractionID=t[1]),s&8&&(r.selectedResultID=t[3]),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Gl(n){let e,a,t,s;const r=[Yl,Jl,Vl],l=[];function c(o,d){return o[0]===void 0?0:o[4].storage.states.data[o[0]].type==="opening"||o[4].storage.states.data[o[0]].type==="ending"?1:2}return e=c(n),a=l[e]=r[e](n),{c(){a.c(),t=Ce()},m(o,d){l[e].m(o,d),C(o,t,d),s=!0},p(o,[d]){let _=e;e=c(o),e===_?l[e].p(o,d):(se(),I(l[_],1,1,()=>{l[_]=null}),le(),a=l[e],a?a.p(o,d):(a=l[e]=r[e](o),a.c()),k(a,1),a.m(t.parentNode,t))},i(o){s||(k(a),s=!0)},o(o){I(a),s=!1},d(o){l[e].d(o),o&&y(t)}}}function Xl(n,e,a){let t,s;ne(n,Ze,p=>a(0,t=p)),ne(n,O,p=>a(4,s=p));let r,l,c,o;function d(p){r=p,a(1,r),a(5,o),a(0,t)}function _(p){l=p,a(2,l),a(5,o),a(0,t)}function g(p){c=p,a(3,c),a(5,o),a(0,t)}return n.$$.update=()=>{n.$$.dirty&33&&o!==t&&(a(1,r=void 0),a(2,l=void 0),a(3,c=void 0),a(5,o=t))},[t,r,l,c,s,o,d,_,g]}class Kl extends Q{constructor(e){super(),K(this,e,Xl,Gl,X,{})}}function Ql(n){let e,a,t,s=n[1].initial===!0?"I":"",r,l,c,o,d=n[1].devName+"",_,g,p,m=n[1].name+"",u,b,f,h,v,w,N,A,D,R;return{c(){e=j("div"),a=j("div"),t=j("p"),r=Y(s),l=L(),c=j("div"),o=j("p"),_=Y(d),g=L(),p=j("p"),u=Y(m),f=L(),h=j("div"),v=j("p"),w=Y(n[0]),i(t,"class","font-mono font-bold text-l w-4"),i(o,"class","h-6 text-left w-full min-w-0 truncate"),i(p,"class",b=`h-5 text-sm ${n[2]===!0?"text-slate-400":"text-slate-500"}`),i(c,"class","flex flex-col items-start w-9/12"),i(a,"class","grow flex flex-row items-center space-x-3 basis-0 shrink min-w-0"),i(v,"class",N=`text-center font-mono ${n[2]===!0?"text-slate-500":"text-slate-600"}`),i(h,"class","flex flex-row items-center h-full"),i(e,"class",A=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${n[3]} ${n[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)},m(P,ee){C(P,e,ee),$(e,a),$(a,t),$(t,r),$(a,l),$(a,c),$(c,o),$(o,_),$(c,g),$(c,p),$(p,u),$(e,f),$(e,h),$(h,v),$(v,w),D||(R=ue(e,"click",n[4]),D=!0)},p(P,[ee]){ee&2&&s!==(s=P[1].initial===!0?"I":"")&&Z(r,s),ee&2&&d!==(d=P[1].devName+"")&&Z(_,d),ee&2&&m!==(m=P[1].name+"")&&Z(u,m),ee&4&&b!==(b=`h-5 text-sm ${P[2]===!0?"text-slate-400":"text-slate-500"}`)&&i(p,"class",b),ee&1&&Z(w,P[0]),ee&4&&N!==(N=`text-center font-mono ${P[2]===!0?"text-slate-500":"text-slate-600"}`)&&i(v,"class",N),ee&12&&A!==(A=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${P[3]} ${P[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)&&i(e,"class",A)},i:B,o:B,d(P){P&&y(e),D=!1,R()}}}function Zl(n,e,a){let{key:t}=e,{objectData:s}=e,{selected:r}=e,{class:l}=e;const c=Me();function o(){c("dispatchClick",{key:t})}return n.$$set=d=>{"key"in d&&a(0,t=d.key),"objectData"in d&&a(1,s=d.objectData),"selected"in d&&a(2,r=d.selected),"class"in d&&a(3,l=d.class)},[t,s,r,l,o]}class er extends Q{constructor(e){super(),K(this,e,Zl,Ql,X,{key:0,objectData:1,selected:2,class:3})}}function tr(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M12 4v16m8-8H4"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function ar(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function nr(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function sr(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M5 15l7-7 7 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function lr(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 9l-7 7-7-7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function rr(n){let e,a,t,s,r,l,c,o,d,_,g,p,m,u,b;return r=new J({props:{onclick:n[2],$$slots:{default:[tr]},$$scope:{ctx:n}}}),c=new J({props:{onclick:n[3],$$slots:{default:[ar]},$$scope:{ctx:n}}}),d=new J({props:{onclick:n[4],$$slots:{default:[nr]},$$scope:{ctx:n}}}),p=new J({props:{onclick:n[5],$$slots:{default:[sr]},$$scope:{ctx:n}}}),u=new J({props:{onclick:n[6],$$slots:{default:[lr]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Game Objects",a=L(),t=j("div"),s=j("div"),x(r.$$.fragment),l=L(),x(c.$$.fragment),o=L(),x(d.$$.fragment),_=L(),g=j("div"),x(p.$$.fragment),m=L(),x(u.$$.fragment),i(e,"class","text-slate-300 text-xl align-middle"),i(s,"class","flex flex-row space-x-1"),i(g,"class","flex flex-row space-x-1"),i(t,"class","flex flex-row space-x-4")},m(f,h){C(f,e,h),C(f,a,h),C(f,t,h),$(t,s),S(r,s,null),$(s,l),S(c,s,null),$(s,o),S(d,s,null),$(t,_),$(t,g),S(p,g,null),$(g,m),S(u,g,null),b=!0},p(f,h){const v={};h&1024&&(v.$$scope={dirty:h,ctx:f}),r.$set(v);const w={};h&1024&&(w.$$scope={dirty:h,ctx:f}),c.$set(w);const N={};h&1024&&(N.$$scope={dirty:h,ctx:f}),d.$set(N);const A={};h&1024&&(A.$$scope={dirty:h,ctx:f}),p.$set(A);const D={};h&1024&&(D.$$scope={dirty:h,ctx:f}),u.$set(D)},i(f){b||(k(r.$$.fragment,f),k(c.$$.fragment,f),k(d.$$.fragment,f),k(p.$$.fragment,f),k(u.$$.fragment,f),b=!0)},o(f){I(r.$$.fragment,f),I(c.$$.fragment,f),I(d.$$.fragment,f),I(p.$$.fragment,f),I(u.$$.fragment,f),b=!1},d(f){f&&y(e),f&&y(a),f&&y(t),M(r),M(c),M(d),M(p),M(u)}}}function or(n){let e,a,t;function s(l){n[8](l)}let r={deselectable:!0,scrollingRadioData:n[1]};return n[0]!==void 0&&(r.selectedID=n[0]),e=new Ae({props:r}),z.push(()=>E(e,"selectedID",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&2&&(o.scrollingRadioData=l[1]),!a&&c&1&&(a=!0,o.selectedID=l[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function ir(n){let e,a;return e=new ce({props:{class:`shrink\r
    w-full h-full min-h-0`,contentClass:`scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden\r
        pr-4 mr-1`,$$slots:{content:[or],header:[rr]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&1027&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function cr(n,e,a){let t;ne(n,O,m=>a(7,t=m));let{selectedObjectID:s}=e,r;function l(){return t.storage.objects.ordering.filter(m=>m!==void 0).map(m=>{const u=t.storage.objects.data[m];return{key:u.id,component:er,props:{objectData:u}}})}function c(){const m=we($e);F(O,t.storage.objects.data[m]={id:m,name:"",devName:"",examine:"",initial:!1},t),t.storage.objects.ordering.push(m),O.set(t)}function o(){if(s!==void 0){const m=t.storage.objects.ordering.indexOf(s),u=t.storage.objects.data[s],b=JSON.parse(JSON.stringify(u)),f=we($e);b.id=f,F(O,t.storage.objects.data[f]=b,t),t.storage.objects.ordering.splice(m+1,0,f),O.set(t),a(0,s=f)}}function d(){var m,u;if(s!==void 0){const b=s;a(0,s=void 0);const f=t.storage.objects.ordering,h=f.findIndex(v=>v===b);for(let v=h;v<f.length-1;v++)f[v]=(m=f[v+1])!=null?m:void 0;f.pop(),a(0,s=(u=f[h])!=null?u:f[h-1]),delete t.storage.objects.data[b],O.set(t)}}function _(){if(s!==void 0&&t.storage.objects.ordering.length>1){const m=t.storage.objects.ordering,u=m.findIndex(f=>f===s);if(u<=0)return;const b=m[u];m[u]=m[u-1],m[u-1]=b,O.set(t)}}function g(){if(s!==void 0&&t.storage.objects.ordering.length>1){const m=t.storage.objects.ordering,u=m.findIndex(f=>f===s);if(u===-1||u===t.storage.objects.ordering.length-1)return;const b=m[u];m[u]=m[u+1],m[u+1]=b,O.set(t)}}function p(m){s=m,a(0,s)}return n.$$set=m=>{"selectedObjectID"in m&&a(0,s=m.selectedObjectID)},n.$$.update=()=>{n.$$.dirty&128&&(t.storage.objects,a(1,r=l()))},[s,r,c,o,d,_,g,t,p]}class dr extends Q{constructor(e){super(),K(this,e,cr,ir,X,{selectedObjectID:0})}}function fr(n){let e;return{c(){e=j("p"),e.textContent="Selected Object",i(e,"class","text-slate-300 text-xl")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function ur(n){let e,a,t,s,r,l,c,o,d,_,g,p,m;function u(D){n[2](D)}let b={class:"grow",label:"Development Name",placeholder:"Button (#1, incorrect)"};n[1].storage.objects.data[n[0]].devName!==void 0&&(b.value=n[1].storage.objects.data[n[0]].devName),a=new he({props:b}),z.push(()=>E(a,"value",u));function f(D){n[3](D)}let h={class:"w-1/2",label:"Name",placeholder:"Button"};n[1].storage.objects.data[n[0]].name!==void 0&&(h.value=n[1].storage.objects.data[n[0]].name),r=new he({props:h}),z.push(()=>E(r,"value",f));function v(D){n[4](D)}let w={class:"w-full",label:"Examine Description",placeholder:"One of many buttons dotting the wall - feeling lucky?",rows:6};n[1].storage.objects.data[n[0]].examine!==void 0&&(w.value=n[1].storage.objects.data[n[0]].examine),o=new Ue({props:w}),z.push(()=>E(o,"value",v));function N(D){n[5](D)}let A={label:"Initially Revealed"};return n[1].storage.objects.data[n[0]].initial!==void 0&&(A.value=n[1].storage.objects.data[n[0]].initial),g=new ut({props:A}),z.push(()=>E(g,"value",N)),{c(){e=j("div"),x(a.$$.fragment),s=L(),x(r.$$.fragment),c=L(),x(o.$$.fragment),_=L(),x(g.$$.fragment),i(e,"class","flex flex-row space-x-6")},m(D,R){C(D,e,R),S(a,e,null),$(e,s),S(r,e,null),C(D,c,R),S(o,D,R),C(D,_,R),S(g,D,R),m=!0},p(D,R){const P={};!t&&R&3&&(t=!0,P.value=D[1].storage.objects.data[D[0]].devName,T(()=>t=!1)),a.$set(P);const ee={};!l&&R&3&&(l=!0,ee.value=D[1].storage.objects.data[D[0]].name,T(()=>l=!1)),r.$set(ee);const fe={};!d&&R&3&&(d=!0,fe.value=D[1].storage.objects.data[D[0]].examine,T(()=>d=!1)),o.$set(fe);const ge={};!p&&R&3&&(p=!0,ge.value=D[1].storage.objects.data[D[0]].initial,T(()=>p=!1)),g.$set(ge)},i(D){m||(k(a.$$.fragment,D),k(r.$$.fragment,D),k(o.$$.fragment,D),k(g.$$.fragment,D),m=!0)},o(D){I(a.$$.fragment,D),I(r.$$.fragment,D),I(o.$$.fragment,D),I(g.$$.fragment,D),m=!1},d(D){D&&y(e),M(a),M(r),D&&y(c),M(o,D),D&&y(_),M(g,D)}}}function gr(n){let e,a;return e=new ce({props:{class:"h-full w-full min-h-0 overlfow-y-auto",$$slots:{content:[ur],header:[fr]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&67&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function pr(n,e,a){let t;ne(n,O,d=>a(1,t=d));let{selectedObjectID:s}=e;function r(d){n.$$.not_equal(t.storage.objects.data[s].devName,d)&&(t.storage.objects.data[s].devName=d,O.set(t))}function l(d){n.$$.not_equal(t.storage.objects.data[s].name,d)&&(t.storage.objects.data[s].name=d,O.set(t))}function c(d){n.$$.not_equal(t.storage.objects.data[s].examine,d)&&(t.storage.objects.data[s].examine=d,O.set(t))}function o(d){n.$$.not_equal(t.storage.objects.data[s].initial,d)&&(t.storage.objects.data[s].initial=d,O.set(t))}return n.$$set=d=>{"selectedObjectID"in d&&a(0,s=d.selectedObjectID)},[s,t,r,l,c,o]}class mr extends Q{constructor(e){super(),K(this,e,pr,gr,X,{selectedObjectID:0})}}function Zt(n){let e,a;return e=new mr({props:{selectedObjectID:n[0]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&1&&(r.selectedObjectID=t[0]),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function br(n){let e,a,t,s,r,l,c;function o(g){n[1](g)}let d={};n[0]!==void 0&&(d.selectedObjectID=n[0]),t=new dr({props:d}),z.push(()=>E(t,"selectedObjectID",o));let _=n[0]!==void 0&&Zt(n);return{c(){e=j("div"),a=j("div"),x(t.$$.fragment),r=L(),l=j("div"),_&&_.c(),i(a,"class","flex flex-col space-y-4 h-full"),_e(a,"width","30%"),i(l,"class","grow flex flex-col space-y-4 h-full"),i(e,"class","flex flex-row space-x-4 h-full w-full")},m(g,p){C(g,e,p),$(e,a),S(t,a,null),$(e,r),$(e,l),_&&_.m(l,null),c=!0},p(g,[p]){const m={};!s&&p&1&&(s=!0,m.selectedObjectID=g[0],T(()=>s=!1)),t.$set(m),g[0]!==void 0?_?(_.p(g,p),p&1&&k(_,1)):(_=Zt(g),_.c(),k(_,1),_.m(l,null)):_&&(se(),I(_,1,1,()=>{_=null}),le())},i(g){c||(k(t.$$.fragment,g),k(_),c=!0)},o(g){I(t.$$.fragment,g),I(_),c=!1},d(g){g&&y(e),M(t),_&&_.d()}}}function hr(n,e,a){let t;function s(r){t=r,a(0,t)}return[t,s]}class _r extends Q{constructor(e){super(),K(this,e,hr,br,X,{})}}function wr(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function $r(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M6 18L18 6M6 6l12 12"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function vr(n){let e,a,t,s,r,l,c;return s=new J({props:{label:"Load Image",onclick:n[8],$$slots:{default:[wr]},$$scope:{ctx:n}}}),l=new J({props:{label:"Clear Image",onclick:n[9],$$slots:{default:[$r]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Minimap",a=L(),t=j("div"),x(s.$$.fragment),r=L(),x(l.$$.fragment),i(e,"class","text-slate-300 text-xl"),i(t,"class","flex flex-row space-x-2")},m(o,d){C(o,e,d),C(o,a,d),C(o,t,d),S(s,t,null),$(t,r),S(l,t,null),c=!0},p(o,d){const _={};d&33554432&&(_.$$scope={dirty:d,ctx:o}),s.$set(_);const g={};d&33554432&&(g.$$scope={dirty:d,ctx:o}),l.$set(g)},i(o){c||(k(s.$$.fragment,o),k(l.$$.fragment,o),c=!0)},o(o){I(s.$$.fragment,o),I(l.$$.fragment,o),c=!1},d(o){o&&y(e),o&&y(a),o&&y(t),M(s),M(l)}}}function ea(n){let e,a;return{c(){e=j("img"),i(e,"class","absolute h-full w-full object-contain"),_e(e,"z-index","12"),Ne(e.src,a=n[3].storage.images[n[3].storage.states.data[n[0]].locations.data[n[1]].minimapHash])||i(e,"src",a)},m(t,s){C(t,e,s)},p(t,s){s&11&&!Ne(e.src,a=t[3].storage.images[t[3].storage.states.data[t[0]].locations.data[t[1]].minimapHash])&&i(e,"src",a)},d(t){t&&y(e)}}}function kr(n){let e,a,t,s,r,l,c=n[3].storage.states.data[n[0]].locations.data[n[1]].minimapHash!==""&&ea(n);return{c(){e=j("div"),c&&c.c(),a=L(),t=j("canvas"),i(t,"class","absolute h-full w-full"),_e(t,"z-index","14"),i(t,"width",n[6]),i(t,"height",n[7]),Ee(()=>n[17].call(t)),i(e,"class","border border-slate-600 minimap-display svelte-27tmv0")},m(o,d){C(o,e,d),c&&c.m(e,null),$(e,a),$(e,t),n[16](t),s=Oa(t,n[17].bind(t)),r||(l=ue(t,"click",n[11]),r=!0)},p(o,d){o[3].storage.states.data[o[0]].locations.data[o[1]].minimapHash!==""?c?c.p(o,d):(c=ea(o),c.c(),c.m(e,a)):c&&(c.d(1),c=null),d&64&&i(t,"width",o[6]),d&128&&i(t,"height",o[7])},d(o){o&&y(e),c&&c.d(),n[16](null),s(),r=!1,l()}}}function Dr(n){let e;return{c(){e=j("div"),e.innerHTML="<p>Tip: To only show the popup dialog, don&#39;t assign a referenced object</p>",i(e,"class","flex flex-col items-center justify-center space-y-1 w-full h-full")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function ta(n){let e,a;return e=new ce({props:{class:"grow",$$slots:{content:[yr],header:[jr]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&33554463&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Ir(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M6 18L18 6M6 6l12 12"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function jr(n){let e,a,t,s,r;return s=new J({props:{label:"Clear",onclick:n[12],$$slots:{default:[Ir]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Selected Minimap Object",a=L(),t=j("div"),x(s.$$.fragment),i(e,"class","text-slate-300 text-xl"),i(t,"class","flex flex-row space-x-2")},m(l,c){C(l,e,c),C(l,a,c),C(l,t,c),S(s,t,null),r=!0},p(l,c){const o={};c&33554432&&(o.$$scope={dirty:c,ctx:l}),s.$set(o)},i(l){r||(k(s.$$.fragment,l),r=!0)},o(l){I(s.$$.fragment,l),r=!1},d(l){l&&y(e),l&&y(a),l&&y(t),M(s)}}}function yr(n){let e,a,t,s,r,l,c,o,d,_,g,p;function m(A){n[18](A)}let u={class:"w-full",label:"Development Name",placeholder:"Knife on Table"};n[3].storage.states.data[n[0]].locations.data[n[1]].minimapObjects.data[n[2]].devName!==void 0&&(u.value=n[3].storage.states.data[n[0]].locations.data[n[1]].minimapObjects.data[n[2]].devName),e=new he({props:u}),z.push(()=>E(e,"value",m));function b(A){n[19](A)}let f={class:"w-1/2",label:"Render Type",disabled:!1,choicesData:n[10]};n[3].storage.states.data[n[0]].locations.data[n[1]].minimapObjects.data[n[2]].type!==void 0&&(f.selected=n[3].storage.states.data[n[0]].locations.data[n[1]].minimapObjects.data[n[2]].type),s=new ve({props:f}),z.push(()=>E(s,"selected",b));function h(A){n[20](A)}let v={class:"w-2/3",label:"Referenced Object",disabled:!1,choicesData:n[4]};n[3].storage.states.data[n[0]].locations.data[n[1]].minimapObjects.data[n[2]].object!==void 0&&(v.selected=n[3].storage.states.data[n[0]].locations.data[n[1]].minimapObjects.data[n[2]].object),c=new ve({props:v}),z.push(()=>E(c,"selected",h));function w(A){n[21](A)}let N={class:"w-full",label:"Popup Dialog",placeholder:"You spy the key to your restraints resting on the floor, tauntingly just out of reach.",rows:8};return n[3].storage.states.data[n[0]].locations.data[n[1]].minimapObjects.data[n[2]].dialog!==void 0&&(N.value=n[3].storage.states.data[n[0]].locations.data[n[1]].minimapObjects.data[n[2]].dialog),_=new Ue({props:N}),z.push(()=>E(_,"value",w)),{c(){x(e.$$.fragment),t=L(),x(s.$$.fragment),l=L(),x(c.$$.fragment),d=L(),x(_.$$.fragment)},m(A,D){S(e,A,D),C(A,t,D),S(s,A,D),C(A,l,D),S(c,A,D),C(A,d,D),S(_,A,D),p=!0},p(A,D){const R={};!a&&D&15&&(a=!0,R.value=A[3].storage.states.data[A[0]].locations.data[A[1]].minimapObjects.data[A[2]].devName,T(()=>a=!1)),e.$set(R);const P={};!r&&D&15&&(r=!0,P.selected=A[3].storage.states.data[A[0]].locations.data[A[1]].minimapObjects.data[A[2]].type,T(()=>r=!1)),s.$set(P);const ee={};D&16&&(ee.choicesData=A[4]),!o&&D&15&&(o=!0,ee.selected=A[3].storage.states.data[A[0]].locations.data[A[1]].minimapObjects.data[A[2]].object,T(()=>o=!1)),c.$set(ee);const fe={};!g&&D&15&&(g=!0,fe.value=A[3].storage.states.data[A[0]].locations.data[A[1]].minimapObjects.data[A[2]].dialog,T(()=>g=!1)),_.$set(fe)},i(A){p||(k(e.$$.fragment,A),k(s.$$.fragment,A),k(c.$$.fragment,A),k(_.$$.fragment,A),p=!0)},o(A){I(e.$$.fragment,A),I(s.$$.fragment,A),I(c.$$.fragment,A),I(_.$$.fragment,A),p=!1},d(A){M(e,A),A&&y(t),M(s,A),A&&y(l),M(c,A),A&&y(d),M(_,A)}}}function Cr(n){let e,a,t,s,r,l,c,o;t=new ce({props:{$$slots:{content:[kr],header:[vr]},$$scope:{ctx:n}}}),r=new ce({props:{class:"grow",$$slots:{content:[Dr]},$$scope:{ctx:n}}});let d=n[2]!==void 0&&ta(n);return{c(){e=j("div"),a=j("div"),x(t.$$.fragment),s=L(),x(r.$$.fragment),l=L(),c=j("div"),d&&d.c(),i(a,"class","flex flex-col space-y-4 h-full"),_e(a,"width","55%"),i(c,"class","grow flex flex-col space-y-4"),i(e,"class","flex flex-row space-x-4 w-full h-full")},m(_,g){C(_,e,g),$(e,a),S(t,a,null),$(a,s),S(r,a,null),$(e,l),$(e,c),d&&d.m(c,null),o=!0},p(_,[g]){const p={};g&33554667&&(p.$$scope={dirty:g,ctx:_}),t.$set(p);const m={};g&33554432&&(m.$$scope={dirty:g,ctx:_}),r.$set(m),_[2]!==void 0?d?(d.p(_,g),g&4&&k(d,1)):(d=ta(_),d.c(),k(d,1),d.m(c,null)):d&&(se(),I(d,1,1,()=>{d=null}),le())},i(_){o||(k(t.$$.fragment,_),k(r.$$.fragment,_),k(d),o=!0)},o(_){I(t.$$.fragment,_),I(r.$$.fragment,_),I(d),o=!1},d(_){_&&y(e),M(t),M(r),d&&d.d()}}}function bt(n,e){return`rgba(${n==="red"?"255, 0, 0":"0, 255, 0"}, ${e})`}function Sr(n,e,a){let t;ne(n,O,G=>a(3,t=G));let{selectedStateID:s}=e,{selectedMinimapLocationID:r}=e,{selectedMinimapObjectID:l}=e;async function c(){const G=await Ba();if(G.startsWith("Cancelled")===!0)return;const pe=t.storage.states.data[s].locations.data[r].minimapHash;delete t.storage.images[pe];const re=await ft(G);F(O,t.storage.images[re]=G,t),F(O,t.storage.states.data[s].locations.data[r].minimapHash=re,t),O.set(t)}async function o(){const G=t.storage.states.data[s].locations.data[r].minimapHash;delete t.storage.images[G],F(O,t.storage.states.data[s].locations.data[r].minimapHash="",t),O.set(t)}const d=[{key:"circle",display:"Circle",enabled:!0},{key:"vector",display:"Vector",enabled:!0}];let _=[],g,p,m,u;Ja(()=>{u=g.getContext("2d")});let b,f,h;function v(G,pe,re=!1){const oe=g.getBoundingClientRect();if(u.strokeStyle=bt(pe,1),G.type==="vector"){for(const[Se,[ye,De]]of G.args.entries()){const Ie=Math.floor(ye*oe.width),Be=Math.floor(De*oe.height),He=new Path2D;He.arc(Ie,Be,2,0,2*Math.PI),Se===0&&pe==="green"&&He.arc(Ie,Be,4,0,2*Math.PI),u.stroke(He)}let je=!0;const Oe=new Path2D;for(const[Se,ye]of[...G.args,G.args[0]]){const De=Math.floor(Se*oe.width),Ie=Math.floor(ye*oe.height);je===!0?(je=!1,Oe.moveTo(De,Ie)):Oe.lineTo(De,Ie)}u.fillStyle=bt(pe,.2),u.lineWidth=2,re===!0&&u.setLineDash([5,15]),u.stroke(Oe),u.fill(Oe),u.setLineDash([])}else{let[[je,Oe],Se]=G.args;const ye=new Path2D,De=Math.floor(je*oe.width),Ie=Math.floor(Oe*oe.height);if(Se===void 0)ye.arc(De,Ie,2,0,2*Math.PI);else{ye.arc(De,Ie,1,0,2*Math.PI);const Be=Math.floor(Se[0]*oe.width),He=Math.floor(Se[1]*oe.height),We=Math.sqrt(Math.pow(De-Be,2)+Math.pow(Ie-He,2));ye.arc(De,Ie,We,0,2*Math.PI)}u.fillStyle=bt(pe,.2),u.lineWidth=2,re===!0&&u.setLineDash([5,15]),u.stroke(ye),u.fill(ye),u.setLineDash([])}}function w(G,pe){G.args[0]!==void 0&&(v(G,pe,!1),pe==="green"&&v(G,pe,!0))}function N(G){if(u===void 0)return;u.clearRect(0,0,g.width,g.height);const pe=t.storage.states.data[s].locations.data[r].minimapObjects.data[l];if(G!==void 0&&l!==void 0&&(pe.type==="vector"||pe.args[0]===void 0||pe.args[1]===void 0)){const re=g.getBoundingClientRect(),oe=Math.max(Math.floor(G.clientX-re.left),0)/re.width,je=Math.max(Math.floor(G.clientY-re.top),0)/re.height;pe.args.push([oe,je])}for(const[re,oe]of Object.entries(t.storage.states.data[s].locations.data[r].minimapObjects.data))re!==l&&w(oe,"red");l!==void 0&&w(pe,"green")}function A(){F(O,t.storage.states.data[s].locations.data[r].minimapObjects.data[l].args=[],t)}function D(G){z[G?"unshift":"push"](()=>{g=G,a(5,g)})}function R(){p=this.clientWidth,m=this.clientHeight,a(6,p),a(7,m)}function P(G){n.$$.not_equal(t.storage.states.data[s].locations.data[r].minimapObjects.data[l].devName,G)&&(t.storage.states.data[s].locations.data[r].minimapObjects.data[l].devName=G,O.set(t))}function ee(G){n.$$.not_equal(t.storage.states.data[s].locations.data[r].minimapObjects.data[l].type,G)&&(t.storage.states.data[s].locations.data[r].minimapObjects.data[l].type=G,O.set(t))}function fe(G){n.$$.not_equal(t.storage.states.data[s].locations.data[r].minimapObjects.data[l].object,G)&&(t.storage.states.data[s].locations.data[r].minimapObjects.data[l].object=G,O.set(t))}function ge(G){n.$$.not_equal(t.storage.states.data[s].locations.data[r].minimapObjects.data[l].dialog,G)&&(t.storage.states.data[s].locations.data[r].minimapObjects.data[l].dialog=G,O.set(t))}return n.$$set=G=>{"selectedStateID"in G&&a(0,s=G.selectedStateID),"selectedMinimapLocationID"in G&&a(1,r=G.selectedMinimapLocationID),"selectedMinimapObjectID"in G&&a(2,l=G.selectedMinimapObjectID)},n.$$.update=()=>{if(n.$$.dirty&57359&&l!==void 0&&t.storage.states.data[s].locations.data[r].minimapObjects.data[l]!==void 0){t.storage.states.data[s].locations.data[r].minimapObjects.data[l].type;const G=t.storage.states.data[s].locations.data[r].minimapObjects.data[l].type;h!==void 0&&G!==void 0&&h!==G&&f===l&&b===s&&(F(O,t.storage.states.data[s].locations.data[r].minimapObjects.data[l].args=[],t),N()),a(15,h=t.storage.states.data[s].locations.data[r].minimapObjects.data[l].type),a(13,b=s),a(14,f=l)}n.$$.dirty&8&&(t.storage.objects,a(4,_=[{key:"",display:"",enabled:!0},...t.storage.objects.ordering.map(G=>{const pe=t.storage.objects.data[G];return{key:pe.id,display:pe.devName,enabled:!0}})])),n.$$.dirty&15&&(t.storage.states.data[s].locations,t.storage.states.data[s].locations.data[r].minimapObjects.data[l],setTimeout(N,5))},[s,r,l,t,_,g,p,m,c,o,d,N,A,b,f,h,D,R,P,ee,fe,ge]}class Mr extends Q{constructor(e){super(),K(this,e,Sr,Cr,X,{selectedStateID:0,selectedMinimapLocationID:1,selectedMinimapObjectID:2})}}function xr(n){let e,a,t,s=n[1].devName+"",r,l,c,o,d,_,g,p,m;return{c(){e=j("div"),a=j("div"),t=j("p"),r=Y(s),l=L(),c=j("div"),o=j("p"),d=Y(n[0]),i(t,"class","text-left w-11/12 min-w-0 truncate"),i(a,"class","grow flex flex-row items-center space-x-2 h-full"),i(o,"class",_=`text-center font-mono ${n[2]===!0?"text-slate-500":"text-slate-600"}`),i(c,"class","flex flex-row items-center h-full"),i(e,"class",g=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${n[3]} ${n[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)},m(u,b){C(u,e,b),$(e,a),$(a,t),$(t,r),$(e,l),$(e,c),$(c,o),$(o,d),p||(m=ue(e,"click",n[4]),p=!0)},p(u,[b]){b&2&&s!==(s=u[1].devName+"")&&Z(r,s),b&1&&Z(d,u[0]),b&4&&_!==(_=`text-center font-mono ${u[2]===!0?"text-slate-500":"text-slate-600"}`)&&i(o,"class",_),b&12&&g!==(g=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${u[3]} ${u[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)&&i(e,"class",g)},i:B,o:B,d(u){u&&y(e),p=!1,m()}}}function Lr(n,e,a){let{key:t}=e,{minimapLocationData:s}=e,{selected:r}=e,{class:l}=e;const c=Me();function o(){c("dispatchClick",{key:t})}return n.$$set=d=>{"key"in d&&a(0,t=d.key),"minimapLocationData"in d&&a(1,s=d.minimapLocationData),"selected"in d&&a(2,r=d.selected),"class"in d&&a(3,l=d.class)},[t,s,r,l,o]}class Or extends Q{constructor(e){super(),K(this,e,Lr,xr,X,{key:0,minimapLocationData:1,selected:2,class:3})}}function Rr(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M12 4v16m8-8H4"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Nr(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Ar(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Br(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M5 15l7-7 7 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Hr(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 9l-7 7-7-7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function qr(n){let e,a,t,s,r,l,c,o,d,_,g,p,m,u,b;return r=new J({props:{onclick:n[2],$$slots:{default:[Rr]},$$scope:{ctx:n}}}),c=new J({props:{onclick:n[3],$$slots:{default:[Nr]},$$scope:{ctx:n}}}),d=new J({props:{onclick:n[4],$$slots:{default:[Ar]},$$scope:{ctx:n}}}),p=new J({props:{onclick:n[5],$$slots:{default:[Br]},$$scope:{ctx:n}}}),u=new J({props:{onclick:n[6],$$slots:{default:[Hr]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Minimap Locations",a=L(),t=j("div"),s=j("div"),x(r.$$.fragment),l=L(),x(c.$$.fragment),o=L(),x(d.$$.fragment),_=L(),g=j("div"),x(p.$$.fragment),m=L(),x(u.$$.fragment),i(e,"class","text-slate-300 text-xl align-middle"),i(s,"class","flex flex-row space-x-1"),i(g,"class","flex flex-row space-x-1"),i(t,"class","flex flex-row space-x-4")},m(f,h){C(f,e,h),C(f,a,h),C(f,t,h),$(t,s),S(r,s,null),$(s,l),S(c,s,null),$(s,o),S(d,s,null),$(t,_),$(t,g),S(p,g,null),$(g,m),S(u,g,null),b=!0},p(f,h){const v={};h&2048&&(v.$$scope={dirty:h,ctx:f}),r.$set(v);const w={};h&2048&&(w.$$scope={dirty:h,ctx:f}),c.$set(w);const N={};h&2048&&(N.$$scope={dirty:h,ctx:f}),d.$set(N);const A={};h&2048&&(A.$$scope={dirty:h,ctx:f}),p.$set(A);const D={};h&2048&&(D.$$scope={dirty:h,ctx:f}),u.$set(D)},i(f){b||(k(r.$$.fragment,f),k(c.$$.fragment,f),k(d.$$.fragment,f),k(p.$$.fragment,f),k(u.$$.fragment,f),b=!0)},o(f){I(r.$$.fragment,f),I(c.$$.fragment,f),I(d.$$.fragment,f),I(p.$$.fragment,f),I(u.$$.fragment,f),b=!1},d(f){f&&y(e),f&&y(a),f&&y(t),M(r),M(c),M(d),M(p),M(u)}}}function zr(n){let e,a,t;function s(l){n[9](l)}let r={deselectable:!0,scrollingRadioData:n[1]};return n[0]!==void 0&&(r.selectedID=n[0]),e=new Ae({props:r}),z.push(()=>E(e,"selectedID",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&2&&(o.scrollingRadioData=l[1]),!a&&c&1&&(a=!0,o.selectedID=l[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Tr(n){let e,a;return e=new ce({props:{class:`shrink\r
    w-full h-full min-h-0`,contentClass:`scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden\r
        pr-4 mr-1`,$$slots:{content:[zr],header:[qr]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&2051&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Er(n,e,a){let t;ne(n,O,u=>a(8,t=u));let{selectedStateID:s}=e,{selectedMinimapLocationID:r}=e,l;function c(){return t.storage.states.data[s].locations.ordering.filter(u=>u!==void 0).map(u=>{const b=t.storage.states.data[s].locations.data[u];return{key:b.id,component:Or,props:{minimapLocationData:b}}})}function o(){const u=we($e);F(O,t.storage.states.data[s].locations.data[u]={id:u,name:"",devName:"",initial:!0,minimapB64:"",minimapObjects:{data:{},ordering:[]}},t),t.storage.states.data[s].locations.ordering.push(u),O.set(t)}function d(){if(r!==void 0){const u=t.storage.states.data[s].locations.ordering.indexOf(r),b=t.storage.states.data[s].locations.data[r],f=JSON.parse(JSON.stringify(b)),h=we($e);f.id=h,F(O,t.storage.states.data[s].locations.data[h]=f,t),t.storage.states.data[s].locations.ordering.splice(u+1,0,h),O.set(t),a(0,r=h)}}function _(){var u,b;if(r!==void 0){const f=r;a(0,r=void 0);const h=t.storage.states.data[s].locations.ordering,v=h.findIndex(w=>w===f);for(let w=v;w<h.length-1;w++)h[w]=(u=h[w+1])!=null?u:void 0;h.pop(),a(0,r=(b=h[v])!=null?b:h[v-1]),delete t.storage.states.data[s].locations.data[f],O.set(t)}}function g(){if(r!==void 0&&t.storage.states.data[s].locations.ordering.length>1){const u=t.storage.states.data[s].locations.ordering,b=u.findIndex(h=>h===r);if(b<=0)return;const f=u[b];u[b]=u[b-1],u[b-1]=f,O.set(t)}}function p(){if(r!==void 0&&t.storage.states.data[s].locations.ordering.length>1){const u=t.storage.states.data[s].locations.ordering,b=u.findIndex(h=>h===r);if(b===-1||b===t.storage.states.data[s].locations.ordering.length-1)return;const f=u[b];u[b]=u[b+1],u[b+1]=f,O.set(t)}}function m(u){r=u,a(0,r)}return n.$$set=u=>{"selectedStateID"in u&&a(7,s=u.selectedStateID),"selectedMinimapLocationID"in u&&a(0,r=u.selectedMinimapLocationID)},n.$$.update=()=>{n.$$.dirty&384&&(t.storage.states,t.storage.states.data[s].locations,a(1,l=c()))},[r,l,o,d,_,g,p,s,t,m]}class Ur extends Q{constructor(e){super(),K(this,e,Er,Tr,X,{selectedStateID:7,selectedMinimapLocationID:0})}}function Wr(n){let e;return{c(){e=j("p"),e.textContent="Selected Minimap Location",i(e,"class","text-slate-300 text-xl")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function Pr(n){let e,a,t,s,r,l,c,o,d,_,g,p;function m(w){n[3](w)}let u={class:"w-1/2",label:"Development Name",placeholder:"Bedroom"};n[2].storage.states.data[n[0]].locations.data[n[1]].devName!==void 0&&(u.value=n[2].storage.states.data[n[0]].locations.data[n[1]].devName),t=new he({props:u}),z.push(()=>E(t,"value",m));function b(w){n[4](w)}let f={class:"w-1/2",label:"Name",placeholder:"Bedroom (Blindfolded)"};n[2].storage.states.data[n[0]].locations.data[n[1]].name!==void 0&&(f.value=n[2].storage.states.data[n[0]].locations.data[n[1]].name),l=new he({props:f}),z.push(()=>E(l,"value",b));function h(w){n[5](w)}let v={label:"Initially Available"};return n[2].storage.states.data[n[0]].locations.data[n[1]].initial!==void 0&&(v.value=n[2].storage.states.data[n[0]].locations.data[n[1]].initial),_=new ut({props:v}),z.push(()=>E(_,"value",h)),{c(){e=j("div"),a=j("div"),x(t.$$.fragment),r=L(),x(l.$$.fragment),o=L(),d=j("div"),x(_.$$.fragment),i(a,"class","flex flex-row space-x-6"),i(d,"class","flex flex-row space-x-6"),i(e,"class","flex flex-col space-y-2")},m(w,N){C(w,e,N),$(e,a),S(t,a,null),$(a,r),S(l,a,null),$(e,o),$(e,d),S(_,d,null),p=!0},p(w,N){const A={};!s&&N&7&&(s=!0,A.value=w[2].storage.states.data[w[0]].locations.data[w[1]].devName,T(()=>s=!1)),t.$set(A);const D={};!c&&N&7&&(c=!0,D.value=w[2].storage.states.data[w[0]].locations.data[w[1]].name,T(()=>c=!1)),l.$set(D);const R={};!g&&N&7&&(g=!0,R.value=w[2].storage.states.data[w[0]].locations.data[w[1]].initial,T(()=>g=!1)),_.$set(R)},i(w){p||(k(t.$$.fragment,w),k(l.$$.fragment,w),k(_.$$.fragment,w),p=!0)},o(w){I(t.$$.fragment,w),I(l.$$.fragment,w),I(_.$$.fragment,w),p=!1},d(w){w&&y(e),M(t),M(l),M(_)}}}function Fr(n){let e,a,t;return a=new ce({props:{class:"h-full w-full min-h-0 overflow-y-auto",$$slots:{content:[Pr],header:[Wr]},$$scope:{ctx:n}}}),{c(){e=j("div"),x(a.$$.fragment),i(e,"class","grow shrink w-full min-h-0")},m(s,r){C(s,e,r),S(a,e,null),t=!0},p(s,[r]){const l={};r&71&&(l.$$scope={dirty:r,ctx:s}),a.$set(l)},i(s){t||(k(a.$$.fragment,s),t=!0)},o(s){I(a.$$.fragment,s),t=!1},d(s){s&&y(e),M(a)}}}function Vr(n,e,a){let t;ne(n,O,d=>a(2,t=d));let{selectedStateID:s}=e,{selectedMinimapLocationID:r}=e;function l(d){n.$$.not_equal(t.storage.states.data[s].locations.data[r].devName,d)&&(t.storage.states.data[s].locations.data[r].devName=d,O.set(t))}function c(d){n.$$.not_equal(t.storage.states.data[s].locations.data[r].name,d)&&(t.storage.states.data[s].locations.data[r].name=d,O.set(t))}function o(d){n.$$.not_equal(t.storage.states.data[s].locations.data[r].initial,d)&&(t.storage.states.data[s].locations.data[r].initial=d,O.set(t))}return n.$$set=d=>{"selectedStateID"in d&&a(0,s=d.selectedStateID),"selectedMinimapLocationID"in d&&a(1,r=d.selectedMinimapLocationID)},[s,r,t,l,c,o]}class Jr extends Q{constructor(e){super(),K(this,e,Vr,Fr,X,{selectedStateID:0,selectedMinimapLocationID:1})}}function Yr(n){let e,a,t,s=n[1].type==="circle"?"C":"V",r,l,c,o=n[1].devName+"",d,_,g,p,m,u,b,f,h;return{c(){e=j("div"),a=j("div"),t=j("p"),r=Y(s),l=L(),c=j("p"),d=Y(o),_=L(),g=j("div"),p=j("p"),m=Y(n[0]),i(t,"class","text-left font-bold w-4"),i(c,"class","text-left w-11/12 min-w-0 truncate"),i(a,"class","grow flex flex-row items-center space-x-2 h-full"),i(p,"class",u=`text-center font-mono ${n[2]===!0?"text-slate-500":"text-slate-600"}`),i(g,"class","flex flex-row items-center h-full"),i(e,"class",b=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${n[3]} ${n[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)},m(v,w){C(v,e,w),$(e,a),$(a,t),$(t,r),$(a,l),$(a,c),$(c,d),$(e,_),$(e,g),$(g,p),$(p,m),f||(h=ue(e,"click",n[4]),f=!0)},p(v,[w]){w&2&&s!==(s=v[1].type==="circle"?"C":"V")&&Z(r,s),w&2&&o!==(o=v[1].devName+"")&&Z(d,o),w&1&&Z(m,v[0]),w&4&&u!==(u=`text-center font-mono ${v[2]===!0?"text-slate-500":"text-slate-600"}`)&&i(p,"class",u),w&12&&b!==(b=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${v[3]} ${v[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)&&i(e,"class",b)},i:B,o:B,d(v){v&&y(e),f=!1,h()}}}function Gr(n,e,a){let{key:t}=e,{minimapObjectData:s}=e,{selected:r}=e,{class:l}=e;const c=Me();function o(){c("dispatchClick",{key:t})}return n.$$set=d=>{"key"in d&&a(0,t=d.key),"minimapObjectData"in d&&a(1,s=d.minimapObjectData),"selected"in d&&a(2,r=d.selected),"class"in d&&a(3,l=d.class)},[t,s,r,l,o]}class Xr extends Q{constructor(e){super(),K(this,e,Gr,Yr,X,{key:0,minimapObjectData:1,selected:2,class:3})}}function Kr(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M12 4v16m8-8H4"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Qr(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Zr(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function eo(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M5 15l7-7 7 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function to(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 9l-7 7-7-7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function ao(n){let e,a,t,s,r,l,c,o,d,_,g,p,m,u,b;return r=new J({props:{onclick:n[2],$$slots:{default:[Kr]},$$scope:{ctx:n}}}),c=new J({props:{onclick:n[3],$$slots:{default:[Qr]},$$scope:{ctx:n}}}),d=new J({props:{onclick:n[4],$$slots:{default:[Zr]},$$scope:{ctx:n}}}),p=new J({props:{onclick:n[5],$$slots:{default:[eo]},$$scope:{ctx:n}}}),u=new J({props:{onclick:n[6],$$slots:{default:[to]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Minimap Objects",a=L(),t=j("div"),s=j("div"),x(r.$$.fragment),l=L(),x(c.$$.fragment),o=L(),x(d.$$.fragment),_=L(),g=j("div"),x(p.$$.fragment),m=L(),x(u.$$.fragment),i(e,"class","text-slate-300 text-xl align-middle"),i(s,"class","flex flex-row space-x-1"),i(g,"class","flex flex-row space-x-1"),i(t,"class","flex flex-row space-x-4")},m(f,h){C(f,e,h),C(f,a,h),C(f,t,h),$(t,s),S(r,s,null),$(s,l),S(c,s,null),$(s,o),S(d,s,null),$(t,_),$(t,g),S(p,g,null),$(g,m),S(u,g,null),b=!0},p(f,h){const v={};h&4096&&(v.$$scope={dirty:h,ctx:f}),r.$set(v);const w={};h&4096&&(w.$$scope={dirty:h,ctx:f}),c.$set(w);const N={};h&4096&&(N.$$scope={dirty:h,ctx:f}),d.$set(N);const A={};h&4096&&(A.$$scope={dirty:h,ctx:f}),p.$set(A);const D={};h&4096&&(D.$$scope={dirty:h,ctx:f}),u.$set(D)},i(f){b||(k(r.$$.fragment,f),k(c.$$.fragment,f),k(d.$$.fragment,f),k(p.$$.fragment,f),k(u.$$.fragment,f),b=!0)},o(f){I(r.$$.fragment,f),I(c.$$.fragment,f),I(d.$$.fragment,f),I(p.$$.fragment,f),I(u.$$.fragment,f),b=!1},d(f){f&&y(e),f&&y(a),f&&y(t),M(r),M(c),M(d),M(p),M(u)}}}function no(n){let e,a,t;function s(l){n[10](l)}let r={deselectable:!0,scrollingRadioData:n[1]};return n[0]!==void 0&&(r.selectedID=n[0]),e=new Ae({props:r}),z.push(()=>E(e,"selectedID",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&2&&(o.scrollingRadioData=l[1]),!a&&c&1&&(a=!0,o.selectedID=l[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function so(n){let e,a;return e=new ce({props:{class:`shrink\r
    w-full h-full min-h-0`,contentClass:`scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden\r
        pr-4 mr-1`,$$slots:{content:[no],header:[ao]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&4099&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function lo(n,e,a){let t;ne(n,O,b=>a(9,t=b));let{selectedStateID:s}=e,{selectedMinimapLocationID:r}=e,{selectedMinimapObjectID:l}=e,c;function o(){return t.storage.states.data[s].locations.data[r].minimapObjects.ordering.filter(b=>b!==void 0).map(b=>{const f=t.storage.states.data[s].locations.data[r].minimapObjects.data[b];return{key:f.id,component:Xr,props:{minimapObjectData:f}}})}function d(){const b=we($e);F(O,t.storage.states.data[s].locations.data[r].minimapObjects.data[b]={id:b,devName:"",type:"circle",args:[],object:"",dialog:""},t),t.storage.states.data[s].locations.data[r].minimapObjects.ordering.push(b),O.set(t)}function _(){if(l!==void 0){const b=t.storage.states.data[s].locations.data[r].minimapObjects.ordering.indexOf(l),f=t.storage.states.data[s].locations.data[r].minimapObjects.data[l],h=JSON.parse(JSON.stringify(f)),v=we($e);h.id=v,F(O,t.storage.states.data[s].locations.data[r].minimapObjects.data[v]=h,t),t.storage.states.data[s].locations.data[r].minimapObjects.ordering.splice(b+1,0,v),O.set(t),a(0,l=v)}}function g(){var b,f;if(l!==void 0){const h=l;a(0,l=void 0);const v=t.storage.states.data[s].locations.data[r].minimapObjects.ordering,w=v.findIndex(N=>N===h);for(let N=w;N<v.length-1;N++)v[N]=(b=v[N+1])!=null?b:void 0;v.pop(),a(0,l=(f=v[w])!=null?f:v[w-1]),delete t.storage.states.data[s].locations.data[r].minimapObjects.data[h],O.set(t)}}function p(){if(l!==void 0&&t.storage.states.data[s].locations.data[r].minimapObjects.ordering.length>1){const b=t.storage.states.data[s].locations.data[r].minimapObjects.ordering,f=b.findIndex(v=>v===l);if(f<=0)return;const h=b[f];b[f]=b[f-1],b[f-1]=h,O.set(t)}}function m(){if(l!==void 0&&t.storage.states.data[s].locations.data[r].minimapObjects.ordering.length>1){const b=t.storage.states.data[s].locations.data[r].minimapObjects.ordering,f=b.findIndex(v=>v===l);if(f===-1||f===t.storage.states.data[s].locations.data[r].minimapObjects.ordering.length-1)return;const h=b[f];b[f]=b[f+1],b[f+1]=h,O.set(t)}}function u(b){l=b,a(0,l)}return n.$$set=b=>{"selectedStateID"in b&&a(7,s=b.selectedStateID),"selectedMinimapLocationID"in b&&a(8,r=b.selectedMinimapLocationID),"selectedMinimapObjectID"in b&&a(0,l=b.selectedMinimapObjectID)},n.$$.update=()=>{n.$$.dirty&896&&(t.storage.states,t.storage.states.data[s].locations,t.storage.states.data[s].locations.data[r].minimapObjects,a(1,c=o()))},[l,c,d,_,g,p,m,s,r,t,u]}class ro extends Q{constructor(e){super(),K(this,e,lo,so,X,{selectedStateID:7,selectedMinimapLocationID:8,selectedMinimapObjectID:0})}}function oo(n){let e,a,t,s,r,l,c,o,d,_,g,p;function m(v){n[6](v)}let u={selectedStateID:n[1]};n[0]!==void 0&&(u.selectedMinimapLocationID=n[0]),s=new Ur({props:u}),z.push(()=>E(s,"selectedMinimapLocationID",m));let b=n[0]!==void 0&&aa(n),f=n[0]!==void 0&&na(n),h=n[0]!==void 0&&sa(n);return{c(){e=j("div"),a=j("div"),t=j("div"),x(s.$$.fragment),l=L(),c=j("div"),b&&b.c(),o=L(),d=j("div"),f&&f.c(),_=L(),g=j("div"),h&&h.c(),i(t,"class","flex flex-col h-1/4 w-full"),_e(t,"min-height","25%"),i(c,"class","flex flex-col w-full"),i(d,"class","flex flex-col grow w-full min-h-0"),i(a,"class","flex flex-col space-y-4 h-full"),_e(a,"width","30%"),i(g,"class","grow flex flex-col space-y-4 h-full"),i(e,"class","flex flex-row space-x-4 h-full w-full")},m(v,w){C(v,e,w),$(e,a),$(a,t),S(s,t,null),$(a,l),$(a,c),b&&b.m(c,null),$(a,o),$(a,d),f&&f.m(d,null),$(e,_),$(e,g),h&&h.m(g,null),p=!0},p(v,w){const N={};w&2&&(N.selectedStateID=v[1]),!r&&w&1&&(r=!0,N.selectedMinimapLocationID=v[0],T(()=>r=!1)),s.$set(N),v[0]!==void 0?b?(b.p(v,w),w&1&&k(b,1)):(b=aa(v),b.c(),k(b,1),b.m(c,null)):b&&(se(),I(b,1,1,()=>{b=null}),le()),v[0]!==void 0?f?(f.p(v,w),w&1&&k(f,1)):(f=na(v),f.c(),k(f,1),f.m(d,null)):f&&(se(),I(f,1,1,()=>{f=null}),le()),v[0]!==void 0?h?(h.p(v,w),w&1&&k(h,1)):(h=sa(v),h.c(),k(h,1),h.m(g,null)):h&&(se(),I(h,1,1,()=>{h=null}),le())},i(v){p||(k(s.$$.fragment,v),k(b),k(f),k(h),p=!0)},o(v){I(s.$$.fragment,v),I(b),I(f),I(h),p=!1},d(v){v&&y(e),M(s),b&&b.d(),f&&f.d(),h&&h.d()}}}function io(n){let e,a,t,s=n[3].storage.states.data[n[1]].type+"",r,l,c,o;return{c(){e=j("div"),a=j("p"),t=Y("Cannot setup minimap for "),r=Y(s),l=Y(" state"),c=L(),o=j("p"),o.textContent="Select another state from [States]",i(a,"class","text-2xl text-slate-300"),i(o,"class","text-2xl text-slate-300"),i(e,"class","flex flex-col justify-center w-full h-full")},m(d,_){C(d,e,_),$(e,a),$(a,t),$(a,r),$(a,l),$(e,c),$(e,o)},p(d,_){_&10&&s!==(s=d[3].storage.states.data[d[1]].type+"")&&Z(r,s)},i:B,o:B,d(d){d&&y(e)}}}function co(n){let e;return{c(){e=j("div"),e.innerHTML='<p class="text-2xl text-slate-300">Select a state from [States] first</p>',i(e,"class","flex flex-col justify-center w-full h-full")},m(a,t){C(a,e,t)},p:B,i:B,o:B,d(a){a&&y(e)}}}function aa(n){let e,a;return e=new Jr({props:{selectedStateID:n[1],selectedMinimapLocationID:n[0]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&2&&(r.selectedStateID=t[1]),s&1&&(r.selectedMinimapLocationID=t[0]),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function na(n){let e,a,t;function s(l){n[7](l)}let r={selectedStateID:n[1],selectedMinimapLocationID:n[0]};return n[2]!==void 0&&(r.selectedMinimapObjectID=n[2]),e=new ro({props:r}),z.push(()=>E(e,"selectedMinimapObjectID",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&2&&(o.selectedStateID=l[1]),c&1&&(o.selectedMinimapLocationID=l[0]),!a&&c&4&&(a=!0,o.selectedMinimapObjectID=l[2],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function sa(n){let e,a;return e=new Mr({props:{selectedStateID:n[1],selectedMinimapLocationID:n[0],selectedMinimapObjectID:n[2]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&2&&(r.selectedStateID=t[1]),s&1&&(r.selectedMinimapLocationID=t[0]),s&4&&(r.selectedMinimapObjectID=t[2]),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function fo(n){let e,a,t,s;const r=[co,io,oo],l=[];function c(o,d){return o[1]===void 0?0:o[3].storage.states.data[o[1]].type==="opening"||o[3].storage.states.data[o[1]].type==="intermediate"||o[3].storage.states.data[o[1]].type==="ending"?1:2}return e=c(n),a=l[e]=r[e](n),{c(){a.c(),t=Ce()},m(o,d){l[e].m(o,d),C(o,t,d),s=!0},p(o,[d]){let _=e;e=c(o),e===_?l[e].p(o,d):(se(),I(l[_],1,1,()=>{l[_]=null}),le(),a=l[e],a?a.p(o,d):(a=l[e]=r[e](o),a.c()),k(a,1),a.m(t.parentNode,t))},i(o){s||(k(a),s=!0)},o(o){I(a),s=!1},d(o){l[e].d(o),o&&y(t)}}}function uo(n,e,a){let t,s;ne(n,Ze,g=>a(1,t=g)),ne(n,O,g=>a(3,s=g));let r,l,c,o;function d(g){l=g,a(0,l),a(4,c),a(5,o),a(1,t)}function _(g){r=g,a(2,r),a(4,c),a(5,o),a(1,t),a(0,l)}return n.$$.update=()=>{n.$$.dirty&51&&(c!==t&&(a(0,l=void 0),a(2,r=void 0),a(4,c=t)),o!==l&&(a(2,r=void 0),a(5,o=l)))},[l,t,r,s,c,o,d,_]}class go extends Q{constructor(e){super(),K(this,e,uo,fo,X,{})}}function po(n){let e,a,t,s=n[1].devName+"",r,l,c,o,d,_,g,p,m,u,b,f,h;return{c(){e=j("div"),a=j("div"),t=j("p"),r=Y(s),l=L(),c=j("p"),o=Y(n[4]),_=L(),g=j("div"),p=j("p"),m=Y(n[0]),i(t,"class","h-6 text-left w-full min-w-0 truncate"),i(c,"class",d=`h-5 text-sm ${n[2]===!0?"text-slate-400":"text-slate-500"}`),i(a,"class","flex flex-col items-start w-9/12"),i(p,"class",u=`text-center font-mono ${n[2]===!0?"text-slate-500":"text-slate-600"}`),i(g,"class","flex flex-row items-center h-full"),i(e,"class",b=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${n[3]} ${n[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)},m(v,w){C(v,e,w),$(e,a),$(a,t),$(t,r),$(a,l),$(a,c),$(c,o),$(e,_),$(e,g),$(g,p),$(p,m),f||(h=ue(e,"click",n[5]),f=!0)},p(v,[w]){w&2&&s!==(s=v[1].devName+"")&&Z(r,s),w&16&&Z(o,v[4]),w&4&&d!==(d=`h-5 text-sm ${v[2]===!0?"text-slate-400":"text-slate-500"}`)&&i(c,"class",d),w&1&&Z(m,v[0]),w&4&&u!==(u=`text-center font-mono ${v[2]===!0?"text-slate-500":"text-slate-600"}`)&&i(p,"class",u),w&12&&b!==(b=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${v[3]} ${v[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)&&i(e,"class",b)},i:B,o:B,d(v){v&&y(e),f=!1,h()}}}function mo(n,e,a){let t;ne(n,O,g=>a(6,t=g));let{key:s}=e,{restraintData:r}=e,{selected:l}=e,{class:c}=e;const o=Me();function d(){o("dispatchClick",{key:s})}let _="";return n.$$set=g=>{"key"in g&&a(0,s=g.key),"restraintData"in g&&a(1,r=g.restraintData),"selected"in g&&a(2,l=g.selected),"class"in g&&a(3,c=g.class)},n.$$.update=()=>{if(n.$$.dirty&66){t.data.restraintLocations,t.storage.restraints;const g=t.data.restraintLocations.data[r.location];a(4,_=g!==void 0?g.name:"")}},[s,r,l,c,_,d,t]}class bo extends Q{constructor(e){super(),K(this,e,mo,po,X,{key:0,restraintData:1,selected:2,class:3})}}function ho(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M12 4v16m8-8H4"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function _o(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function wo(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function $o(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M5 15l7-7 7 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function vo(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 9l-7 7-7-7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function ko(n){let e,a,t,s,r,l,c,o,d,_,g,p,m,u,b;return r=new J({props:{onclick:n[2],$$slots:{default:[ho]},$$scope:{ctx:n}}}),c=new J({props:{onclick:n[3],$$slots:{default:[_o]},$$scope:{ctx:n}}}),d=new J({props:{onclick:n[4],$$slots:{default:[wo]},$$scope:{ctx:n}}}),p=new J({props:{onclick:n[5],$$slots:{default:[$o]},$$scope:{ctx:n}}}),u=new J({props:{onclick:n[6],$$slots:{default:[vo]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Game Restraints",a=L(),t=j("div"),s=j("div"),x(r.$$.fragment),l=L(),x(c.$$.fragment),o=L(),x(d.$$.fragment),_=L(),g=j("div"),x(p.$$.fragment),m=L(),x(u.$$.fragment),i(e,"class","text-slate-300 text-xl align-middle"),i(s,"class","flex flex-row space-x-1"),i(g,"class","flex flex-row space-x-1"),i(t,"class","flex flex-row space-x-4")},m(f,h){C(f,e,h),C(f,a,h),C(f,t,h),$(t,s),S(r,s,null),$(s,l),S(c,s,null),$(s,o),S(d,s,null),$(t,_),$(t,g),S(p,g,null),$(g,m),S(u,g,null),b=!0},p(f,h){const v={};h&1024&&(v.$$scope={dirty:h,ctx:f}),r.$set(v);const w={};h&1024&&(w.$$scope={dirty:h,ctx:f}),c.$set(w);const N={};h&1024&&(N.$$scope={dirty:h,ctx:f}),d.$set(N);const A={};h&1024&&(A.$$scope={dirty:h,ctx:f}),p.$set(A);const D={};h&1024&&(D.$$scope={dirty:h,ctx:f}),u.$set(D)},i(f){b||(k(r.$$.fragment,f),k(c.$$.fragment,f),k(d.$$.fragment,f),k(p.$$.fragment,f),k(u.$$.fragment,f),b=!0)},o(f){I(r.$$.fragment,f),I(c.$$.fragment,f),I(d.$$.fragment,f),I(p.$$.fragment,f),I(u.$$.fragment,f),b=!1},d(f){f&&y(e),f&&y(a),f&&y(t),M(r),M(c),M(d),M(p),M(u)}}}function Do(n){let e,a,t;function s(l){n[8](l)}let r={deselectable:!0,scrollingRadioData:n[1]};return n[0]!==void 0&&(r.selectedID=n[0]),e=new Ae({props:r}),z.push(()=>E(e,"selectedID",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&2&&(o.scrollingRadioData=l[1]),!a&&c&1&&(a=!0,o.selectedID=l[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Io(n){let e,a;return e=new ce({props:{class:`shrink\r
    w-full h-full min-h-0`,contentClass:`scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden\r
        pr-4 mr-1`,$$slots:{content:[Do],header:[ko]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&1027&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function jo(n,e,a){let t;ne(n,O,m=>a(7,t=m));let{selectedRestraintID:s}=e,r;function l(){return t.storage.restraints.ordering.filter(m=>m!==void 0).map(m=>{const u=t.storage.restraints.data[m];return{key:u.id,component:bo,props:{restraintData:u}}})}function c(){const m=we($e);F(O,t.storage.restraints.data[m]={id:m,devName:"",name:"",location:"",examine:""},t),t.storage.restraints.ordering.push(m),O.set(t)}function o(){if(s!==void 0){const m=t.storage.restraints.ordering.indexOf(s),u=t.storage.restraints.data[s],b=JSON.parse(JSON.stringify(u)),f=we($e);b.id=f,F(O,t.storage.restraints.data[f]=b,t),t.storage.restraints.ordering.splice(m+1,0,f),O.set(t),a(0,s=f)}}function d(){var m,u;if(s!==void 0){const b=s;a(0,s=void 0);const f=t.storage.restraints.ordering,h=f.findIndex(v=>v===b);for(let v=h;v<f.length-1;v++)f[v]=(m=f[v+1])!=null?m:void 0;f.pop(),a(0,s=(u=f[h])!=null?u:f[h-1]),delete t.storage.restraints.data[b],O.set(t)}}function _(){if(s!==void 0&&t.storage.restraints.ordering.length>1){const m=t.storage.restraints.ordering,u=m.findIndex(f=>f===s);if(u<=0)return;const b=m[u];m[u]=m[u-1],m[u-1]=b,O.set(t)}}function g(){if(s!==void 0&&t.storage.restraints.ordering.length>1){const m=t.storage.restraints.ordering,u=m.findIndex(f=>f===s);if(u===-1||u===t.storage.restraints.ordering.length-1)return;const b=m[u];m[u]=m[u+1],m[u+1]=b,O.set(t)}}function p(m){s=m,a(0,s)}return n.$$set=m=>{"selectedRestraintID"in m&&a(0,s=m.selectedRestraintID)},n.$$.update=()=>{n.$$.dirty&128&&(t.storage.restraints,a(1,r=l()))},[s,r,c,o,d,_,g,t,p]}class yo extends Q{constructor(e){super(),K(this,e,jo,Io,X,{selectedRestraintID:0})}}function Co(n){let e;return{c(){e=j("p"),e.textContent="Selected Restraint Location",i(e,"class","text-slate-300 text-xl")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function So(n){let e,a,t,s,r,l;function c(g){n[3](g)}let o={class:"w-3/4",label:"Name",placeholder:"Head"};n[1].data.restraintLocations.data[n[0]].name!==void 0&&(o.value=n[1].data.restraintLocations.data[n[0]].name),e=new he({props:o}),z.push(()=>E(e,"value",c));function d(g){n[4](g)}let _={class:"w-3/4",label:"Initial Restraint",choicesData:n[2]};return n[1].data.restraintLocations.data[n[0]].initial!==void 0&&(_.selected=n[1].data.restraintLocations.data[n[0]].initial),s=new ve({props:_}),z.push(()=>E(s,"selected",d)),{c(){x(e.$$.fragment),t=L(),x(s.$$.fragment)},m(g,p){S(e,g,p),C(g,t,p),S(s,g,p),l=!0},p(g,p){const m={};!a&&p&3&&(a=!0,m.value=g[1].data.restraintLocations.data[g[0]].name,T(()=>a=!1)),e.$set(m);const u={};p&4&&(u.choicesData=g[2]),!r&&p&3&&(r=!0,u.selected=g[1].data.restraintLocations.data[g[0]].initial,T(()=>r=!1)),s.$set(u)},i(g){l||(k(e.$$.fragment,g),k(s.$$.fragment,g),l=!0)},o(g){I(e.$$.fragment,g),I(s.$$.fragment,g),l=!1},d(g){M(e,g),g&&y(t),M(s,g)}}}function Mo(n){let e,a;return e=new ce({props:{class:`grow shrink\r
    w-full min-h-0`,contentClass:`scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden\r
        pr-4 mr-1`,$$slots:{content:[So],header:[Co]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&39&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function xo(n,e,a){let t;ne(n,O,o=>a(1,t=o));let{selectedLocationID:s}=e,r=[];function l(o){n.$$.not_equal(t.data.restraintLocations.data[s].name,o)&&(t.data.restraintLocations.data[s].name=o,O.set(t))}function c(o){n.$$.not_equal(t.data.restraintLocations.data[s].initial,o)&&(t.data.restraintLocations.data[s].initial=o,O.set(t))}return n.$$set=o=>{"selectedLocationID"in o&&a(0,s=o.selectedLocationID)},n.$$.update=()=>{n.$$.dirty&3&&(t.storage.restraints,a(2,r=[{key:"",display:"",enabled:!0},...t.storage.restraints.ordering.filter(o=>t.storage.restraints.data[o].location===s).map(o=>{const d=t.storage.restraints.data[o];return{key:d.id,display:d.devName,enabled:!0}})]))},[s,t,r,l,c]}class Lo extends Q{constructor(e){super(),K(this,e,xo,Mo,X,{selectedLocationID:0})}}function Oo(n){let e,a,t,s=n[1].name+"",r,l,c,o,d,_,g,p,m,u,b,f,h;return{c(){e=j("div"),a=j("div"),t=j("p"),r=Y(s),l=L(),c=j("p"),o=Y(n[4]),_=L(),g=j("div"),p=j("p"),m=Y(n[0]),i(t,"class","h-6 text-left w-full min-w-0 truncate"),i(c,"class",d=`h-5 text-sm ${n[2]===!0?"text-slate-400":"text-slate-500"}`),i(a,"class","flex flex-col items-start w-9/12"),i(p,"class",u=`font-mono ${n[2]===!0?"text-slate-500":"text-slate-600"}`),i(g,"class","flex flex-row items-center h-full"),i(e,"class",b=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${n[3]} ${n[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)},m(v,w){C(v,e,w),$(e,a),$(a,t),$(t,r),$(a,l),$(a,c),$(c,o),$(e,_),$(e,g),$(g,p),$(p,m),f||(h=ue(e,"click",n[5]),f=!0)},p(v,[w]){w&2&&s!==(s=v[1].name+"")&&Z(r,s),w&16&&Z(o,v[4]),w&4&&d!==(d=`h-5 text-sm ${v[2]===!0?"text-slate-400":"text-slate-500"}`)&&i(c,"class",d),w&1&&Z(m,v[0]),w&4&&u!==(u=`font-mono ${v[2]===!0?"text-slate-500":"text-slate-600"}`)&&i(p,"class",u),w&12&&b!==(b=`flex flex-row justify-between space-x-1
    rounded border 
    p-2 pl-4 pr-4
    ${v[3]} ${v[2]===!0?"text-slate-200 bg-slate-700 border-slate-600":"text-slate-400 bg-slate-750 border-slate-700"}`)&&i(e,"class",b)},i:B,o:B,d(v){v&&y(e),f=!1,h()}}}function Ro(n,e,a){let t;ne(n,O,g=>a(6,t=g));let{key:s}=e,{locationData:r}=e,{selected:l}=e,{class:c}=e;const o=Me();function d(){o("dispatchClick",{key:s})}let _="";return n.$$set=g=>{"key"in g&&a(0,s=g.key),"locationData"in g&&a(1,r=g.locationData),"selected"in g&&a(2,l=g.selected),"class"in g&&a(3,c=g.class)},n.$$.update=()=>{if(n.$$.dirty&66){t.storage.restraints;const g=t.storage.restraints.data[r.initial];a(4,_=g!==void 0?g.name:"")}},[s,r,l,c,_,d,t]}class No extends Q{constructor(e){super(),K(this,e,Ro,Oo,X,{key:0,locationData:1,selected:2,class:3})}}function Ao(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M12 4v16m8-8H4"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Bo(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function Ho(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M5 15l7-7 7 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function qo(n){let e,a;return{c(){e=H("svg"),a=H("path"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"d","M19 9l-7 7-7-7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(e,"stroke-width","2")},m(t,s){C(t,e,s),$(e,a)},p:B,d(t){t&&y(e)}}}function zo(n){let e,a,t,s,r,l,c,o,d,_,g,p,m;return r=new J({props:{onclick:n[2],$$slots:{default:[Ao]},$$scope:{ctx:n}}}),c=new J({props:{onclick:n[3],$$slots:{default:[Bo]},$$scope:{ctx:n}}}),_=new J({props:{onclick:n[4],$$slots:{default:[Ho]},$$scope:{ctx:n}}}),p=new J({props:{onclick:n[5],$$slots:{default:[qo]},$$scope:{ctx:n}}}),{c(){e=j("p"),e.textContent="Restraint Locations",a=L(),t=j("div"),s=j("div"),x(r.$$.fragment),l=L(),x(c.$$.fragment),o=L(),d=j("div"),x(_.$$.fragment),g=L(),x(p.$$.fragment),i(e,"class","text-slate-300 text-xl align-middle"),i(s,"class","flex flex-row space-x-1"),i(d,"class","flex flex-row space-x-1"),i(t,"class","flex flex-row space-x-4")},m(u,b){C(u,e,b),C(u,a,b),C(u,t,b),$(t,s),S(r,s,null),$(s,l),S(c,s,null),$(t,o),$(t,d),S(_,d,null),$(d,g),S(p,d,null),m=!0},p(u,b){const f={};b&512&&(f.$$scope={dirty:b,ctx:u}),r.$set(f);const h={};b&512&&(h.$$scope={dirty:b,ctx:u}),c.$set(h);const v={};b&512&&(v.$$scope={dirty:b,ctx:u}),_.$set(v);const w={};b&512&&(w.$$scope={dirty:b,ctx:u}),p.$set(w)},i(u){m||(k(r.$$.fragment,u),k(c.$$.fragment,u),k(_.$$.fragment,u),k(p.$$.fragment,u),m=!0)},o(u){I(r.$$.fragment,u),I(c.$$.fragment,u),I(_.$$.fragment,u),I(p.$$.fragment,u),m=!1},d(u){u&&y(e),u&&y(a),u&&y(t),M(r),M(c),M(_),M(p)}}}function To(n){let e,a,t;function s(l){n[7](l)}let r={deselectable:!0,scrollingRadioData:n[1]};return n[0]!==void 0&&(r.selectedID=n[0]),e=new Ae({props:r}),z.push(()=>E(e,"selectedID",s)),{c(){x(e.$$.fragment)},m(l,c){S(e,l,c),t=!0},p(l,c){const o={};c&2&&(o.scrollingRadioData=l[1]),!a&&c&1&&(a=!0,o.selectedID=l[0],T(()=>a=!1)),e.$set(o)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Eo(n){let e,a;return e=new ce({props:{class:`shrink\r
    w-full h-3/5 min-h-0`,contentClass:`scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden\r
        pr-4 mr-1`,$$slots:{content:[To],header:[zo]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&515&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Uo(n,e,a){let t;ne(n,O,p=>a(6,t=p));let{selectedLocationID:s}=e,r;function l(){return t.data.restraintLocations.ordering.filter(p=>p!==void 0).map(p=>{const m=t.data.restraintLocations.data[p];return{key:m.id,component:No,props:{locationData:m}}})}function c(){const p=we($e);F(O,t.data.restraintLocations.data[p]={id:p,name:"",initial:""},t),t.data.restraintLocations.ordering.push(p),O.set(t)}function o(){var p,m;if(s!==void 0){const u=s;a(0,s=void 0);const b=t.data.restraintLocations.ordering,f=b.findIndex(h=>h===u);for(let h=f;h<b.length-1;h++)b[h]=(p=b[h+1])!=null?p:void 0;b.pop(),a(0,s=(m=b[f])!=null?m:b[f-1]),delete t.data.restraintLocations.data[u],O.set(t)}}function d(){if(s!==void 0&&t.data.restraintLocations.ordering.length>1){const p=t.data.restraintLocations.ordering,m=p.findIndex(b=>b===s);if(m<=0)return;const u=p[m];p[m]=p[m-1],p[m-1]=u,O.set(t)}}function _(){if(s!==void 0&&t.data.restraintLocations.ordering.length>1){const p=t.data.restraintLocations.ordering,m=p.findIndex(b=>b===s);if(m===-1||m===t.data.restraintLocations.ordering.length-1)return;const u=p[m];p[m]=p[m+1],p[m+1]=u,O.set(t)}}function g(p){s=p,a(0,s)}return n.$$set=p=>{"selectedLocationID"in p&&a(0,s=p.selectedLocationID)},n.$$.update=()=>{n.$$.dirty&64&&(t.data.restraintLocations,a(1,r=l()))},[s,r,c,o,d,_,t,g]}class Wo extends Q{constructor(e){super(),K(this,e,Uo,Eo,X,{selectedLocationID:0})}}function Po(n){let e;return{c(){e=j("p"),e.textContent="Selected Restraint",i(e,"class","text-slate-300 text-xl")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function Fo(n){let e,a,t,s,r,l,c,o,d,_,g,p,m;function u(D){n[4](D)}let b={class:"w-full",label:"Development Name",placeholder:"Leather Armbinder (underneath: handcuffs)"};n[1].storage.restraints.data[n[0]].devName!==void 0&&(b.value=n[1].storage.restraints.data[n[0]].devName),e=new he({props:b}),z.push(()=>E(e,"value",u));function f(D){n[5](D)}let h={class:"w-3/4",label:"Name",placeholder:"Leather Armbinder"};n[1].storage.restraints.data[n[0]].name!==void 0&&(h.value=n[1].storage.restraints.data[n[0]].name),r=new he({props:h}),z.push(()=>E(r,"value",f));function v(D){n[6](D)}let w={class:"w-1/4",label:"Location",disabled:n[2],choicesData:n[3]};n[1].storage.restraints.data[n[0]].location!==void 0&&(w.selected=n[1].storage.restraints.data[n[0]].location),o=new ve({props:w}),z.push(()=>E(o,"selected",v));function N(D){n[7](D)}let A={class:"w-full",label:"Examine Description",placeholder:"A pair of cold, steel handcuffs biting into your wrists.",rows:6};return n[1].storage.restraints.data[n[0]].examine!==void 0&&(A.value=n[1].storage.restraints.data[n[0]].examine),g=new Ue({props:A}),z.push(()=>E(g,"value",N)),{c(){x(e.$$.fragment),t=L(),s=j("div"),x(r.$$.fragment),c=L(),x(o.$$.fragment),_=L(),x(g.$$.fragment),i(s,"class","flex flex-row space-x-6")},m(D,R){S(e,D,R),C(D,t,R),C(D,s,R),S(r,s,null),$(s,c),S(o,s,null),C(D,_,R),S(g,D,R),m=!0},p(D,R){const P={};!a&&R&3&&(a=!0,P.value=D[1].storage.restraints.data[D[0]].devName,T(()=>a=!1)),e.$set(P);const ee={};!l&&R&3&&(l=!0,ee.value=D[1].storage.restraints.data[D[0]].name,T(()=>l=!1)),r.$set(ee);const fe={};R&4&&(fe.disabled=D[2]),R&8&&(fe.choicesData=D[3]),!d&&R&3&&(d=!0,fe.selected=D[1].storage.restraints.data[D[0]].location,T(()=>d=!1)),o.$set(fe);const ge={};!p&&R&3&&(p=!0,ge.value=D[1].storage.restraints.data[D[0]].examine,T(()=>p=!1)),g.$set(ge)},i(D){m||(k(e.$$.fragment,D),k(r.$$.fragment,D),k(o.$$.fragment,D),k(g.$$.fragment,D),m=!0)},o(D){I(e.$$.fragment,D),I(r.$$.fragment,D),I(o.$$.fragment,D),I(g.$$.fragment,D),m=!1},d(D){M(e,D),D&&y(t),D&&y(s),M(r),M(o),D&&y(_),M(g,D)}}}function Vo(n){let e,a;return e=new ce({props:{class:"h-full w-full min-h-0 overlfow-y-auto",$$slots:{content:[Fo],header:[Po]},$$scope:{ctx:n}}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,[s]){const r={};s&271&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Jo(n,e,a){let t;ne(n,O,g=>a(1,t=g));let{selectedRestraintID:s}=e,r=!1,l=[];function c(g){n.$$.not_equal(t.storage.restraints.data[s].devName,g)&&(t.storage.restraints.data[s].devName=g,O.set(t))}function o(g){n.$$.not_equal(t.storage.restraints.data[s].name,g)&&(t.storage.restraints.data[s].name=g,O.set(t))}function d(g){n.$$.not_equal(t.storage.restraints.data[s].location,g)&&(t.storage.restraints.data[s].location=g,O.set(t))}function _(g){n.$$.not_equal(t.storage.restraints.data[s].examine,g)&&(t.storage.restraints.data[s].examine=g,O.set(t))}return n.$$set=g=>{"selectedRestraintID"in g&&a(0,s=g.selectedRestraintID)},n.$$.update=()=>{n.$$.dirty&2&&(t.data.restraintLocations,a(2,r=Object.values(t.data.restraintLocations.data).length===0),a(3,l=t.data.restraintLocations.ordering.map(g=>{const p=t.data.restraintLocations.data[g];return{key:p.id,display:p.name,enabled:!0}})))},[s,t,r,l,c,o,d,_]}class Yo extends Q{constructor(e){super(),K(this,e,Jo,Vo,X,{selectedRestraintID:0})}}function la(n){let e,a;return e=new Lo({props:{selectedLocationID:n[0]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&1&&(r.selectedLocationID=t[0]),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function ra(n){let e,a;return e=new Yo({props:{selectedRestraintID:n[1]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s&2&&(r.selectedRestraintID=t[1]),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Go(n){let e,a,t,s,r,l,c,o,d,_,g,p;function m(w){n[2](w)}let u={};n[0]!==void 0&&(u.selectedLocationID=n[0]),t=new Wo({props:u}),z.push(()=>E(t,"selectedLocationID",m));let b=n[0]!==void 0&&la(n);function f(w){n[3](w)}let h={};n[1]!==void 0&&(h.selectedRestraintID=n[1]),o=new yo({props:h}),z.push(()=>E(o,"selectedRestraintID",f));let v=n[1]!==void 0&&ra(n);return{c(){e=j("div"),a=j("div"),x(t.$$.fragment),r=L(),b&&b.c(),l=L(),c=j("div"),x(o.$$.fragment),_=L(),g=j("div"),v&&v.c(),i(a,"class","flex flex-col space-y-4 h-full"),_e(a,"width","30%"),i(c,"class","flex flex-col space-y-4 h-full"),_e(c,"width","30%"),i(g,"class","grow flex flex-col space-y-4 h-full"),i(e,"class","flex flex-row space-x-4 h-full w-full")},m(w,N){C(w,e,N),$(e,a),S(t,a,null),$(a,r),b&&b.m(a,null),$(e,l),$(e,c),S(o,c,null),$(e,_),$(e,g),v&&v.m(g,null),p=!0},p(w,[N]){const A={};!s&&N&1&&(s=!0,A.selectedLocationID=w[0],T(()=>s=!1)),t.$set(A),w[0]!==void 0?b?(b.p(w,N),N&1&&k(b,1)):(b=la(w),b.c(),k(b,1),b.m(a,null)):b&&(se(),I(b,1,1,()=>{b=null}),le());const D={};!d&&N&2&&(d=!0,D.selectedRestraintID=w[1],T(()=>d=!1)),o.$set(D),w[1]!==void 0?v?(v.p(w,N),N&2&&k(v,1)):(v=ra(w),v.c(),k(v,1),v.m(g,null)):v&&(se(),I(v,1,1,()=>{v=null}),le())},i(w){p||(k(t.$$.fragment,w),k(b),k(o.$$.fragment,w),k(v),p=!0)},o(w){I(t.$$.fragment,w),I(b),I(o.$$.fragment,w),I(v),p=!1},d(w){w&&y(e),M(t),b&&b.d(),M(o),v&&v.d()}}}function Xo(n,e,a){let t,s;function r(c){t=c,a(0,t)}function l(c){s=c,a(1,s)}return[t,s,r,l]}class Ko extends Q{constructor(e){super(),K(this,e,Xo,Go,X,{})}}function oa(n,e,a){const t=n.slice();return t[3]=e[a],t}function ia(n){let e,a=n[3]+"",t;return{c(){e=j("p"),t=Y(a),i(e,"class",n[0])},m(s,r){C(s,e,r),$(e,t)},p(s,r){r&2&&a!==(a=s[3]+"")&&Z(t,a),r&1&&i(e,"class",s[0])},d(s){s&&y(e)}}}function Qo(n){let e,a=n[1],t=[];for(let s=0;s<a.length;s+=1)t[s]=ia(oa(n,a,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=Ce()},m(s,r){for(let l=0;l<t.length;l+=1)t[l].m(s,r);C(s,e,r)},p(s,[r]){if(r&3){a=s[1];let l;for(l=0;l<a.length;l+=1){const c=oa(s,a,l);t[l]?t[l].p(c,r):(t[l]=ia(c),t[l].c(),t[l].m(e.parentNode,e))}for(;l<t.length;l+=1)t[l].d(1);t.length=a.length}},i:B,o:B,d(s){Le(t,s),s&&y(e)}}}function Zo(n,e,a){let{class:t=""}=e,{text:s}=e,r;return n.$$set=l=>{"class"in l&&a(0,t=l.class),"text"in l&&a(2,s=l.text)},n.$$.update=()=>{n.$$.dirty&4&&a(1,r=s.split(`
`))},[t,r,s]}class Dt extends Q{constructor(e){super(),K(this,e,Zo,Qo,X,{class:0,text:2})}}function ei(n){let e,a,t,s,r;return{c(){e=j("a"),a=Y(n[0]),i(e,"class",t=ct(`cursor-pointer h-6
    ${n[1]?n[2]?"text-slate-300":"text-slate-400 hover:text-slate-300 focus:text-slate-200":"text-slate-300"}
    ${n[2]?"highlighted":n[1]?"":"shadow"}`)+" svelte-1qgtpqn")},m(l,c){C(l,e,c),$(e,a),s||(r=[ue(e,"click",n[3]),ue(e,"mouseenter",n[4])],s=!0)},p(l,[c]){c&1&&Z(a,l[0]),c&6&&t!==(t=ct(`cursor-pointer h-6
    ${l[1]?l[2]?"text-slate-300":"text-slate-400 hover:text-slate-300 focus:text-slate-200":"text-slate-300"}
    ${l[2]?"highlighted":l[1]?"":"shadow"}`)+" svelte-1qgtpqn")&&i(e,"class",t)},i:B,o:B,d(l){l&&y(e),s=!1,Ve(r)}}}function ti(n,e,a){let{key:t}=e,{name:s}=e,{seen:r}=e,{highlighted:l}=e;const c=Me();function o(){c("dispatchClick",{key:t})}function d(){c("dispatchEnter",{key:t})}return n.$$set=_=>{"key"in _&&a(5,t=_.key),"name"in _&&a(0,s=_.name),"seen"in _&&a(1,r=_.seen),"highlighted"in _&&a(2,l=_.highlighted)},[s,r,l,o,d,t]}class Je extends Q{constructor(e){super(),K(this,e,ti,ei,X,{key:5,name:0,seen:1,highlighted:2})}}function ca(n,e,a){const t=n.slice();return t[48]=e[a],t}function da(n,e,a){const t=n.slice();return t[51]=e[a],t}function fa(n,e,a){const t=n.slice();return t[54]=e[a],t}function ua(n,e,a){const t=n.slice();return t[57]=e[a],t}function ga(n,e,a){const t=n.slice();return t[60]=e[a],t[62]=a,t}function ai(n){let e,a,t;return a=new ce({props:{class:"w-1/2",$$slots:{content:[ri]},$$scope:{ctx:n}}}),{c(){e=j("div"),x(a.$$.fragment),i(e,"class","flex flex-col items-center justify-center space-x-2 w-full")},m(s,r){C(s,e,r),S(a,e,null),t=!0},p(s,r){const l={};r[0]&4|r[2]&2&&(l.$$scope={dirty:r,ctx:s}),a.$set(l)},i(s){t||(k(a.$$.fragment,s),t=!0)},o(s){I(a.$$.fragment,s),t=!1},d(s){s&&y(e),M(a)}}}function ni(n){let e,a,t,s,r,l,c,o,d,_,g,p,m,u,b,f;e=new ce({props:{class:"w-1/4 h-full",$$slots:{content:[ci]},$$scope:{ctx:n}}}),s=new ce({props:{$$slots:{content:[di]},$$scope:{ctx:n}}}),l=new ce({props:{$$slots:{content:[fi]},$$scope:{ctx:n}}}),o=new ce({props:{class:"grow min-h-0",contentClass:"scrollbar-thin scrollbar-thumb-slate-600 hover:scrollbar-thumb-rounded overflow-x-hidden",$$slots:{content:[pi]},$$scope:{ctx:n}}}),g=new ce({props:{$$slots:{content:[hi]},$$scope:{ctx:n}}}),m=new ce({props:{$$slots:{content:[wi],header:[_i]},$$scope:{ctx:n}}});let h=n[2].dialogText!==void 0&&ja(n);return{c(){x(e.$$.fragment),a=L(),t=j("div"),x(s.$$.fragment),r=L(),x(l.$$.fragment),c=L(),x(o.$$.fragment),d=L(),_=j("div"),x(g.$$.fragment),p=L(),x(m.$$.fragment),u=L(),b=j("div"),h&&h.c(),i(t,"class","flex flex-col space-y-4 h-full"),_e(t,"width","30%"),i(b,"class","grow flex flex-col items-center justify-center h-full"),i(_,"class","grow flex flex-col h-full space-y-4")},m(v,w){S(e,v,w),C(v,a,w),C(v,t,w),S(s,t,null),$(t,r),S(l,t,null),$(t,c),S(o,t,null),C(v,d,w),C(v,_,w),S(g,_,null),$(_,p),S(m,_,null),$(_,u),$(_,b),h&&h.m(b,null),f=!0},p(v,w){const N={};w[0]&4|w[2]&2&&(N.$$scope={dirty:w,ctx:v}),e.$set(N);const A={};w[0]&29|w[2]&2&&(A.$$scope={dirty:w,ctx:v}),s.$set(A);const D={};w[0]&4|w[2]&2&&(D.$$scope={dirty:w,ctx:v}),l.$set(D);const R={};w[0]&6|w[2]&2&&(R.$$scope={dirty:w,ctx:v}),o.$set(R);const P={};w[0]&228|w[2]&2&&(P.$$scope={dirty:w,ctx:v}),g.$set(P);const ee={};w[0]&4|w[2]&2&&(ee.$$scope={dirty:w,ctx:v}),m.$set(ee),v[2].dialogText!==void 0?h?(h.p(v,w),w[0]&4&&k(h,1)):(h=ja(v),h.c(),k(h,1),h.m(b,null)):h&&(se(),I(h,1,1,()=>{h=null}),le())},i(v){f||(k(e.$$.fragment,v),k(s.$$.fragment,v),k(l.$$.fragment,v),k(o.$$.fragment,v),k(g.$$.fragment,v),k(m.$$.fragment,v),k(h),f=!0)},o(v){I(e.$$.fragment,v),I(s.$$.fragment,v),I(l.$$.fragment,v),I(o.$$.fragment,v),I(g.$$.fragment,v),I(m.$$.fragment,v),I(h),f=!1},d(v){M(e,v),v&&y(a),v&&y(t),M(s),M(l),M(o),v&&y(d),v&&y(_),M(g),M(m),h&&h.d()}}}function pa(n){let e,a;return{c(){e=j("img"),i(e,"class","object-contain w-full"),Ne(e.src,a=n[8].storage.images[n[8].storage.states.data[n[2].currentStateID].imageHash])||i(e,"src",a)},m(t,s){C(t,e,s)},p(t,s){s[0]&260&&!Ne(e.src,a=t[8].storage.images[t[8].storage.states.data[t[2].currentStateID].imageHash])&&i(e,"src",a)},d(t){t&&y(e)}}}function ma(n){let e,a=n[8].storage.states.data[n[2].currentStateID].args[0]+"",t;return{c(){e=j("p"),t=Y(a),i(e,"class","text-center font-bold text-slate-300 text-lg")},m(s,r){C(s,e,r),$(e,t)},p(s,r){r[0]&4&&a!==(a=s[8].storage.states.data[s[2].currentStateID].args[0]+"")&&Z(t,a)},d(s){s&&y(e)}}}function si(n){let e,a;return e=new J({props:{label:"Restart",onclick:n[11]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p:B,i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function li(n){let e,a;return e=new J({props:{label:"Start",onclick:n[12]}}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p:B,i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function ri(n){let e,a,t,s,r,l,c,o,d,_,g=n[8].storage.states.data[n[2].currentStateID].imageHash!==""&&pa(n);s=new Dt({props:{class:"text-slate-400 text-center",text:n[8].storage.states.data[n[2].currentStateID].description}});let p=n[8].storage.states.data[n[2].currentStateID].type==="ending"&&ma(n);const m=[li,si],u=[];function b(f,h){return f[8].storage.states.data[f[2].currentStateID].type==="opening"||f[8].storage.states.data[f[2].currentStateID].type==="intermediate"?0:1}return o=b(n),d=u[o]=m[o](n),{c(){e=j("div"),g&&g.c(),a=L(),t=j("div"),x(s.$$.fragment),r=L(),p&&p.c(),l=L(),c=j("div"),d.c(),i(t,"class","flex flex-col space-y-2 w-full items-center"),i(c,"class","flex flex-row justify-center"),i(e,"class","flex flex-col space-y-4 w-full h-full")},m(f,h){C(f,e,h),g&&g.m(e,null),$(e,a),$(e,t),S(s,t,null),$(e,r),p&&p.m(e,null),$(e,l),$(e,c),u[o].m(c,null),_=!0},p(f,h){f[8].storage.states.data[f[2].currentStateID].imageHash!==""?g?g.p(f,h):(g=pa(f),g.c(),g.m(e,a)):g&&(g.d(1),g=null);const v={};h[0]&4&&(v.text=f[8].storage.states.data[f[2].currentStateID].description),s.$set(v),f[8].storage.states.data[f[2].currentStateID].type==="ending"?p?p.p(f,h):(p=ma(f),p.c(),p.m(e,l)):p&&(p.d(1),p=null);let w=o;o=b(f),o===w?u[o].p(f,h):(se(),I(u[w],1,1,()=>{u[w]=null}),le(),d=u[o],d?d.p(f,h):(d=u[o]=m[o](f),d.c()),k(d,1),d.m(c,null))},i(f){_||(k(s.$$.fragment,f),k(d),_=!0)},o(f){I(s.$$.fragment,f),I(d),_=!1},d(f){f&&y(e),g&&g.d(),M(s),p&&p.d(),u[o].d()}}}function ba(n){let e,a;return{c(){e=j("img"),i(e,"class","object-contain w-4/5"),Ne(e.src,a=n[8].storage.images[n[8].storage.states.data[n[2].currentStateID].imageHash])||i(e,"src",a)},m(t,s){C(t,e,s)},p(t,s){s[0]&260&&!Ne(e.src,a=t[8].storage.images[t[8].storage.states.data[t[2].currentStateID].imageHash])&&i(e,"src",a)},d(t){t&&y(e)}}}function oi(n){let e;return{c(){e=j("div"),i(e,"class","h-6")},m(a,t){C(a,e,t)},p:B,i:B,o:B,d(a){a&&y(e)}}}function ii(n){let e,a;return e=new Je({props:{key:`${n[62]}`,name:`Hint ${n[62]+1}`,highlighted:!1,seen:!0}}),e.$on("dispatchClick",n[17]),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p:B,i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function ha(n){let e,a,t,s;const r=[ii,oi],l=[];function c(o,d){return o[2].currentAttempts>=o[8].storage.states.data[o[2].currentStateID].hints[o[62]].attempts&&o[8].storage.states.data[o[2].currentStateID].hints[o[62]].attempts!==-1?0:1}return e=c(n),a=l[e]=r[e](n),{c(){a.c(),t=Ce()},m(o,d){l[e].m(o,d),C(o,t,d),s=!0},p(o,d){let _=e;e=c(o),e===_?l[e].p(o,d):(se(),I(l[_],1,1,()=>{l[_]=null}),le(),a=l[e],a?a.p(o,d):(a=l[e]=r[e](o),a.c()),k(a,1),a.m(t.parentNode,t))},i(o){s||(k(a),s=!0)},o(o){I(a),s=!1},d(o){l[e].d(o),o&&y(t)}}}function ci(n){let e,a,t,s,r,l,c,o,d,_=n[8].storage.states.data[n[2].currentStateID].imageHash!==""&&ba(n);s=new Dt({props:{class:"w-full",text:n[8].storage.states.data[n[2].currentStateID].description}});let g={length:3},p=[];for(let u=0;u<g.length;u+=1)p[u]=ha(ga(n,g,u));const m=u=>I(p[u],1,1,()=>{p[u]=null});return{c(){e=j("div"),a=j("div"),_&&_.c(),t=L(),x(s.$$.fragment),r=L(),l=j("div"),c=L(),o=j("div");for(let u=0;u<p.length;u+=1)p[u].c();i(a,"class","flex flex-col w-full space-y-4 items-center"),i(l,"class","grow"),i(o,"class","flex flex-col space-y-2"),i(e,"class","h-full flex flex-col items-start")},m(u,b){C(u,e,b),$(e,a),_&&_.m(a,null),$(a,t),S(s,a,null),$(e,r),$(e,l),$(e,c),$(e,o);for(let f=0;f<p.length;f+=1)p[f].m(o,null);d=!0},p(u,b){u[8].storage.states.data[u[2].currentStateID].imageHash!==""?_?_.p(u,b):(_=ba(u),_.c(),_.m(a,t)):_&&(_.d(1),_=null);const f={};if(b[0]&4&&(f.text=u[8].storage.states.data[u[2].currentStateID].description),s.$set(f),b[0]&131332){g={length:3};let h;for(h=0;h<g.length;h+=1){const v=ga(u,g,h);p[h]?(p[h].p(v,b),k(p[h],1)):(p[h]=ha(v),p[h].c(),k(p[h],1),p[h].m(o,null))}for(se(),h=g.length;h<p.length;h+=1)m(h);le()}},i(u){if(!d){k(s.$$.fragment,u);for(let b=0;b<g.length;b+=1)k(p[b]);d=!0}},o(u){I(s.$$.fragment,u),p=p.filter(Boolean);for(let b=0;b<p.length;b+=1)I(p[b]);d=!1},d(u){u&&y(e),_&&_.d(),M(s),Le(p,u)}}}function _a(n){let e,a,t,s,r,l,c;return{c(){e=j("img"),t=L(),s=j("canvas"),i(e,"class","absolute h-full w-full object-contain"),_e(e,"z-index","12"),Ne(e.src,a=n[8].storage.images[n[8].storage.states.data[n[2].currentStateID].locations.data[n[2].currentMinimapLocationID].minimapHash])||i(e,"src",a),i(s,"class","absolute h-full w-full"),_e(s,"z-index","14"),i(s,"width",n[3]),i(s,"height",n[4]),Ee(()=>n[20].call(s))},m(o,d){C(o,e,d),C(o,t,d),C(o,s,d),n[19](s),r=Oa(s,n[20].bind(s)),l||(c=ue(s,"click",n[13]),l=!0)},p(o,d){d[0]&260&&!Ne(e.src,a=o[8].storage.images[o[8].storage.states.data[o[2].currentStateID].locations.data[o[2].currentMinimapLocationID].minimapHash])&&i(e,"src",a),d[0]&8&&i(s,"width",o[3]),d[0]&16&&i(s,"height",o[4])},d(o){o&&y(e),o&&y(t),o&&y(s),n[19](null),r(),l=!1,c()}}}function di(n){let e,a=n[8].storage.states.data[n[2].currentStateID].locations.data[n[2].currentMinimapLocationID].minimapHash!==""&&_a(n);return{c(){e=j("div"),a&&a.c(),i(e,"class","border border-slate-600 minimap-display svelte-i642mi")},m(t,s){C(t,e,s),a&&a.m(e,null)},p(t,s){t[8].storage.states.data[t[2].currentStateID].locations.data[t[2].currentMinimapLocationID].minimapHash!==""?a?a.p(t,s):(a=_a(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(t){t&&y(e),a&&a.d()}}}function wa(n){let e,a=n[57].name+"",t,s,r;return{c(){e=j("option"),t=Y(a),s=L(),i(e,"class","text-slate-300"),e.__value=r=n[57].id,e.value=e.__value},m(l,c){C(l,e,c),$(e,t),$(e,s)},p(l,c){c[0]&4&&a!==(a=l[57].name+"")&&Z(t,a),c[0]&260&&r!==(r=l[57].id)&&(e.__value=r,e.value=e.__value)},d(l){l&&y(e)}}}function $a(n){let e=n[2].availableMinimapLocations.includes(n[57].id),a,t=e&&wa(n);return{c(){t&&t.c(),a=Ce()},m(s,r){t&&t.m(s,r),C(s,a,r)},p(s,r){r[0]&4&&(e=s[2].availableMinimapLocations.includes(s[57].id)),e?t?t.p(s,r):(t=wa(s),t.c(),t.m(a.parentNode,a)):t&&(t.d(1),t=null)},d(s){t&&t.d(s),s&&y(a)}}}function fi(n){let e,a,t,s,r,l,c=n[8].storage.states.data[n[2].currentStateID].locations.ordering.map(n[21]),o=[];for(let d=0;d<c.length;d+=1)o[d]=$a(ua(n,c,d));return{c(){e=j("div"),a=j("p"),a.textContent="Change Location",t=L(),s=j("select");for(let d=0;d<o.length;d+=1)o[d].c();i(a,"class",ct("h-6 text-slate-400")+" svelte-i642mi"),i(s,"class",ct(`rounded border border-slate-600 placeholder-slate-500 focus:outline-none focus:border-slate-600
                                text-slate-300 bg-slate-800
                                block w-1/2 pl-2 pr-2 pt-1 pb-1`)+" svelte-i642mi"),n[2].currentMinimapLocationID===void 0&&Ee(()=>n[22].call(s)),i(e,"class","flex flex-row justify-between items-center")},m(d,_){C(d,e,_),$(e,a),$(e,t),$(e,s);for(let g=0;g<o.length;g+=1)o[g].m(s,null);dt(s,n[2].currentMinimapLocationID),r||(l=ue(s,"change",n[22]),r=!0)},p(d,_){if(_[0]&260){c=d[8].storage.states.data[d[2].currentStateID].locations.ordering.map(d[21]);let g;for(g=0;g<c.length;g+=1){const p=ua(d,c,g);o[g]?o[g].p(p,_):(o[g]=$a(p),o[g].c(),o[g].m(s,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=c.length}_[0]&260&&dt(s,d[2].currentMinimapLocationID)},d(d){d&&y(e),Le(o,d),r=!1,l()}}}function ui(n){let e;return{c(){e=j("p")},m(a,t){C(a,e,t)},p:B,i:B,o:B,d(a){a&&y(e)}}}function gi(n){let e,a;function t(...s){return n[24](n[54],...s)}return e=new Je({props:{key:n[1][n[54]][0],name:n[8].storage.restraints.data[n[1][n[54]][0]].name,highlighted:n[2].selectedComponentIDs.findIndex(t)!==-1,seen:n[2].seenInteractables.has(n[8].storage.restraints.data[n[1][n[54]][0]].id)}}),e.$on("dispatchClick",n[16]),e.$on("dispatchEnter",n[18]),{c(){x(e.$$.fragment)},m(s,r){S(e,s,r),a=!0},p(s,r){n=s;const l={};r[0]&2&&(l.key=n[1][n[54]][0]),r[0]&2&&(l.name=n[8].storage.restraints.data[n[1][n[54]][0]].name),r[0]&6&&(l.highlighted=n[2].selectedComponentIDs.findIndex(t)!==-1),r[0]&6&&(l.seen=n[2].seenInteractables.has(n[8].storage.restraints.data[n[1][n[54]][0]].id)),e.$set(l)},i(s){a||(k(e.$$.fragment,s),a=!0)},o(s){I(e.$$.fragment,s),a=!1},d(s){M(e,s)}}}function va(n){let e,a,t,s,r,l,c;function o(...p){return n[23](n[54],...p)}a=new Je({props:{key:n[8].data.restraintLocations.data[n[54]].id,name:n[8].data.restraintLocations.data[n[54]].name,highlighted:n[2].selectedComponentIDs.findIndex(o)!==-1,seen:!0}}),a.$on("dispatchClick",n[16]);const d=[gi,ui],_=[];function g(p,m){return p[1][p[54]]!==void 0?0:1}return s=g(n),r=_[s]=d[s](n),{c(){e=j("div"),x(a.$$.fragment),t=L(),r.c(),l=L(),i(e,"class","flex flex-row justify-between items-end")},m(p,m){C(p,e,m),S(a,e,null),$(e,t),_[s].m(e,null),$(e,l),c=!0},p(p,m){n=p;const u={};m[0]&4&&(u.highlighted=n[2].selectedComponentIDs.findIndex(o)!==-1),a.$set(u);let b=s;s=g(n),s===b?_[s].p(n,m):(se(),I(_[b],1,1,()=>{_[b]=null}),le(),r=_[s],r?r.p(n,m):(r=_[s]=d[s](n),r.c()),k(r,1),r.m(e,l))},i(p){c||(k(a.$$.fragment,p),k(r),c=!0)},o(p){I(a.$$.fragment,p),I(r),c=!1},d(p){p&&y(e),M(a),_[s].d()}}}function pi(n){let e,a,t=n[8].data.restraintLocations.ordering,s=[];for(let l=0;l<t.length;l+=1)s[l]=va(fa(n,t,l));const r=l=>I(s[l],1,1,()=>{s[l]=null});return{c(){e=j("div");for(let l=0;l<s.length;l+=1)s[l].c();i(e,"class","flex flex-col space-y-2 pl-2 pr-2 mr-2")},m(l,c){C(l,e,c);for(let o=0;o<s.length;o+=1)s[o].m(e,null);a=!0},p(l,c){if(c[0]&327942){t=l[8].data.restraintLocations.ordering;let o;for(o=0;o<t.length;o+=1){const d=fa(l,t,o);s[o]?(s[o].p(d,c),k(s[o],1)):(s[o]=va(d),s[o].c(),k(s[o],1),s[o].m(e,null))}for(se(),o=t.length;o<s.length;o+=1)r(o);le()}},i(l){if(!a){for(let c=0;c<t.length;c+=1)k(s[c]);a=!0}},o(l){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)I(s[c]);a=!1},d(l){l&&y(e),Le(s,l)}}}function ka(n){let e,a;return e=new Je({props:{key:n[51],name:n[8].data.actions.data[n[51]].name,highlighted:n[2].selectedActionID===n[51],seen:!0}}),e.$on("dispatchClick",n[15]),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p(t,s){const r={};s[0]&4&&(r.highlighted=t[2].selectedActionID===t[51]),e.$set(r)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function Da(n){let e;function a(r,l){return r[7]!==void 0?bi:mi}let t=a(n),s=t(n);return{c(){s.c(),e=Ce()},m(r,l){s.m(r,l),C(r,e,l)},p(r,l){t===(t=a(r))&&s?s.p(r,l):(s.d(1),s=t(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){s.d(r),r&&y(e)}}}function mi(n){let e;return{c(){e=Y(n[5])},m(a,t){C(a,e,t)},p(a,t){t[0]&32&&Z(e,a[5])},d(a){a&&y(e)}}}function bi(n){let e,a,t,s,r;return{c(){e=Y(n[5]),a=Y(" ["),t=Y(n[7]),s=Y("] "),r=Y(n[6])},m(l,c){C(l,e,c),C(l,a,c),C(l,t,c),C(l,s,c),C(l,r,c)},p(l,c){c[0]&32&&Z(e,l[5]),c[0]&128&&Z(t,l[7]),c[0]&64&&Z(r,l[6])},d(l){l&&y(e),l&&y(a),l&&y(t),l&&y(s),l&&y(r)}}}function hi(n){let e,a,t,s,r,l,c;t=new Je({props:{key:"examine",name:"Examine",highlighted:n[2].selectedActionID==="examine",seen:!0}}),t.$on("dispatchClick",n[15]);let o=n[8].data.actions.ordering,d=[];for(let p=0;p<o.length;p+=1)d[p]=ka(da(n,o,p));const _=p=>I(d[p],1,1,()=>{d[p]=null});let g=n[5]!==void 0&&Da(n);return{c(){e=j("div"),a=j("div"),x(t.$$.fragment),s=L();for(let p=0;p<d.length;p+=1)d[p].c();r=L(),l=j("p"),g&&g.c(),i(a,"class","flex flex-row items-center space-x-6 w-full"),i(l,"class","text-l text-slate-400 h-4"),_e(l,"text-shadow","0px 0px 5px #2f2b8a"),i(e,"class","flex flex-col space-y-2 items-start pl-1 pr-1 mb-1")},m(p,m){C(p,e,m),$(e,a),S(t,a,null),$(a,s);for(let u=0;u<d.length;u+=1)d[u].m(a,null);$(e,r),$(e,l),g&&g.m(l,null),c=!0},p(p,m){const u={};if(m[0]&4&&(u.highlighted=p[2].selectedActionID==="examine"),t.$set(u),m[0]&33028){o=p[8].data.actions.ordering;let b;for(b=0;b<o.length;b+=1){const f=da(p,o,b);d[b]?(d[b].p(f,m),k(d[b],1)):(d[b]=ka(f),d[b].c(),k(d[b],1),d[b].m(a,null))}for(se(),b=o.length;b<d.length;b+=1)_(b);le()}p[5]!==void 0?g?g.p(p,m):(g=Da(p),g.c(),g.m(l,null)):g&&(g.d(1),g=null)},i(p){if(!c){k(t.$$.fragment,p);for(let m=0;m<o.length;m+=1)k(d[m]);c=!0}},o(p){I(t.$$.fragment,p),d=d.filter(Boolean);for(let m=0;m<d.length;m+=1)I(d[m]);c=!1},d(p){p&&y(e),M(t),Le(d,p),g&&g.d()}}}function _i(n){let e;return{c(){e=j("p"),e.textContent="Found Objects",i(e,"class","text-slate-300 text-xl")},m(a,t){C(a,e,t)},p:B,d(a){a&&y(e)}}}function Ia(n){let e,a,t,s;function r(...l){return n[25](n[48],...l)}return a=new Je({props:{key:n[48],name:n[8].storage.objects.data[n[48]].name,highlighted:n[2].selectedComponentIDs.findIndex(r)!==-1,seen:n[2].seenInteractables.has(n[8].storage.objects.data[n[48]].id)}}),a.$on("dispatchClick",n[16]),a.$on("dispatchEnter",n[18]),{c(){e=j("div"),x(a.$$.fragment),t=L(),i(e,"class","flex flex-col items-center justify-center w-full h-full")},m(l,c){C(l,e,c),S(a,e,null),$(e,t),s=!0},p(l,c){n=l;const o={};c[0]&4&&(o.key=n[48]),c[0]&4&&(o.name=n[8].storage.objects.data[n[48]].name),c[0]&4&&(o.highlighted=n[2].selectedComponentIDs.findIndex(r)!==-1),c[0]&4&&(o.seen=n[2].seenInteractables.has(n[8].storage.objects.data[n[48]].id)),a.$set(o)},i(l){s||(k(a.$$.fragment,l),s=!0)},o(l){I(a.$$.fragment,l),s=!1},d(l){l&&y(e),M(a)}}}function wi(n){let e,a,t=n[2].revealedObjectIDs,s=[];for(let l=0;l<t.length;l+=1)s[l]=Ia(ca(n,t,l));const r=l=>I(s[l],1,1,()=>{s[l]=null});return{c(){e=j("div");for(let l=0;l<s.length;l+=1)s[l].c();i(e,"class","grid-container pb-1.5 gap-1 svelte-i642mi")},m(l,c){C(l,e,c);for(let o=0;o<s.length;o+=1)s[o].m(e,null);a=!0},p(l,c){if(c[0]&327940){t=l[2].revealedObjectIDs;let o;for(o=0;o<t.length;o+=1){const d=ca(l,t,o);s[o]?(s[o].p(d,c),k(s[o],1)):(s[o]=Ia(d),s[o].c(),k(s[o],1),s[o].m(e,null))}for(se(),o=t.length;o<s.length;o+=1)r(o);le()}},i(l){if(!a){for(let c=0;c<t.length;c+=1)k(s[c]);a=!0}},o(l){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)I(s[c]);a=!1},d(l){l&&y(e),Le(s,l)}}}function ja(n){let e,a,t,s,r,l,c;return a=new Dt({props:{text:n[2].dialogText}}),{c(){e=j("a"),x(a.$$.fragment),t=L(),s=j("p"),s.textContent="[ click to close dialog ]",i(s,"class","text-sm text-slate-500"),i(e,"class","max-w-lg bg-slate-800 rounded-lg space-y-4 p-4 text-center")},m(o,d){C(o,e,d),S(a,e,null),$(e,t),$(e,s),r=!0,l||(c=ue(e,"click",n[14]),l=!0)},p(o,d){const _={};d[0]&4&&(_.text=o[2].dialogText),a.$set(_)},i(o){r||(k(a.$$.fragment,o),r=!0)},o(o){I(a.$$.fragment,o),r=!1},d(o){o&&y(e),M(a),l=!1,c()}}}function $i(n){let e,a,t,s;const r=[ni,ai],l=[];function c(o,d){return o[8].storage.states.data[o[2].currentStateID].type==="starting"||o[8].storage.states.data[o[2].currentStateID].type==="normal"?0:1}return a=c(n),t=l[a]=r[a](n),{c(){e=j("div"),t.c(),i(e,"class","flex flex-row items-stretch space-x-4 grow min-h-0 p-4 text-slate-400")},m(o,d){C(o,e,d),l[a].m(e,null),s=!0},p(o,d){let _=a;a=c(o),a===_?l[a].p(o,d):(se(),I(l[_],1,1,()=>{l[_]=null}),le(),t=l[a],t?t.p(o,d):(t=l[a]=r[a](o),t.c()),k(t,1),t.m(e,null))},i(o){s||(k(t),s=!0)},o(o){I(t),s=!1},d(o){o&&y(e),l[a].d()}}}function vi(n,e,a){let t,s,r;ne(n,O,q=>a(29,r=q));const l=r;console.log("[RUN] Performing initialization...");const c=Object.entries(l.storage.states.data).filter(([q,W])=>W.type==="opening")[0][0],o=Object.entries(l.storage.states.data).filter(([q,W])=>W.type==="starting")[0][0],d=l.storage.states.data[c],_=l.storage.states.data[o];console.log(`[RUN] Found opening state: [${c} - ${d.title}]`),console.log(`[RUN] Found starting state: [${o} - ${_.title}]`);let g="",p=[];for(const q of l.storage.states.data[o].locations.ordering)l.storage.states.data[o].locations.data[q].initial===!0&&(p.push(q),g===""&&(g=q));const m=l.data.restraintLocations.ordering.map(q=>l.data.restraintLocations.data[q]).map(q=>q.initial).filter(q=>q!=="");for(const q of m){const W=l.storage.restraints.data[q],V=l.data.restraintLocations.data[W.location];console.log(`[RUN] Found initial restraint: [${q} - ${W.devName}] @ [${V.id} - ${V.name}]`)}let u,b,f,h;const v={dialogText:void 0,selectedActionID:void 0,selectedComponentIDs:["",""],currentStateID:c,currentMinimapLocationID:g,availableMinimapLocations:p,currentRestraintIDs:m,revealedObjectIDs:[],currentAttempts:0,seenInteractables:new Set,flags:{}},w=Qe(JSON.parse(JSON.stringify(v)));ne(n,w,q=>a(2,t=q)),F(w,t=v,t);const N=Qe([]);ne(n,N,q=>a(28,s=q)),window.gameData=l,window.runtimeStore=t,console.log("[RUN] Tip - reference $runtimeStore for debugging through window.runtimeStore"),console.log(window.runtimeStore);function A(){console.log("[RUN] Restarting game..."),F(w,t=v,t)}function D(){console.log("[RUN] Starting game, transitioning to next opening / starting state...");const q=Object.entries(l.storage.states.data),W=q.findIndex(be=>be[0]===t.currentStateID),V=q[W+1][1];console.log(V),V!==void 0&&V.type==="intermediate"?F(w,t.currentStateID=V.id,t):F(w,t.currentStateID=Object.entries(l.storage.states.data).filter(([be,te])=>te.type==="starting")[0][0],t)}let R={};function P(q){if(q===void 0)return;const W=u.getBoundingClientRect(),V=q.clientX-W.left,be=q.clientY-W.top;console.log(`[RUN] handleMinimapClick - click coordinates (${V} / ${W.width}, ${be} / ${W.height})`);for(const te of l.storage.states.data[t.currentStateID].locations.data[t.currentMinimapLocationID].minimapObjects.ordering.map(de=>l.storage.states.data[t.currentStateID].locations.data[t.currentMinimapLocationID].minimapObjects.data[de])){const de=new Path2D;if(te.type==="vector"&&te.args[0]!==void 0&&te.args[1]!==void 0)for(const[ae,ke]of te.args){const gt=Math.floor(ae*W.width),pt=Math.floor(ke*W.height);de.lineTo(gt,pt)}else if(te.args[1]!==void 0){const[[ae,ke],[gt,pt]]=te.args,It=Math.floor(ae*W.width),jt=Math.floor(ke*W.height),qa=Math.floor(gt*W.width),za=Math.floor(pt*W.height),Ta=Math.sqrt(Math.pow(It-qa,2)+Math.pow(jt-za,2));de.arc(It,jt,Ta,0,2*Math.PI)}if(b.isPointInPath(de,V,be)){console.log(`[RUN] handleMinimapClick - found click location within minimap [${te.id} - ${te.devName}]`),te.object!==""&&ee(te.object),te.dialog!==""&&oe(te.dialog);return}}console.log("[RUN] handleMinimapClick - found no minimap objects at click location")}function ee(q){const W=l.storage.objects.data[q];console.log(`[RUN] addFoundObject - [${q} - ${W.devName}]`),t.revealedObjectIDs.findIndex(V=>V===q)===-1&&(t.revealedObjectIDs.push(q),t.revealedObjectIDs.sort((V,be)=>l.storage.objects.ordering.findIndex(te=>te===V)-l.storage.objects.ordering.findIndex(te=>te===be)),w.set(t))}function fe(q){const W=l.storage.objects.data[q];console.log(`[RUN] hideObject - [${q} - ${W.devName}]`),F(w,t.revealedObjectIDs=t.revealedObjectIDs.filter(V=>V!==q),t)}function ge(q){const W=l.storage.restraints.data[q];if(t.currentRestraintIDs.findIndex(V=>V===q)!==-1){console.log(`[RUN] addRestraint - already wearing [${q} - ${W.devName}], not adding`);return}console.log(`[RUN] addRestraint - [${q} - ${W.devName}]`),t.currentRestraintIDs.push(q),t.currentRestraintIDs.sort((V,be)=>l.storage.restraints.ordering.findIndex(te=>te===V)-l.storage.restraints.ordering.findIndex(te=>te===be)),w.set(t)}function G(q){const W=l.storage.restraints.data[q];console.log(`[RUN] removeRestraint - [${q} - ${W.devName}]`),F(w,t.currentRestraintIDs=t.currentRestraintIDs.filter(V=>V!==q),t)}function pe(q){const W=l.storage.states.data[t.currentStateID].locations.data[q];if(t.availableMinimapLocations.findIndex(V=>V===q)!==-1){console.log(`[RUN] addLocation - already has location [${W.devName}], not adding`);return}console.log(`[RUN] addLocation - ${W.devName}`),t.availableMinimapLocations.push(q),w.set(t),F(w,t.currentMinimapLocationID=q,t)}function re(q){const W=l.storage.states.data[t.currentStateID].locations.data[q];console.log(`[RUN] removeRestraint - ${W.devName}`),F(w,t.availableMinimapLocations=t.availableMinimapLocations.filter(V=>V!==q),t),t.currentMinimapLocationID===q&&F(w,t.currentMinimapLocationID=l.storage.states.data[t.currentStateID].locations.ordering.filter(V=>t.availableMinimapLocations.includes(V))[0],t)}function oe(q){console.log(`[RUN] showDialog - displaying dialog [${q}]`),F(w,t.dialogText=q,t)}function je(){console.log("[RUN] hideDialog - hiding dialog text if shown"),F(w,t.dialogText=void 0,t)}function Oe(){console.log("[RUN] resetAttempts - resetting number of attempts to 0"),F(w,t.currentAttempts=0,t)}function Se(){console.log("[RUN] backupRuntimeData - backing-up data for later undoing"),s.push(JSON.parse(JSON.stringify(t))),N.set(s)}function ye(q){if(q===void 0)return;const W=q.detail.key;if(t.selectedActionID===W){F(w,t.selectedActionID=void 0,t);return}if(F(w,t.selectedComponentIDs=["",""],t),W!=="examine"){const V=l.data.actions.data[W];console.log(`[RUN] handleActionClick - [${W} - ${V.name}]`)}else console.log("[RUN] handleActionClick - [examine]");F(w,t.selectedActionID=W===t.selectedActionID?void 0:W,t)}function De(q,W,V){if(V!==Object.values(W.criteria.data).filter(te=>te.type==="exceededAttempts").length>0||V===!1&&(W.action!==t.selectedActionID||W.components[0]!==t.selectedComponentIDs[0]&&(q.order===!0||W.components[1]!==t.selectedComponentIDs[0])||W.components[1]!==t.selectedComponentIDs[1]&&(q.order===!0||W.components[0]!==t.selectedComponentIDs[1])))return!1;const be=W.criteria.ordering.map(te=>{const de=W.criteria.data[te];let ae=!1;switch(de.type){case"flagEquals":ae=t.flags[de.args[0]]===de.args[1];break;case"flagNotEquals":ae=t.flags[de.args[0]]!==de.args[1];break;case"objectFound":ae=t.revealedObjectIDs.findIndex(ke=>ke===de.args[0])!==-1;break;case"objectNotFound":ae=t.revealedObjectIDs.findIndex(ke=>ke===de.args[0])===-1;break;case"restraintWearing":ae=t.currentRestraintIDs.findIndex(ke=>ke===de.args[0])!==-1;break;case"restraintNotWearing":ae=t.currentRestraintIDs.findIndex(ke=>ke===de.args[0])===-1;break;case"exceededAttempts":ae=V&&t.currentAttempts>=de.args[0],console.log(`exceededAttempts check: ${ae}`);break}return ae}).every(te=>te===!0);return V===!0&&console.log(be),be}function Ie(q){for(const W of q.results.ordering){const V=q.results.data[W];switch(V.type){case"setFlag":F(w,t.flags[V.args[0]]=V.args[1],t);break;case"setState":alert(JSON.stringify(V.args)),F(w,t.currentStateID=V.args[0],t),F(w,t.currentAttempts=0,t),l.storage.states.data[t.currentStateID].locations.data[t.currentMinimapLocationID]===void 0&&F(w,t.currentMinimapLocationID=l.storage.states.data[t.currentStateID].locations.ordering[0],t);break;case"popupDialog":oe(V.args[0]);break;case"objectReveal":ee(V.args[0]);break;case"objectHide":fe(V.args[0]);break;case"restraintAdd":ge(V.args[0]);break;case"restraintRemove":G(V.args[0]);break;case"locationAdd":pe(V.args[0]);break;case"locationRemove":re(V.args[0]);break;case"resetAttempts":Oe()}}}function Be(q){if(t.selectedActionID===void 0||q===void 0)return;const W=q.detail.key;F(w,t.selectedComponentIDs[t.selectedComponentIDs[0]===""?0:1]=W,t),w.set(t);const V=l.data.actions.data[t.selectedActionID];if(t.selectedActionID==="examine"&&t.selectedComponentIDs[0]!==void 0){if(l.data.restraintLocations.ordering.includes(t.selectedComponentIDs[0])===!1){const de=l.storage.objects.data[t.selectedComponentIDs[0]]?l.storage.objects.data[t.selectedComponentIDs[0]].examine:l.storage.restraints.data[t.selectedComponentIDs[0]]?l.storage.restraints.data[t.selectedComponentIDs[0]].examine:void 0;console.log(`[RUN] handleObjectClick - handling object/restraint examine action [${t.selectedComponentIDs[0]} - ${de}]`),oe(de)}F(w,t.selectedActionID=void 0,t),F(w,t.selectedComponentIDs=["",""],t);return}let be=!1,te=V.two===!1||t.selectedComponentIDs[0]!==""&&t.selectedComponentIDs[1]!=="";for(const de of l.storage.states.data[t.currentStateID].interactions.ordering){const ae=l.storage.states.data[t.currentStateID].interactions.data[de];if(De(V,ae,!1)!==!1&&(console.log(`[RUN] handleObjectClick - criteria(s) passed (attempts = false), executing interaction [${de} - ${ae.devName}]`),be=!0,te=!0,Se(),Ie(ae),be===!0)){F(w,t.selectedActionID=void 0,t),F(w,t.selectedComponentIDs=["",""],t);break}}if(be===!1&&console.log("[RUN] handleObjectClick - found no interactions matching all criteria"),be===!1&&te===!0){F(w,t.currentAttempts++,t);for(const de of l.storage.states.data[t.currentStateID].interactions.ordering){const ae=l.storage.states.data[t.currentStateID].interactions.data[de];if(De(V,ae,!0)!==!1){console.log(`[RUN] handleObjectClick - criteria(s) passed (attempts = true), executing interaction [${de} - ${ae.devName}]`),Ie(ae);break}}console.log("[RUN] handleObjectClick - clearing since no interaction found"),F(w,t.dialogText="You can't do that!",t),F(w,t.selectedActionID=void 0,t),F(w,t.selectedComponentIDs=["",""],t)}}function He(q){if(q===void 0)return;const W=parseInt(q.detail.key),V=`Hint: ${l.storage.states.data[t.currentStateID].hints[W].text}`;console.log(`[RUN] handleHintClick - displaying hint text (as dialog) [${W} - ${V}]`),F(w,t.dialogText=V,t)}function We(q){if(q===void 0)return;const W=q.detail.key;t.seenInteractables.add(W),w.set(t)}let xe,me,ze;w.subscribe(q=>{if(q.selectedActionID==="examine")a(5,xe="Examine");else{const te=l.data.actions.data[q.selectedActionID];a(5,xe=te!==void 0?te.name:void 0),a(6,me=te!==void 0?te.verb:void 0)}const W=l.storage.restraints.data[q.selectedComponentIDs[0]];if(W!==void 0){a(7,ze=W.name);return}const V=l.storage.objects.data[q.selectedComponentIDs[0]];if(V!==void 0){a(7,ze=V.name);return}const be=l.data.restraintLocations.data[q.selectedComponentIDs[0]];if(be!==void 0){a(7,ze=be.name);return}a(7,ze=void 0)});function et(q){z[q?"unshift":"push"](()=>{u=q,a(0,u)})}function Re(){f=this.clientWidth,h=this.clientHeight,a(3,f),a(4,h)}const tt=q=>l.storage.states.data[t.currentStateID].locations.data[q];function U(){t.currentMinimapLocationID=La(this),w.set(t),a(8,l)}const ie=(q,W)=>W===l.data.restraintLocations.data[q].id,qe=(q,W)=>W===R[q][0],Ye=(q,W)=>W===q;return n.$$.update=()=>{if(n.$$.dirty[0]&1&&u&&(b=u.getContext("2d")),n.$$.dirty[0]&6){t.currentRestraintIDs,a(1,R={});for(const q of t.currentRestraintIDs){const W=l.storage.restraints.data[q];a(1,R[W.location]=[W.id,W.name],R)}a(1,R),a(2,t)}},[u,R,t,f,h,xe,me,ze,l,w,N,A,D,P,je,ye,Be,He,We,et,Re,tt,U,ie,qe,Ye]}class ki extends Q{constructor(e){super(),K(this,e,vi,$i,X,{},null,[-1,-1,-1])}}function Di(n){let e,a,t,s;function r(o){n[8](o)}function l(o){n[9](o)}let c={navigationData:n[4]};return n[0]!==void 0&&(c.selectedWindow=n[0]),n[1]!==void 0&&(c.navigateTab=n[1]),e=new wn({props:c}),z.push(()=>E(e,"selectedWindow",r)),z.push(()=>E(e,"navigateTab",l)),{c(){x(e.$$.fragment)},m(o,d){S(e,o,d),s=!0},p(o,d){const _={};!a&&d&1&&(a=!0,_.selectedWindow=o[0],T(()=>a=!1)),!t&&d&2&&(t=!0,_.navigateTab=o[1],T(()=>t=!1)),e.$set(_)},i(o){s||(k(e.$$.fragment,o),s=!0)},o(o){I(e.$$.fragment,o),s=!1},d(o){M(e,o)}}}function Ii(n){let e,a;return e=new ki({}),{c(){x(e.$$.fragment)},m(t,s){S(e,t,s),a=!0},p:B,i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){M(e,t)}}}function ji(n){let e,a,t,s,r,l,c,o;function d(b){n[6](b)}function _(b){n[7](b)}let g={navigationData:n[4],navigationClickHandler:n[5]};n[0]!==void 0&&(g.selectedWindow=n[0]),n[2]!==void 0&&(g.show=n[2]),a=new bn({props:g}),z.push(()=>E(a,"selectedWindow",d)),z.push(()=>E(a,"show",_));const p=[Ii,Di],m=[];function u(b,f){return b[3]===!0?0:b[2]===!0?1:-1}return~(l=u(n))&&(c=m[l]=p[l](n)),{c(){e=j("div"),x(a.$$.fragment),r=L(),c&&c.c(),i(e,"class","absolute inset-0 flex flex-col h-full w-full")},m(b,f){C(b,e,f),S(a,e,null),$(e,r),~l&&m[l].m(e,null),o=!0},p(b,[f]){const h={};!t&&f&1&&(t=!0,h.selectedWindow=b[0],T(()=>t=!1)),!s&&f&4&&(s=!0,h.show=b[2],T(()=>s=!1)),a.$set(h);let v=l;l=u(b),l===v?~l&&m[l].p(b,f):(c&&(se(),I(m[v],1,1,()=>{m[v]=null}),le()),~l?(c=m[l],c?c.p(b,f):(c=m[l]=p[l](b),c.c()),k(c,1),c.m(e,null)):c=null)},i(b){o||(k(a.$$.fragment,b),k(c),o=!0)},o(b){I(a.$$.fragment,b),I(c),o=!1},d(b){b&&y(e),M(a),~l&&m[l].d()}}}function yi(n,e,a){let t;ne(n,it,m=>a(3,t=m));const s={information:{display:"Information",component:as},states:{display:"States",component:As},restraints:{display:"Restraints",component:Ko},objects:{display:"Objects",component:_r},interactions:{display:"Interactions",component:Kl},minimap:{display:"Minimap",component:go}};let r=Object.keys(s)[0],l;const c=m=>{l(m)};O.subscribe(m=>window.projectStore=m);let o=!0;function d(m){r=m,a(0,r)}function _(m){o=m,a(2,o)}function g(m){r=m,a(0,r)}function p(m){l=m,a(1,l)}return[r,l,o,t,s,c,d,_,g,p]}class Ci extends Q{constructor(e){super(),K(this,e,yi,ji,X,{})}}new Ci({target:document.getElementById("app")});
